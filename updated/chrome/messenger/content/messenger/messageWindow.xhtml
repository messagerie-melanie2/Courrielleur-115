<?xml version="1.0"?>


<?xml-stylesheet href="chrome://messenger/skin/messageWindow.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/popupPanel.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/messageHeader.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/icons.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/colors.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/folderMenus.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/attachmentList.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/searchBox.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/panelUI.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/contextMenu.css" type="text/css"?>
<?xml-stylesheet href="chrome://calendar/skin/calendar.css" type="text/css"?>
<?xml-stylesheet href="chrome://calendar/skin/shared/calendar-toolbar.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/openpgp/inlineNotification.css" type="text/css"?>

<!DOCTYPE html [
<!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd" >
%brandDTD;
<!ENTITY % msgHdrViewOverlayDTD SYSTEM "chrome://messenger/locale/msgHdrViewOverlay.dtd">
%msgHdrViewOverlayDTD;
<!ENTITY % messengerDTD SYSTEM "chrome://messenger/locale/messenger.dtd" >
%messengerDTD;
<!ENTITY % customizeToolbarDTD SYSTEM "chrome://messenger/locale/customizeToolbar.dtd">
%customizeToolbarDTD;
<!ENTITY % utilityDTD SYSTEM "chrome://communicator/locale/utilityOverlay.dtd">
%utilityDTD;
<!ENTITY % msgViewPickerDTD SYSTEM "chrome://messenger/locale/msgViewPickerOverlay.dtd" >
%msgViewPickerDTD;
<!ENTITY % baseMenuOverlayDTD SYSTEM "chrome://messenger/locale/baseMenuOverlay.dtd">
%baseMenuOverlayDTD;
<!ENTITY % utilityDTD SYSTEM "chrome://communicator/locale/utilityOverlay.dtd">
%utilityDTD;
<!ENTITY % viewZoomOverlayDTD SYSTEM "chrome://messenger/locale/viewZoomOverlay.dtd">
%viewZoomOverlayDTD;
<!ENTITY % msgViewPickerDTD SYSTEM "chrome://messenger/locale/msgViewPickerOverlay.dtd" >
%msgViewPickerDTD;
<!ENTITY % lightningDTD SYSTEM "chrome://lightning/locale/lightning.dtd">
%lightningDTD;
<!ENTITY % calendarDTD SYSTEM "chrome://calendar/locale/calendar.dtd" >
%calendarDTD;
<!ENTITY % calendarMenuOverlayDTD SYSTEM "chrome://calendar/locale/menuOverlay.dtd" >
%calendarMenuOverlayDTD;
<!ENTITY % toolbarDTD SYSTEM "chrome://lightning/locale/lightning-toolbar.dtd">
%toolbarDTD;
<!ENTITY % eventDialogDTD SYSTEM "chrome://calendar/locale/calendar-event-dialog.dtd" >
%eventDialogDTD;
<!ENTITY % smimeDTD SYSTEM "chrome://messenger-smime/locale/msgReadSecurityInfo.dtd">
%smimeDTD;
]>

<!--
  - This window displays a single message.
  -->
<html id="messengerWindow" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      xmlns:html="http://www.w3.org/1999/xhtml"
      icon="messengerWindow"
      scrolling="false"
      titlemodifier="&titledefault.label;"
      titlemenuseparator="&titleSeparator.label;"
      persist="width height screenX screenY sizemode"
      toggletoolbar="true"
      windowtype="mail:messageWindow"
      lightweightthemes="true"
      fullscreenbutton="true">
<head>
  <title>&titledefault.label;</title>
  <link rel="localization" href="branding/brand.ftl" />
  <link rel="localization" href="messenger/messenger.ftl" />
  <link rel="localization" href="toolkit/main-window/findbar.ftl" />
  <link rel="localization" href="toolkit/global/textActions.ftl" />
  <link rel="localization" href="toolkit/printing/printUI.ftl" />
  <link rel="localization" href="messenger/menubar.ftl" />
  <link rel="localization" href="messenger/appmenu.ftl" />
  <link rel="localization" href="messenger/openpgp/openpgp.ftl" />
  <link rel="localization" href="messenger/openpgp/openpgp-frontend.ftl" />

  <script defer="defer" src="chrome://messenger/content/globalOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailWindow.js"></script>
  <script defer="defer" src="chrome://messenger/content/messageWindow.js"></script>
  <script defer="defer" src="chrome://global/content/contentAreaUtils.js"></script>
  <script defer="defer" src="chrome://messenger/content/browserPopups.js"></script>
  <script defer="defer" src="chrome://messenger/content/toolbarIconColor.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailCommands.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailWindowOverlay.js"></script>
  <script defer="defer" src="chrome://messenger-newsblog/content/newsblogOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/mail-offline.js"></script>
  <script defer="defer" src="chrome://messenger/content/viewZoomOverlay.js"></script>
  <script defer="defer" src="chrome://communicator/content/utilityOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailCore.js"></script>
  <script defer="defer" src="chrome://messenger/content/panelUI.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/toolbarbutton-badge-button.js"></script>
  <script defer="defer" src="chrome://messenger/content/messenger-customization.js"></script>
  <script defer="defer" src="chrome://messenger/content/customizable-toolbar.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-chrome-startup.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-management.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-item-editing.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-extract.js"></script>
</head>
<html:body xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <stringbundle id="bundle_brand" src="chrome://branding/locale/brand.properties"/>
  <stringbundle id="bundle_messenger" src="chrome://messenger/locale/messenger.properties"/>

  <commandset id="mailCommands">

  <command id="cmd_quitApplication" oncommand="goQuitApplication(event)"/>
  <command id="cmd_CustomizeMailToolbar"
           oncommand="CustomizeMailToolbar('mail-toolbox', 'CustomizeMailToolbar')"/>

  <commandset id="mailFileMenuItems"
              commandupdater="true"
              events="create-menu-file"
              oncommandupdate="goUpdateMailMenuItems(this)">
      <command id="cmd_newFolder" oncommand="goDoCommand('cmd_newFolder')" disabled="true"/>
      <command id="cmd_newVirtualFolder" oncommand="goDoCommand('cmd_newVirtualFolder')" disabled="true"/>
      <command id="cmd_getNewMessages" oncommand="goDoCommand('cmd_getNewMessages')" disabled="true"/>
      <command id="cmd_open" oncommand="goDoCommand('cmd_open')"/>

      <command id="cmd_emptyTrash" oncommand="goDoCommand('cmd_emptyTrash')" disabled="true"/>
      <command id="cmd_compactFolder" oncommand="goDoCommand('cmd_compactFolder')" disabled="true"/>
      <command id="cmd_print" oncommand="goDoCommand('cmd_print')" disabled="true"/>
      <command id="cmd_saveAsFile" oncommand="goDoCommand('cmd_saveAsFile')" disabled="true"/>
      <command id="cmd_saveAsTemplate" oncommand="goDoCommand('cmd_saveAsTemplate')" disabled="true"/>
      <command id="cmd_getNextNMessages" oncommand="goDoCommand('cmd_getNextNMessages')" disabled="true"/>
      <command id="cmd_deleteFolder" oncommand="goDoCommand('cmd_deleteFolder')"/>
      <command id="cmd_renameFolder" oncommand="goDoCommand('cmd_renameFolder')" />
      <command id="cmd_sendUnsentMsgs" oncommand="goDoCommand('cmd_sendUnsentMsgs')" />
      <command id="cmd_subscribe" oncommand="goDoCommand('cmd_subscribe')" disabled="true"/>
      <command id="cmd_synchronizeOffline" oncommand="goDoCommand('cmd_synchronizeOffline')" disabled="true"/>
      <command id="cmd_downloadFlagged" oncommand="goDoCommand('cmd_downloadFlagged')" disabled="true"/>
      <command id="cmd_downloadSelected" oncommand="goDoCommand('cmd_downloadSelected')" disabled="true"/>
      <command id="cmd_settingsOffline" oncommand="goDoCommand('cmd_settingsOffline')" disabled="true"/>
  </commandset>

  <commandset id="mailViewMenuItems"
              commandupdater="true"
              events="create-menu-view"
              oncommandupdate="goUpdateMailMenuItems(this)">
     <command id="cmd_showQuickFilterBar"
              oncommand="goDoCommand('cmd_showQuickFilterBar');"/>
     <command id="cmd_toggleQuickFilterBar"
              oncommand="goDoCommand('cmd_toggleQuickFilterBar');"/>
     <command id="cmd_viewPageSource" oncommand="goDoCommand('cmd_viewPageSource')" disabled="true"/>
     <command id="cmd_setFolderCharset" oncommand="goDoCommand('cmd_setFolderCharset')" />

     <command id="cmd_expandAllThreads" oncommand="goDoCommand('cmd_expandAllThreads')" disabled="true"/>
     <command id="cmd_collapseAllThreads" oncommand="goDoCommand('cmd_collapseAllThreads')" disabled="true"/>
     <command id="cmd_viewClassicMailLayout" oncommand="goDoCommand('cmd_viewClassicMailLayout')" disabled="true"/>
     <command id="cmd_viewWideMailLayout" oncommand="goDoCommand('cmd_viewWideMailLayout')" disabled="true"/>
     <command id="cmd_viewVerticalMailLayout" oncommand="goDoCommand('cmd_viewVerticalMailLayout')" disabled="true"/>
     <command id="cmd_toggleFolderPane" oncommand="goDoCommand('cmd_toggleFolderPane')" disabled="true"/>
     <command id="cmd_toggleThreadPaneHeader" oncommand="goDoCommand('cmd_toggleThreadPaneHeader')" disabled="true"/>
     <command id="cmd_toggleMessagePane" oncommand="goDoCommand('cmd_toggleMessagePane')" disabled="true"/>
     <command id="cmd_viewAllMsgs" oncommand="goDoCommand('cmd_viewAllMsgs')" disabled="true"/>
     <command id="cmd_viewUnreadMsgs" oncommand="goDoCommand('cmd_viewUnreadMsgs')" disabled="true"/>
     <command id="cmd_viewThreadsWithUnread" oncommand="goDoCommand('cmd_viewThreadsWithUnread')" disabled="true"/>
     <command id="cmd_viewWatchedThreadsWithUnread" oncommand="goDoCommand('cmd_viewWatchedThreadsWithUnread')" disabled="true"/>
     <command id="cmd_viewIgnoredThreads" oncommand="goDoCommand('cmd_viewIgnoredThreads')" disabled="true"/>
     <commandset id="viewZoomCommands"
                 commandupdater="true"
                 events="create-menu-view"
                 oncommandupdate="goUpdateMailMenuItems(this);">
       <command id="cmd_fullZoomReduce"
                oncommand="goDoCommand('cmd_fullZoomReduce');"/>
       <command id="cmd_fullZoomEnlarge"
                oncommand="goDoCommand('cmd_fullZoomEnlarge');"/>
       <command id="cmd_fullZoomReset"
                oncommand="goDoCommand('cmd_fullZoomReset');"/>
       <command id="cmd_fullZoomToggle"
                oncommand="goDoCommand('cmd_fullZoomToggle');"
                checked="false"/>
     </commandset>
  </commandset>

  <commandset id="mailEditMenuItems"
              commandupdater="true"
              events="create-menu-edit"
              oncommandupdate="goUpdateMailMenuItems(this)">

    <command id="cmd_undo"
           oncommand="goDoCommand('cmd_undo')"
           disabled="true"
           valueDeleteMsg="&undoDeleteMsgCmd.label;"
           valueMoveMsg="&undoMoveMsgCmd.label;"
           valueCopyMsg="&undoCopyMsgCmd.label;"
           valueUnmarkAllMsgs="&undoMarkAllCmd.label;"
           valueDefault="&undoDefaultCmd.label;"/>
    <command id="cmd_redo"
           oncommand="goDoCommand('cmd_redo')"
           disabled="true"
           valueDeleteMsg="&redoDeleteMsgCmd.label;"
           valueMoveMsg="&redoMoveMsgCmd.label;"
           valueCopyMsg="&redoCopyMsgCmd.label;"
           valueUnmarkAllMsgs="&redoMarkAllCmd.label;"
           valueDefault="&redoDefaultCmd.label;"/>
    <command id="cmd_cut"
           oncommand="goDoCommand('cmd_cut')"
           disabled="true"/>
    <command id="cmd_copy"
           oncommand="goDoCommand('cmd_copy')"
           disabled="true"/>
    <command id="cmd_paste"
           oncommand="goDoCommand('cmd_paste')"
           disabled="true"/>
    <command id="cmd_delete"
             oncommand="goDoCommand('cmd_delete')"
             disabled="true"/>
    <command id="cmd_cancel" oncommand="goDoCommand('cmd_cancel')"/>
    <command id="cmd_selectThread" oncommand="goDoCommand('cmd_selectThread')"/>
    <command id="cmd_selectFlagged" oncommand="goDoCommand('cmd_selectFlagged')"/>
    <command id="cmd_toggleFavoriteFolder" oncommand="goDoCommand('cmd_toggleFavoriteFolder')"/>
    <command id="cmd_properties" oncommand="goDoCommand('cmd_properties')"/>
    <command id="cmd_find" oncommand="goDoCommand('cmd_find')" disabled="true"/>
    <command id="cmd_findAgain" oncommand="goDoCommand('cmd_findAgain')" disabled="true"/>
    <command id="cmd_findPrevious" oncommand="goDoCommand('cmd_findPrevious')"
             disabled="true"/>
    <command id="cmd_searchMessages" oncommand="goDoCommand('cmd_searchMessages');"/>
    <!-- Stop/abort current network activities. -->
    <command id="cmd_stop" oncommand="goDoCommand('cmd_stop')"/>
    <command id="cmd_reload" oncommand="goDoCommand('cmd_reload')"/>
  </commandset>

  <commandset id="mailEditContextMenuItems">
    <command id="cmd_copyLink" oncommand="goDoCommand('cmd_copyLink')" disabled="false"/>
    <command id="cmd_copyImage" oncommand="goCopyImage()" disabled="false"/>
  </commandset>

  <commandset id="mailGoMenuItems"
              commandupdater="true"
              events="create-menu-go"
              oncommandupdate="goUpdateMailMenuItems(this)">

    <command id="cmd_nextMsg" oncommand="goDoCommand('cmd_nextMsg')" disabled="true"/>
    <command id="cmd_nextUnreadMsg" oncommand="goDoCommand('cmd_nextUnreadMsg')" disabled="true"/>
    <command id="cmd_nextFlaggedMsg" oncommand="goDoCommand('cmd_nextFlaggedMsg')" disabled="true"/>
    <command id="cmd_nextUnreadThread" oncommand="goDoCommand('cmd_nextUnreadThread')" disabled="true"/>
    <command id="cmd_previousMsg" oncommand="goDoCommand('cmd_previousMsg')" disabled="true"/>
    <command id="cmd_previousUnreadMsg" oncommand="goDoCommand('cmd_previousUnreadMsg')" disabled="true"/>
    <command id="cmd_previousFlaggedMsg" oncommand="goDoCommand('cmd_previousFlaggedMsg')" disabled="true"/>
    <command id="cmd_goStartPage" oncommand="goDoCommand('cmd_goStartPage');"/>
    <command id="cmd_undoCloseTab" oncommand="goDoCommand('cmd_undoCloseTab');"/>
    <command id="cmd_goForward" oncommand="goDoCommand('cmd_goForward')" disabled="true"/>
    <command id="cmd_goBack" oncommand="goDoCommand('cmd_goBack')" disabled="true"/>
    <command id="cmd_goFolder" oncommand="" disabled="true"/>
    <command id="cmd_chat" oncommand="goDoCommand('cmd_chat')" disabled="true"/>
  </commandset>

  <commandset id="mailMessageMenuItems"
              commandupdater="true"
              events="create-menu-message"
              oncommandupdate="goUpdateMailMenuItems(this)">
    <command id="cmd_archive" oncommand="goDoCommand('cmd_archive')"/>
    <command id="cmd_newMessage" oncommand="goDoCommand('cmd_newMessage', event)"/>
    <command id="cmd_reply" oncommand="goDoCommand('cmd_reply', event)"/>
    <command id="cmd_replySender" oncommand="goDoCommand('cmd_replySender', event)"/>
    <command id="cmd_replyGroup" oncommand="goDoCommand('cmd_replyGroup', event)"/>
    <command id="cmd_replyall" oncommand="goDoCommand('cmd_replyall', event)"/>
    <command id="cmd_replylist" oncommand="goDoCommand('cmd_replylist', event)"/>
    <command id="cmd_forward" oncommand="goDoCommand('cmd_forward', event);"/>
    <command id="cmd_forwardInline" oncommand="goDoCommand('cmd_forwardInline', event)"/>
    <command id="cmd_forwardAttachment" oncommand="goDoCommand('cmd_forwardAttachment', event);"/>
    <command id="cmd_redirect" oncommand="goDoCommand('cmd_redirect', event)"/>
    <command id="cmd_editAsNew" oncommand="goDoCommand('cmd_editAsNew', event)"/>
    <command id="cmd_editDraftMsg" oncommand="goDoCommand('cmd_editDraftMsg', event)"/>
    <command id="cmd_newMsgFromTemplate" oncommand="goDoCommand('cmd_newMsgFromTemplate', event)"/>
    <command id="cmd_editTemplateMsg" oncommand="goDoCommand('cmd_editTemplateMsg', event)"/>
    <command id="cmd_openMessage" oncommand="goDoCommand('cmd_openMessage')"/>
    <command id="cmd_openConversation" oncommand="goDoCommand('cmd_openConversation')"/>
    <command id="cmd_moveToFolderAgain" oncommand="goDoCommand('cmd_moveToFolderAgain')"/>
    <command id="cmd_createFilterFromMenu" oncommand="goDoCommand('cmd_createFilterFromMenu')"/>
    <command id="cmd_killThread" oncommand="goDoCommand('cmd_killThread')"/>
    <command id="cmd_killSubthread" oncommand="goDoCommand('cmd_killSubthread')"/>
    <command id="cmd_watchThread" oncommand="goDoCommand('cmd_watchThread')"/>
  </commandset>

  <commandset id="mailGetMsgMenuItems"
              commandupdater="true"
              events="create-menu-getMsgToolbar,create-menu-file"
              oncommandupdate="goUpdateMailMenuItems(this)">

      <command id="cmd_getMsgsForAuthAccounts"
               oncommand="goDoCommand('cmd_getMsgsForAuthAccounts'); event.stopPropagation()"
               disabled="true"/>
  </commandset>

  <commandset id="mailMarkMenuItems"
              commandupdater="true"
              events="create-menu-mark"
              oncommandupdate="goUpdateMailMenuItems(this)">
      <command id="cmd_mark"/>
      <command id="cmd_tag"/>
      <command id="cmd_toggleRead" oncommand="goDoCommand('cmd_toggleRead'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAsRead" oncommand="goDoCommand('cmd_markAsRead'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAsUnread" oncommand="goDoCommand('cmd_markAsUnread'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAllRead" oncommand="goDoCommand('cmd_markAllRead'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markThreadAsRead" oncommand="goDoCommand('cmd_markThreadAsRead'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markReadByDate" oncommand="goDoCommand('cmd_markReadByDate');" disabled="true"/>
      <command id="cmd_markAsFlagged" oncommand="goDoCommand('cmd_markAsFlagged'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAsJunk" oncommand="goDoCommand('cmd_markAsJunk'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAsNotJunk" oncommand="goDoCommand('cmd_markAsNotJunk'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_recalculateJunkScore" oncommand="goDoCommand('cmd_recalculateJunkScore');" disabled="true"/>
      <command id="cmd_viewAllHeader" oncommand="goDoCommand('cmd_viewAllHeader');" disabled="true"/>
      <command id="cmd_viewNormalHeader" oncommand="goDoCommand('cmd_viewNormalHeader');" disabled="true"/>
  </commandset>

  <commandset id="mailTagMenuItems"
              commandupdater="true"
              events="create-menu-tag"
              oncommandupdate="goUpdateMailMenuItems(this);">

      <command id="cmd_addTag" oncommand="goDoCommand('cmd_addTag'); event.stopPropagation();"/>
      <command id="cmd_manageTags" oncommand="goDoCommand('cmd_manageTags'); event.stopPropagation();"/>
      <command id="cmd_removeTags" oncommand="goDoCommand('cmd_removeTags'); event.stopPropagation();"/>
  </commandset>

  <commandset id="mailToolsMenuItems"
              commandupdater="true"
              events="create-menu-tasks"
              oncommandupdate="goUpdateMailMenuItems(this);">
    <command id="cmd_applyFilters" oncommand="goDoCommand('cmd_applyFilters');" disabled="true"/>
    <command id="cmd_applyFiltersToSelection"
             oncommand="goDoCommand('cmd_applyFiltersToSelection');"
             disabled="true"
             valueSelection="&filtersApplyToSelection.label;"
             valueSelectionAccessKey="&filtersApplyToSelection.accesskey;"
             valueMessage="&filtersApplyToMessage.label;"
             valueMessageAccessKey="&filtersApplyToMessage.accesskey;"/>
    <command id="cmd_runJunkControls" oncommand="goDoCommand('cmd_runJunkControls');" disabled="true"/>
    <command id="cmd_deleteJunk" oncommand="goDoCommand('cmd_deleteJunk');" disabled="true"/>
  </commandset>

  <commandset id="mailChatMenuItems"
              commandupdater="true"
              events="create-menu-tag">
       <command id="cmd_joinChat" oncommand="chatHandler.joinChat();" disabled="true"/>
       <command id="cmd_chatStatus" oncommand="chatHandler.setStatusMenupopupCommand(event);" disabled="true"/>
       <command id="cmd_addChatBuddy" oncommand="chatHandler.addBuddy();" disabled="true"/>
  </commandset>

    <commandset id="mailSearchMenuItems"/>
    <commandset id="attachmentCommands">
      <command id="cmd_openAllAttachments"
               oncommand="goDoCommand('cmd_openAllAttachments');"/>
      <command id="cmd_saveAllAttachments"
               oncommand="goDoCommand('cmd_saveAllAttachments');"/>
      <command id="cmd_detachAllAttachments"
               oncommand="goDoCommand('cmd_detachAllAttachments');"/>
      <command id="cmd_deleteAllAttachments"
               oncommand="goDoCommand('cmd_deleteAllAttachments');"/>
    </commandset>
    <commandset id="tasksCommands">
      <command id="cmd_newMessage" oncommand="goOpenNewMessage();"/>
      <command id="cmd_newCard" oncommand="openNewCardDialog()"/>
    </commandset>
    <commandset id="commandKeys"/>
    <command id="cmd_close" oncommand="window.close();"/>
  </commandset>

  <keyset id="mailKeys">
    <key keycode="VK_ESCAPE" oncommand="window.close();"/>


  <key id="space" key=" " modifiers="shift any" oncommand="goDoCommand('cmd_space', event);"/>

  <!-- File Menu -->
  <key id="key_close" key="&closeCmd.key;" command="cmd_close" modifiers="accel"/>
  <key id="key_close2" keycode="VK_F4" modifiers="accel" command="cmd_close"/>
  <key id="key_renameFolder" keycode="&renameFolder.key;" oncommand="goDoCommand('cmd_renameFolder')"/>
  <key id="key_quitApplication" data-l10n-id="quit-app-shortcut"
       modifiers="accel,shift"
       command="cmd_quitApplication"
       reserved="true"/>
  <!-- Edit Menu -->
  <key id="key_undo" data-l10n-id="text-action-undo-shortcut" modifiers="accel" internal="true"/>
  <key id="key_redo"
       data-l10n-id="text-action-redo-shortcut" modifiers="accel"
       internal="true"/>
  <key id="key_cut" data-l10n-id="text-action-cut-shortcut" modifiers="accel" internal="true"/>
  <key id="key_copy" data-l10n-id="text-action-copy-shortcut" modifiers="accel" internal="true"/>
  <key id="key_paste" data-l10n-id="text-action-paste-shortcut" modifiers="accel" internal="true"/>
  <key id="key_delete" keycode="VK_DELETE"
       oncommand="goDoCommand('cmd_delete');"/>
  <key id="cmd_shiftDelete" keycode="VK_DELETE"
       oncommand="goDoCommand('cmd_shiftDelete');" modifiers="shift"/>
  <key id="key_selectAll" data-l10n-id="text-action-select-all-shortcut" modifiers="accel" internal="true"/>
  <key id="key_selectThread" key="&selectThreadCmd.key;"             oncommand="goDoCommand('cmd_selectThread');" modifiers="accel, shift"/>

  <key id="key_toggleRead" key="&toggleReadCmd.key;"                 oncommand="goDoCommand('cmd_toggleRead');"/>
  <key id="key_toggleFlagged" key="&markStarredCmd.key;"             oncommand="goDoCommand('cmd_markAsFlagged');"/>
  <key id="key_markJunk" key="&markAsJunkCmd.key;"                   oncommand="goDoCommand('cmd_markAsJunk');"/>
  <key id="key_markNotJunk" key="&markAsNotJunkCmd.key;"             oncommand="goDoCommand('cmd_markAsNotJunk');"
       modifiers="shift"/>

  <key id="key_markAllRead" key="&markAllReadCmd.key;"
       oncommand="goDoCommand('cmd_markAllRead');" modifiers="shift"/>

  <key id="key_markThreadAsRead" key="&markThreadAsReadCmd.key;"     oncommand="goDoCommand('cmd_markThreadAsRead')"/>
  <key id="key_markReadByDate" key="&markReadByDateCmd.key;"         oncommand="goDoCommand('cmd_markReadByDate')"/>
  <key id="key_nextMsg" key="&nextMsgCmd.key;"                       oncommand="goDoCommand('cmd_nextMsg')"/>
  <key id="key_nextUnreadMsg" key="&nextUnreadMsgCmd.key;"           oncommand="goDoCommand('cmd_nextUnreadMsg')"/>
  <key id="key_expandAllThreads" key="&expandAllThreadsCmd.key;"     oncommand="goDoCommand('cmd_expandAllThreads')"/>
  <key key="&expandAllThreadsCmd.key;" modifiers="shift"             oncommand="goDoCommand('cmd_expandAllThreads')"/>
  <key id="key_collapseAllThreads" key="&collapseAllThreadsCmd.key;" oncommand="goDoCommand('cmd_collapseAllThreads')"/>
  <key key="&collapseAllThreadsCmd.key;" modifiers="shift"           oncommand="goDoCommand('cmd_collapseAllThreads')"/>
  <key id="key_nextUnreadThread" key="&nextUnreadThread.key;"        oncommand="goDoCommand('cmd_nextUnreadThread')"/>
  <key id="key_previousMsg" key="&prevMsgCmd.key;"                   oncommand="goDoCommand('cmd_previousMsg')"/>
  <key id="key_previousUnreadMsg" key="&prevUnreadMsgCmd.key;"       oncommand="goDoCommand('cmd_previousUnreadMsg')"/>
  <key id="key_archive" key="&archiveMsgCmd.key;"                    oncommand="goDoCommand('cmd_archive')"/>
  <key id="key_goForward" key="&goForwardCmd.commandKey;"            oncommand="goDoCommand('cmd_goForward')"/>
  <key id="key_goBack" key="&goBackCmd.commandKey;"                  oncommand="goDoCommand('cmd_goBack')"/>
  <key id="key_goStartPage" keycode="VK_HOME"                        oncommand="goDoCommand('cmd_goStartPage')" modifiers="alt"/>
  <key id="key_undoCloseTab" key="&undoCloseTabCmd.commandkey;"      oncommand="goDoCommand('cmd_undoCloseTab')" modifiers="accel, shift"/>
  <key id="key_reply" key="&replyMsgCmd.key;"                        oncommand="goDoCommand('cmd_reply')" modifiers="accel"/>
  <key id="key_replyall" key="&replyToAllMsgCmd.key;"                oncommand="goDoCommand('cmd_replyall')" modifiers="accel, shift"/>
  <key id="key_replylist" key="&replyToListMsgCmd.key;"              oncommand="goDoCommand('cmd_replylist')" modifiers="accel, shift"/>
  <key id="key_forward" key="&forwardMsgCmd.key;"                    oncommand="goDoCommand('cmd_forward')" modifiers="accel"/>
  <key id="key_editAsNew" key="&editAsNewMsgCmd.key;"                oncommand="goDoCommand('cmd_editAsNew')" modifiers="accel"/>
  <key id="key_newMsgFromTemplate" keycode="&newMsgFromTemplateCmd.keycode;" internal="true"/><!-- for display on menus only -->
  <key id="key_watchThread" key="&watchThreadMenu.key;"              oncommand="goDoCommand('cmd_watchThread')" />
  <key id="key_killThread" key="&killThreadMenu.key;"                oncommand="goDoCommand('cmd_killThread')" />
  <key id="key_killSubthread" key="&killSubthreadMenu.key;"          oncommand="goDoCommand('cmd_killSubthread')" modifiers="shift" />
  <key id="key_openMessage" key="&openMessageWindowCmd.key;"         oncommand="goDoCommand('cmd_openMessage')" modifiers="accel"/>
  <key id="key_openConversation" key="&openInConversationCmd.key;"   oncommand="goDoCommand('cmd_openConversation')" modifiers="accel, shift"/>
  <key id="key_moveToFolderAgain" key="&moveToFolderAgainCmd.key;"   oncommand="goDoCommand('cmd_moveToFolderAgain')" modifiers="accel, shift"/>
  <key id="key_print" key="&printCmd.key;"                           oncommand="goDoCommand('cmd_print')" modifiers="accel"/>
  <key id="key_saveAsFile" key="&saveAsFileCmd.key;"                 oncommand="goDoCommand('cmd_saveAsFile')" modifiers="accel"/>
  <key id="key_viewPageSource" key="&pageSourceCmd.key;"             oncommand="goDoCommand('cmd_viewPageSource')" modifiers="accel"/>
  <key id="key_getNewMessages" keycode="VK_F5"
       oncommand="goDoCommand('cmd_getNewMessages');"/>
  <key id="key_getAllNewMessages" keycode="VK_F5" modifiers="shift"
       oncommand="goDoCommand('cmd_getMsgsForAuthAccounts');"/>
  <key id="key_find" key="&findCmd.key;"  oncommand="goDoCommand('cmd_find')" modifiers="accel"/>
  <key id="key_findAgain" key="&findAgainCmd.key;"   oncommand="goDoCommand('cmd_findAgain')" modifiers="accel"/>
  <key id="key_findPrev"  key="&findPrevCmd.key;"    oncommand="goDoCommand('cmd_findPrevious')"  modifiers="accel, shift"/>
  <key keycode="&findAgainCmd.key2;"   oncommand="goDoCommand('cmd_findAgain')"/>
  <key keycode="&findPrevCmd.key2;"    oncommand="goDoCommand('cmd_findPrevious')"  modifiers="shift"/>
  <key id="key_quickSearchFocus" key="&quickSearchCmd.key;"  oncommand="QuickSearchFocus()" modifiers="accel"/>

  <keyset id="viewZoomKeys">
    <key id="key_fullZoomReduce"  key="&fullZoomReduceCmd.commandkey;"
         command="cmd_fullZoomReduce"  modifiers="accel"/>
    <key                          key="&fullZoomReduceCmd.commandkey2;"
         command="cmd_fullZoomReduce"  modifiers="accel"/>
    <key id="key_fullZoomEnlarge" key="&fullZoomEnlargeCmd.commandkey;"
         command="cmd_fullZoomEnlarge" modifiers="accel"/>
    <key                          key="&fullZoomEnlargeCmd.commandkey2;"
         command="cmd_fullZoomEnlarge" modifiers="accel"/>
    <key                          key="&fullZoomEnlargeCmd.commandkey3;"
         command="cmd_fullZoomEnlarge" modifiers="accel"/>
    <key id="key_fullZoomReset"   key="&fullZoomResetCmd.commandkey;"
         command="cmd_fullZoomReset"   modifiers="accel"/>
    <key                          key="&fullZoomResetCmd.commandkey2;"
         command="cmd_fullZoomReset"   modifiers="accel"/>
  </keyset>

  <!-- View Toggle Keys (F8) -->
  <key id="key_toggleMessagePane" keycode="VK_F8" oncommand="goDoCommand('cmd_toggleMessagePane');"/>

  <!-- Tag Keys -->
  <!-- Includes both shifted and not, for Azerty and other layouts where the
       numeric keys are shifted. -->
  <key id="key_tag0" key="&tagCmd0.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_removeTags');"/>
  <key id="key_tag1" key="&tagCmd1.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag1');"/>
  <key id="key_tag2" key="&tagCmd2.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag2');"/>
  <key id="key_tag3" key="&tagCmd3.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag3');"/>
  <key id="key_tag4" key="&tagCmd4.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag4');"/>
  <key id="key_tag5" key="&tagCmd5.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag5');"/>
  <key id="key_tag6" key="&tagCmd6.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag6');"/>
  <key id="key_tag7" key="&tagCmd7.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag7');"/>
  <key id="key_tag8" key="&tagCmd8.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag8');"/>
  <key id="key_tag9" key="&tagCmd9.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag9');"/>

  <!-- Tools Keys -->
  <key id="key_searchMail"
       key="&searchMailCmd.key;"
       modifiers="accel,shift"
       command="cmd_searchMessages"/>
  <key id="key_errorConsole"
       key="&errorConsoleCmd.commandkey;"
       oncommand="toJavaScriptConsole();"
       modifiers="accel,shift"/>
  <key id="key_devtoolsToolbox"
       key="&devToolboxCmd.commandkey;"
       modifiers="accel,shift"
       oncommand="BrowserToolboxLauncher.init();"/>
  <key id="key_sanitizeHistory"
       keycode="VK_DELETE"
       oncommand="toSanitize();"
       modifiers="accel,shift"/>
  <key id="key_addressbook"
       key="&addressBookCmd.key;"
       modifiers="accel, shift"
       oncommand="toAddressBook();"/>
  <key id="key_savedFiles"
       key="&savedFiles.key;"
       modifiers="accel"
       oncommand="openSavedFilesWnd();"/>

  <key id="key_qfb_show"
       modifiers="accel,shift"
       data-l10n-id="quick-filter-bar-show"
       command="cmd_showQuickFilterBar"/>

<key id="key_mail" oncommand="focusOnMail(0, event);" key="1" modifiers="accel"/>
<key id="key_selectTab2" oncommand="focusOnMail(1, event);" key="2" modifiers="accel"/>
<key id="key_selectTab3" oncommand="focusOnMail(2, event);" key="3" modifiers="accel"/>
<key id="key_selectTab4" oncommand="focusOnMail(3, event);" key="4" modifiers="accel"/>
<key id="key_selectTab5" oncommand="focusOnMail(4, event);" key="5" modifiers="accel"/>
<key id="key_selectTab6" oncommand="focusOnMail(5, event);" key="6" modifiers="accel"/>
<key id="key_selectTab7" oncommand="focusOnMail(6, event);" key="7" modifiers="accel"/>
<key id="key_selectTab8" oncommand="focusOnMail(7, event);" key="8" modifiers="accel"/>
<key id="key_selectLastTab" oncommand="focusOnMail(-1, event);" key="9" modifiers="accel"/>

  <key id="key_openHelp"
       oncommand="openSupportURL();"
       keycode="&productHelp.commandkey;"/>
    <keyset id="tasksKeys">
      <key id="key_newMessage"  key="&newMessageCmd.key;" command="cmd_newMessage"
           modifiers="accel"/>
      <key id="key_newMessage2" key="&newMessageCmd2.key;" command="cmd_newMessage"
           modifiers="accel"/>
    </keyset>
  </keyset>

  <popupset id="mainPopupSet">

  <menupopup id="browserContext"
             onpopupshowing="return browserContextOnShowing(event);"
             onpopuphiding="browserContextOnHiding(event);">
    <!-- Browser navigation -->
    <menugroup id="context-navigation">
        <menuitem id="browserContext-back"
                  data-l10n-id="content-tab-menu-back"
                  data-l10n-args='{"shortcut":""}'
                  class="menuitem-iconic"
                  command="Browser:Back"/>
        <menuitem id="browserContext-forward"
                  data-l10n-id="content-tab-menu-forward"
                  data-l10n-args='{"shortcut":""}'
                  class="menuitem-iconic"
                  command="Browser:Forward"/>
        <menuitem id="browserContext-reload"
                  class="menuitem-iconic"
                  tooltip="dynamic-shortcut-tooltip"
                  data-l10n-id="content-tab-menu-reload"
                  command="cmd_reload"/>
        <menuitem id="browserContext-stop"
                  class="menuitem-iconic"
                  tooltip="dynamic-shortcut-tooltip"
                  data-l10n-id="content-tab-menu-stop"
                  command="cmd_stop"/>
    </menugroup>
    <menuseparator id="browserContext-sep-navigation"/>
    <!-- Spellchecking suggestions -->
    <menuitem id="browserContext-spell-no-suggestions"
              disabled="true"
              data-l10n-id="text-action-spell-no-suggestions"/>
    <menuitem id="browserContext-spell-add-to-dictionary"
              data-l10n-id="text-action-spell-add-to-dictionary"
              oncommand="gSpellChecker.addToDictionary();"/>
    <menuitem id="browserContext-spell-undo-add-to-dictionary"
              data-l10n-id="text-action-spell-undo-add-to-dictionary"
              oncommand="gSpellChecker.undoAddToDictionary();" />
    <menuseparator id="browserContext-spell-suggestions-separator"/>

    <menuitem id="browserContext-openInBrowser"
              label="&openInBrowser.label;"
              accesskey="&openInBrowser.accesskey;"
              oncommand="gContextMenu.openInBrowser();"/>
    <menuitem id="browserContext-openLinkInBrowser"
              label="&openLinkInBrowser.label;"
              accesskey="&openLinkInBrowser.accesskey;"
              oncommand="gContextMenu.openLinkInBrowser();"/>
    <menuseparator id="browserContext-sep-open-browser"/>
    <menuitem id="browserContext-undo"
              label="&undoDefaultCmd.label;"
              accesskey="&undoDefaultCmd.accesskey;"
              command="cmd_undo"/>
    <menuseparator id="browserContext-sep-undo"/>
    <menuitem id="browserContext-cut"
              data-l10n-id="text-action-cut"
              command="cmd_copy"/>
    <menuitem id="browserContext-copy"
              data-l10n-id="text-action-copy"
              command="cmd_copy"/>
    <menuitem id="browserContext-paste"
              data-l10n-id="text-action-paste"
              command="cmd_paste"/>
    <menuitem id="browserContext-selectall"
              data-l10n-id="text-action-select-all"
              command="cmd_selectAll"/>
    <menuseparator id="browserContext-sep-clipboard"/>

    <menuitem id="browserContext-searchTheWeb"
              label="[glodaComplete.webSearch1.label]"
              oncommand="openWebSearch(event.target.value)"/>

    <!-- Spellchecking general menu items (enable, add dictionaries...) -->
    <menuseparator id="browserContext-spell-separator"/>
    <menuitem id="browserContext-spell-check-enabled"
              data-l10n-id="text-action-spell-check-toggle"
              type="checkbox"
              oncommand="gSpellChecker.toggleEnabled();"/>
    <menuitem id="browserContext-spell-add-dictionaries-main"
              label="&spellAddDictionaries.label;"
              accesskey="&spellAddDictionaries.accesskey;"
              oncommand="gContextMenu.addDictionaries();"/>
    <menu id="browserContext-spell-dictionaries"
          data-l10n-id="text-action-spell-dictionaries">
        <menupopup id="browserContext-spell-dictionaries-menu">
            <menuseparator id="browserContext-spell-language-separator"/>
            <menuitem id="browserContext-spell-add-dictionaries"
                      label="&spellAddDictionaries.label;"
                      accesskey="&spellAddDictionaries.accesskey;"
                      oncommand="gContextMenu.addDictionaries();"/>
        </menupopup>
    </menu>

    <menuitem id="browserContext-media-play"
              label="&contextPlay.label;"
              accesskey="&contextPlay.accesskey;"
              oncommand="gContextMenu.mediaCommand('play');"/>
    <menuitem id="browserContext-media-pause"
              label="&contextPause.label;"
              accesskey="&contextPause.accesskey;"
              oncommand="gContextMenu.mediaCommand('pause');"/>
    <menuitem id="browserContext-media-mute"
              label="&contextMute.label;"
              accesskey="&contextMute.accesskey;"
              oncommand="gContextMenu.mediaCommand('mute');"/>
    <menuitem id="browserContext-media-unmute"
              label="&contextUnmute.label;"
              accesskey="&contextUnmute.accesskey;"
              oncommand="gContextMenu.mediaCommand('unmute');"/>
    <menuseparator id="browserContext-sep-edit"/>
    <menuitem id="browserContext-copylink"
              label="&copyLinkCmd.label;"
              accesskey="&copyLinkCmd.accesskey;"
              command="cmd_copyLink"/>
    <menuitem id="browserContext-copyimage"
              label="&copyImageAllCmd.label;"
              accesskey="&copyImageAllCmd.accesskey;"
              command="cmd_copyImage"/>
    <menuitem id="browserContext-addemail"
              label="&AddToAddressBook.label;"
              accesskey="&AddToAddressBook.accesskey;"
              oncommand="addEmail(gContextMenu.linkURL);"/>
    <menuitem id="browserContext-composeemailto"
              label="&SendMessageTo.label;"
              accesskey="&SendMessageTo.accesskey;"
              oncommand="composeEmailTo(gContextMenu.linkURL);"/>
    <menuitem id="browserContext-copyemail"
              label="&copyEmailCmd.label;"
              accesskey="&copyEmailCmd.accesskey;"
              oncommand="gContextMenu.copyEmail();"/>
    <menuseparator id="browserContext-sep-copy"/>
    <menuitem id="browserContext-savelink"
              label="&saveLinkAsCmd.label;"
              accesskey="&saveLinkAsCmd.accesskey;"
              oncommand="gContextMenu.saveLink();"/>
    <menuitem id="browserContext-saveimage"
              label="&saveImageAsCmd.label;"
              accesskey="&saveImageAsCmd.accesskey;"
              oncommand="gContextMenu.saveImage();"/>
  </menupopup>
  <panel id="DateTimePickerPanel"
         type="arrow"
         orient="vertical"
         noautofocus="true"
         norolluponanchor="true"
         consumeoutsideclicks="never"
         level="top"
         tabspecific="true">
  </panel>

  <!-- For select dropdowns. The menupopup is what shows the list of options,
       and the popuponly menulist makes things like the menuactive attributes
       work correctly on the menupopup. ContentSelectDropdown expects the
       popuponly menulist to be its immediate parent. -->
  <menulist popuponly="true" id="ContentSelectDropdown" hidden="true">
    <menupopup rolluponmousewheel="true"
               activateontab="true" position="after_start"
               level="parent"
               consumeoutsideclicks="false" ignorekeys="shortcuts"
      />
  </menulist>

  <panel is="autocomplete-richlistbox-popup" id="PopupAutoComplete"
         type="autocomplete"
         role="group"
         noautofocus="true"/>

  <tooltip id="remoteBrowserTooltip"/>

<menupopup id="toolbar-context-menu"
           onpopupshowing="calendarOnToolbarsPopupShowing(event); ToolbarContextMenu.updateExtension(this);">
  <menuseparator id="customizeMailToolbarMenuSeparator"/>
  <menuitem id="CustomizeMailToolbar"
            command="cmd_CustomizeMailToolbar"
            label="&customizeToolbar.label;"
            accesskey="&customizeToolbar.accesskey;"/>
  <menuseparator id="extensionsMailToolbarMenuSeparator"/>
  <menuitem oncommand="ToolbarContextMenu.openAboutAddonsForContextAction(this.parentElement)"
            data-l10n-id="toolbar-context-menu-manage-extension"
            class="customize-context-manageExtension"/>
  <menuitem oncommand="ToolbarContextMenu.removeExtensionForContextAction(this.parentElement)"
            data-l10n-id="toolbar-context-menu-remove-extension"
            class="customize-context-removeExtension"/>
</menupopup>
<!-- The panelUI is for the appmenu. -->
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<panel id="appMenu-popup"
       class="cui-widget-panel panel-no-padding"
       role="group"
       type="arrow"
       hidden="true"
       flip="slide"
       position="bottomright topright"
       noautofocus="true">
  <panelmultiview id="appMenu-multiView"
                  mainViewId="appMenu-mainView"
                  viewCacheId="appMenu-viewCache">

    <!-- Main Appmenu View -->
    <panelview id="appMenu-mainView" class="PanelUI-subView">
      <vbox id="appMenu-mainViewItems"
            class="panel-subview-body">
        <vbox id="appMenu-addon-banners"/>
        <toolbarbutton class="panel-banner-item"
                       oncommand="PanelUI._onBannerItemSelected(event)"
                       hidden="true"/>
        <toolbarbutton id="appmenu_new"
                       data-l10n-id="appmenu-new-account-panel"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-newView', this)"/>
        <toolbarbutton id="appmenu_create"
                       data-l10n-id="appmenu-create-panel"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-createView', this)"/>
        <toolbarseparator id="appmenu_createPopupMenuSeparator"/>
        <toolbarbutton id="appmenu_open"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="appmenu-open-file-panel"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-openView', this)"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_View"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="appmenu-view-panel"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-viewView', this)"/>
        <toolbaritem id="appMenu-uiDensity-controls"
                     class="subviewbutton subviewbutton-iconic toolbaritem-combined-buttons"
                     closemenu="none">
          <html:img class="toolbarbutton-icon" src="" alt=""/>
          <label class="toolbarbutton-text" data-l10n-id="appmenu-mail-uidensity-value"/>
          <toolbarbutton id="appmenu_uiDensityCompact"
                         class="subviewbutton subviewbutton-iconic subviewbutton"
                         data-l10n-id="appmenu-uidensity-compact"
                         type="radio"
                         oncommand="PanelUI.setUIDensity(event);"/>
          <toolbarbutton id="appmenu_uiDensityNormal"
                         class="subviewbutton subviewbutton-iconic subviewbutton"
                         data-l10n-id="appmenu-uidensity-default"
                         type="radio"
                         oncommand="PanelUI.setUIDensity(event);"/>
          <toolbarbutton id="appmenu_uiDensityTouch"
                         class="subviewbutton subviewbutton-iconic subviewbutton"
                         data-l10n-id="appmenu-uidensity-relaxed"
                         type="radio"
                         oncommand="PanelUI.setUIDensity(event);"/>
        </toolbaritem>
        <toolbaritem id="appMenu-fontSize-controls"
                     class="subviewbutton subviewbutton-iconic toolbaritem-combined-buttons"
                     closemenu="none">
          <html:img class="toolbarbutton-icon" src="" alt=""/>
          <label class="toolbarbutton-text" data-l10n-id="appmenu-font-size-value"/>
          <toolbarbutton id="appMenu-fontSizeReduce-button"
                         class="subviewbutton subviewbutton-iconic"
                         oncommand="UIFontSize.reduceSize();"
                         data-l10n-id="appmenuitem-font-size-reduce"/>
          <toolbarbutton id="appMenu-fontSizeReset-button"
                         class="subviewbutton"
                         oncommand="UIFontSize.resetSize();"
                         tooltip="fontSizeReset"/>
          <toolbarbutton id="appMenu-fontSizeEnlarge-button"
                         class="subviewbutton subviewbutton-iconic"
                         oncommand="UIFontSize.increaseSize();"
                         data-l10n-id="appmenuitem-font-size-enlarge"/>
        </toolbaritem>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_preferences"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-settings"
                       oncommand="openOptionsDialog();"/>
        <toolbarbutton id="appmenu_accountmgr"
                       class="subviewbutton subviewbutton-iconic"
                       label="&accountManagerCmd2.label;"
                       oncommand="MsgAccountManager(null);"/>
        <toolbarbutton id="appmenu_addons"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-addons-and-themes"
                       oncommand="openAddonsMgr();"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_toolsMenu"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="appmenu-tools-panel"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-toolsView', this)"/>
        <toolbarbutton id="appmenu_help"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="menu-help-help-title"
                       closemenu="none"
                       oncommand="buildHelpMenu(); PanelUI.showSubView('appMenu-helpView', this)"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu-quit"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="menu-quit"
                       key="key_quitApplication"
                       command="cmd_quitApplication"/>
      </vbox>
    </panelview>
    <!-- New -->
    <panelview id="appMenu-newView"
               data-l10n-id="appmenu-new-account-panel-title"
               class="PanelUI-subView">
      <vbox id="appMenu-newViewItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_newCreateEmailAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-create-new-mail-account"
                       oncommand="openAccountProvisionerTab();"/>
        <toolbarbutton id="appmenu_newMailAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-mail-account"
                       oncommand="openAccountSetupTab();"/>
        <toolbarbutton id="appmenu_newAB"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="appmenu-newab-panel"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-newabView', this)"/>
        <toolbarbutton id="appmenu_newIMAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-chat-account"
                       oncommand="openIMAccountWizard();"/>
        <toolbarbutton id="appmenu_newFeedAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-feed"
                       oncommand="AddFeedAccount();"/>
        <toolbarbutton id="appmenu_newNewsgroupAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-newsgroup"
                       oncommand="openNewsgroupAccountWizard();"/>
      </vbox>
    </panelview>

    <!-- New AB -->
    <panelview id="appMenu-newabView"
               data-l10n-id="appmenu-newab-panel-title"
               class="PanelUI-subView">
      <vbox id="appMenu-newABItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_newABMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-addressbook"
                       oncommand="openNewABDialog();"/>
        <toolbarbutton id="appmenu_newCardDAVMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-carddav"
                       oncommand="openNewABDialog('CARDDAV');"/>
        <toolbarbutton id="appmenu_newLdapMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-ldap"
                       oncommand="openNewABDialog('LDAP');"/>
      </vbox>
    </panelview>

    <!-- Create -->
    <panelview id="appMenu-createView"
               data-l10n-id="appmenu-create-panel-title"
               class="PanelUI-subView">
      <vbox id="appMenu-createViewItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_newNewMsgCmd"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-create-message"
                       key = "key_newMessage2"
                       command="cmd_newMessage"/>
        <toolbarbutton id="appmenu_newCard"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-create-contact"
                       command="cmd_newCard"/>
      </vbox>
    </panelview>

    <!-- Open -->
    <panelview id="appMenu-openView"
               data-l10n-id="appmenu-open-file-panel-title"
               class="PanelUI-subView">
      <vbox id="appMenu-openViewItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_OpenMessageFileMenuitem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-open-message"
                       oncommand="MsgOpenFromFile();"/>
        <toolbarbutton id="appmenu_OpenCalendarFileMenuitem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-open-calendar"
                       oncommand="openLocalCalendar();"/>
      </vbox>
    </panelview>

    <!-- View / Toolbars -->
    <panelview id="appMenu-toolbarsView"
               title="&viewToolbarsMenu.label;"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_showStatusbar"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       label="&showTaskbarCmd.label;"
                       oncommand="goToggleToolbar('status-bar', 'menu_showTaskbar')"
                       closemenu="none"
                       checked="true"
                       observes="menu_showTaskbar"/>
        <toolbarseparator id="appmenu_toggleToolbarsSeparator"/>
        <toolbarbutton id="appmenu_toolbarLayout"
                       class="subviewbutton subviewbutton-iconic"
                       label="&appmenuToolbarLayout.label;"
                       command="cmd_CustomizeMailToolbar"/>
      </vbox>
    </panelview>

    <!-- View / Layout -->
    <panelview id="appMenu-preferencesLayoutView"
               title="&messagePaneLayoutStyle.label;"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_messagePaneClassic"
                       class="subviewbutton subviewbutton-iconic"
                       type="radio"
                       label="&messagePaneClassic.label;"
                       name="viewlayoutgroup"
                       command="cmd_viewClassicMailLayout"/>
        <toolbarbutton id="appmenu_messagePaneWide"
                       class="subviewbutton subviewbutton-iconic"
                       type="radio"
                       label="&messagePaneWide.label;"
                       name="viewlayoutgroup"
                       command="cmd_viewWideMailLayout"/>
        <toolbarbutton id="appmenu_messagePaneVertical"
                       class="subviewbutton subviewbutton-iconic"
                       type="radio"
                       label="&messagePaneVertical.label;"
                       name="viewlayoutgroup"
                       command="cmd_viewVerticalMailLayout"/>
        <toolbarseparator id="appmenu_viewMenuAfterPaneVerticalSeparator"/>
        <toolbarbutton id="appmenu_showFolderPane"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       closemenu="none"
                       label="&showFolderPaneCmd.label;"
                       command="cmd_toggleFolderPane"/>
        <toolbarbutton id="appmenu_toggleThreadPaneHeader"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       name="threadheader"
                       closemenu="none"
                       data-l10n-id="appmenuitem-toggle-thread-pane-header"
                       command="cmd_toggleThreadPaneHeader"/>
        <toolbarbutton id="appmenu_showMessage"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       closemenu="none"
                       label="&showMessageCmd.label;"
                       key="key_toggleMessagePane"
                       command="cmd_toggleMessagePane"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_calShowTodayPane-2"
                       class="subviewbutton subviewbutton-iconic"
                       label="&todaypane.showTodayPane.label;"
                       type="checkbox"
                       command="calendar_toggle_todaypane_command"/>
      </vbox>
    </panelview>

    <!-- View -->
    <panelview id="appMenu-viewView"
               class="PanelUI-subView"
               data-l10n-id="appmenu-view-panel-title">
      <vbox id="appMenu-viewViewItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_Toolbars"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       label="&viewToolbarsMenu.label;"
                       accesskey="&viewToolbarsMenu.accesskey;"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-toolbarsView', this)"/>
        <toolbarbutton id="appmenu_MessagePaneLayout"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       label="&messagePaneLayoutStyle.label;"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-preferencesLayoutView', this)"/>
        <toolbarbutton id="appmenu_FolderViews"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       label="&folderView.label;"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-foldersView', this)"/>
      </vbox>
    </panelview>

    <!-- View / Folders -->
    <panelview id="appMenu-foldersView"
               title="&folderView.label;"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_toggleFolderHeader"
                       class="subviewbutton subviewbutton-iconic"
                       name="paneheader"
                       value="toggle-header"
                       data-l10n-id="menu-view-folders-toggle-header"
                       type="checkbox"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarseparator id="appmenu_folderModesSeparator"/>
        <toolbarbutton id="appmenu_allFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="all"
                       data-l10n-id="show-all-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarbutton id="appmenu_smartFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="smart"
                       data-l10n-id="show-smart-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarbutton id="appmenu_unreadFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="unread"
                       data-l10n-id="show-unread-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarbutton id="appmenu_favoriteFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="favorite"
                       data-l10n-id="show-favorite-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarbutton id="appmenu_recentFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="recent"
                       data-l10n-id="show-recent-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_tagsFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="tags"
                       data-l10n-id="show-tags-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarseparator id="appmenu_compactPropertiesSeparator"/>
        <toolbarbutton id="appmenu_compactMode"
                       class="subviewbutton subviewbutton-iconic"
                       value="compact"
                       data-l10n-id="folder-toolbar-toggle-folder-compact-view"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderCompactMenuOnCommand(event)"/>
        <toolbarseparator id="appmenu_favoritePropertiesSeparator"/>
        <toolbarbutton id="appmenu_favoriteFolder"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       label="&menuFavoriteFolder.label;"
                       checked="false"
                       command="cmd_toggleFavoriteFolder"/>
        <toolbarbutton id="appmenu_properties"
                       class="subviewbutton subviewbutton-iconic"
                       command="cmd_properties"/>
      </vbox>
    </panelview>

    <!-- View / Messages / Tags -->
    <!-- Dynamically populated when shown. -->
    <panelview id="appMenu-viewMessagesTagsView"
               title="&viewTags.label;"
               class="PanelUI-subView"
               oncommand="ViewChangeByMenuitem(event.target);">
      <vbox class="panel-subview-body"/>
    </panelview>

    <!-- View / Messages / Custom Views -->
    <!-- Dynamically populated when shown. -->
    <panelview id="appMenu-viewMessagesCustomViewsView"
               title="&viewCustomViews.label;"
               class="PanelUI-subView"
               oncommand="ViewChangeByMenuitem(event.target);">
      <vbox class="panel-subview-body"/>
    </panelview>

    <!-- Tools -->
    <panelview id="appMenu-toolsView"
               data-l10n-id="appmenu-tools-panel-title"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_import"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-import"
                       oncommand="toImport();"/>
        <toolbarbutton id="appmenu_export"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-export"
                       oncommand="toExport();"/>
        <toolbarseparator id="importExportSeparator"/>
        <toolbarbutton id="appmenu_searchCmd"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-message-search"
                       key="key_searchMail"
                       command="cmd_searchMessages"/>
        <toolbarbutton id="appmenu_filtersCmd"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-message-filters"
                       oncommand="MsgFilters();"/>
        <toolbarbutton id="appmenu_manageKeysOpenPGP"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="openpgp-manage-keys-openpgp-cmd"
                       oncommand="openKeyManager()"/>
        <toolbarbutton id="appmenu_openSavedFilesWnd"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-download-manager"
                       key="key_savedFiles"
                       oncommand="openSavedFilesWnd();"/>
        <toolbarbutton id="appmenu_activityManager"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-activity-manager"
                       oncommand="openActivityMgr();"/>
        <toolbarseparator id="devToolsSeparator"/>
        <toolbarbutton id="appmenu_devtoolsToolbox"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-dev-tools"
                       key="key_devtoolsToolbox"
                       oncommand="BrowserToolboxLauncher.init();"/>
      </vbox>
    </panelview>

    <!-- Help -->
    <panelview id="appMenu-helpView"
               data-l10n-id="appmenu-help-panel-title"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_openHelp"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-get-help"
                       key="key_openHelp"
                       oncommand="openSupportURL();"/>
        <toolbarbutton id="appmenu_openTour"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-explore-features"
                       oncommand="openLinkText(event, 'tourURL');"/>
        <toolbarbutton id="appmenu_keyboardShortcuts"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-shortcuts"
                       oncommand="openLinkText(event, 'keyboardShortcutsURL');"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_getInvolved"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-get-involved"
                       oncommand="openLinkText(event, 'getInvolvedURL');"/>
        <toolbarbutton id="appmenu_makeDonation"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-donation"
                       oncommand="openLinkText(event, 'donateURL');"/>
        <toolbarbutton id="appmenu_submitFeedback"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-share-feedback"
                       oncommand="openLinkText(event, 'feedbackURL');"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_troubleshootMode"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-enter-troubleshoot-mode2"
                       oncommand="safeModeRestart();"/>
        <toolbarbutton id="appmenu_troubleshootingInfo"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-troubleshooting-info"
                       oncommand="openAboutSupport();"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_about"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-about-product"
                       oncommand="openAboutDialog();"/>
      </vbox>
    </panelview>
  </panelmultiview>
</panel>
  </popupset>

  <toolbox id="mail-toolbox"
           class="mail-toolbox"
           mode="full"
           defaultmode="full"
           labelalign="end"
           defaultlabelalign="end">
    <!-- Menu -->
    <toolbar is="customizable-toolbar" id="toolbar-menubar"
             class="chromeclass-menubar themeable-full"
             type="menubar"
             customizable="true"
             toolboxid="mail-toolbox"
             defaultset="menubar-items,spring"
             data-l10n-id="toolbar-context-menu-menu-bar"
             data-l10n-attrs="toolbarname"
             context="toolbar-context-menu"
             mode="icons"
             insertbefore="tabs-toolbar"
             prependmenuitem="true">
      <toolbaritem id="menubar-items" align="center">

<menubar id="mail-menubar">
    <!-- File -->
    <menu id="menu_File"
          label="&fileMenu.label;"
          accesskey="&fileMenu.accesskey;">
      <menupopup id="menu_FilePopup" onpopupshowing="file_init();">
      <menu id="menu_New"
            label="&newMenu.label;"
            accesskey="&newMenu.accesskey;">
        <menupopup id="menu_NewPopup" onpopupshowing="menu_new_init();">
          <menuitem id="menu_newNewMsgCmd" label="&newNewMsgCmd.label;"
                    accesskey="&newNewMsgCmd.accesskey;"
                    key="key_newMessage2"
                    command="cmd_newMessage"/>
          <menuitem id="menu_newFolder" label="&newFolderCmd.label;"
                    command="cmd_newFolder"
                    accesskey="&newFolderCmd.accesskey;"/>
          <menuitem id="menu_newVirtualFolder" label="&newVirtualFolderCmd.label;"
                    command="cmd_newVirtualFolder"
                    accesskey="&newVirtualFolderCmd.accesskey;"/>
          <menuseparator id="newAccountPopupMenuSeparator"/>
          <menuitem id="newCreateEmailAccountMenuItem"
                    label="&newCreateEmailAccountCmd.label;"
                    accesskey="&newCreateEmailAccountCmd.accesskey;"
                    oncommand="openAccountProvisionerTab();"/>
          <menuitem id="newMailAccountMenuItem"
                    label="&newExistingEmailAccountCmd.label;"
                    accesskey="&newExistingEmailAccountCmd.accesskey;"
                    oncommand="openAccountSetupTab();"/>
          <menuitem id="newIMAccountMenuItem"
                    label="&newIMAccountCmd.label;"
                    accesskey="&newIMAccountCmd.accesskey;"
                    oncommand="openIMAccountWizard();"/>
          <menuitem id="newFeedAccountMenuItem"
                    label="&newFeedAccountCmd.label;"
                    accesskey="&newFeedAccountCmd.accesskey;"
                    oncommand="AddFeedAccount();"/>
          <menuitem id="newNewsgroupAccountMenuItem"
                    data-l10n-id="file-new-newsgroup-account"
                    oncommand="openNewsgroupAccountWizard();"/>
          <menuseparator id="newPopupMenuSeparator"/>
          <menuitem id="menu_newCard"
                    label="&newContactCmd.label;"
                    accesskey="&newContactCmd.accesskey;"
                    command="cmd_newCard"/>
          <menuitem id="newIMContactMenuItem"
                    label="&newIMContactCmd.label;"
                    accesskey="&newIMContactCmd.accesskey;"
                    command="cmd_addChatBuddy"/>
        </menupopup>
      </menu>
      <menu id="menu_Open"
            mode="calendar"
            label="&openMenuCmd.label;"
            accesskey="&openMenuCmd.accesskey;">
        <menupopup id="menu_OpenPopup">
          <menuitem id="openMessageFileMenuitem"
                    label="&openMessageFileCmd.label;"
                    accesskey="&openMessageFileCmd.accesskey;"
                    oncommand="MsgOpenFromFile();"/>
        </menupopup>
      </menu>
      <menuitem id="menu_close"
                label="&closeCmd.label;"
                key="key_close"
                accesskey="&closeCmd.accesskey;"
                command="cmd_close"/>
      <menuseparator id="fileMenuAfterCloseSeparator"/>
      <menu id="menu_saveAs"
            label="&saveAsMenu.label;" accesskey="&saveAsMenu.accesskey;">
        <menupopup id="menu_SavePopup">
          <menuitem id="menu_saveAsFile"
                    data-l10n-id="menu-file-save-as-file"
                    key="key_saveAsFile"
                    command="cmd_saveAsFile"/>
          <menuitem id="menu_saveAsTemplate"
                    label="&saveAsTemplateCmd.label;"
                    accesskey="&saveAsTemplateCmd.accesskey;"
                    command="cmd_saveAsTemplate"/>
        </menupopup>
      </menu>
      <menuseparator id="fileMenuAfterSaveSeparator"/>
      <menu label="&getNewMsgForCmd.label;" accesskey="&getNewMsgForCmd.accesskey;"
            id="menu_getAllNewMsg"
            oncommand="MsgGetMessagesForAccount();">
        <menupopup is="folder-menupopup" id="menu_getAllNewMsgPopup"
                    expandFolders="false"
                    oncommand="MsgGetMessagesForAccount(event.target._folder); event.stopPropagation();">
          <menuitem id="menu_getnewmsgs_all_accounts"
                    label="&getAllNewMsgCmdPopupMenu.label;"
                    accesskey="&getAllNewMsgCmdPopupMenu.accesskey;"
                    key="key_getAllNewMessages"
                    command="cmd_getMsgsForAuthAccounts"/>
          <menuitem id="menu_getnewmsgs_current_account"
                    label="&getNewMsgCurrentAccountCmdPopupMenu.label;"
                    accesskey="&getNewMsgCurrentAccountCmdPopupMenu.accesskey;"
                    key="key_getNewMessages"
                    command="cmd_getNewMessages"/>
          <menuseparator/>
        </menupopup>
      </menu>
      <menuitem id="menu_getnextnmsg" label="&getNextNMsgCmd2.label;"
                accesskey="&getNextNMsgCmd2.accesskey;"
                command="cmd_getNextNMessages"/>
      <menuitem id="menu_sendunsentmsgs" label="&sendUnsentCmd.label;"
                accesskey="&sendUnsentCmd.accesskey;" command="cmd_sendUnsentMsgs"/>
      <menuitem id="menu_subscribe" label="&subscribeCmd.label;"
                accesskey="&subscribeCmd.accesskey;" command="cmd_subscribe"/>
      <menuseparator id="fileMenuAfterSubscribeSeparator"/>
      <menuitem id="menu_deleteFolder"
                data-l10n-id="menu-edit-delete-folder"
                command="cmd_deleteFolder"/>
      <menuitem id="menu_renameFolder" label="&renameFolder.label;"
              accesskey="&renameFolder.accesskey;"
              key="key_renameFolder"
              command="cmd_renameFolder"/>
      <menuitem id="menu_compactFolder"
                label="&compactFolders.label;"
                accesskey="&compactFolders.accesskey;"
                command="cmd_compactFolder"/>
      <menuitem id="menu_emptyTrash" label="&emptyTrashCmd.label;"
              accesskey="&emptyTrashCmd.accesskey;"
              command="cmd_emptyTrash"/>
      <menuseparator id="trashMenuSeparator"/>
      <menu id="offlineMenuItem" label="&offlineMenu.label;" accesskey="&offlineMenu.accesskey;">
        <menupopup id="menu_OfflinePopup">
          <menuitem id="goOfflineMenuItem" type="checkbox" label="&offlineGoOfflineCmd.label;"
                    accesskey="&offlineGoOfflineCmd.accesskey;" oncommand="MailOfflineMgr.toggleOfflineStatus();"/>
          <menuseparator id="offlineMenuAfterGoSeparator"/>
          <menuitem id="menu_synchronizeOffline"
                    label="&synchronizeOfflineCmd.label;"
                    accesskey="&synchronizeOfflineCmd.accesskey;"
                    command="cmd_synchronizeOffline"/>
          <menuitem id="menu_settingsOffline"
                    label="&settingsOfflineCmd2.label;"
                    accesskey="&settingsOfflineCmd2.accesskey;"
                    command="cmd_settingsOffline"/>
          <menuseparator id="offlineMenuAfterSettingsSeparator"/>
          <menuitem id="menu_downloadFlagged"
                    label="&downloadStarredCmd.label;"
                    accesskey="&downloadStarredCmd.accesskey;"
                    command="cmd_downloadFlagged"/>
          <menuitem id="menu_downloadSelected"
                    label="&downloadSelectedCmd.label;"
                    accesskey="&downloadSelectedCmd.accesskey;"
                    command="cmd_downloadSelected"/>
        </menupopup>
      </menu>
      <menuseparator id="fileMenuAfterOfflineSeparator"/>
      <menuitem id="printMenuItem"
                key="key_print"
                label="&printCmd.label;"
                accesskey="&printCmd.accesskey;"
                command="cmd_print"/>
      <menuseparator id="menu_FileQuitSeparator"/>
      <menuitem id="menu_FileQuitItem"
                data-l10n-id="menu-quit"
                key="key_quitApplication"
                command="cmd_quitApplication"/>
    </menupopup>
  </menu>

<!-- Edit -->
<menu id="menu_Edit"
      label="&editMenu.label;"
      accesskey="&editMenu.accesskey;"
      oncommand="CommandUpdate_UndoRedo();">
  <menupopup id="menu_EditPopup" onpopupshowing="InitEditMessagesMenu()">
    <menuitem id="menu_undo"
              label="&undoDefaultCmd.label;"
              accesskey="&undoDefaultCmd.accesskey;"
              key="key_undo"
              command="cmd_undo"/>
    <menuitem id="menu_redo"
              label="&redoDefaultCmd.label;"
              accesskey="&redoDefaultCmd.accesskey;"
              key="key_redo"
              command="cmd_redo"/>
    <menuseparator id="editMenuAfterRedoSeparator"/>
    <menuitem id="menu_cut"
              data-l10n-id="text-action-cut"
              key="key_cut"
              command="cmd_cut"/>
    <menuitem id="menu_copy"
              data-l10n-id="text-action-copy"
              key="key_copy"
              command="cmd_copy"/>
    <menuitem id="menu_paste"
              data-l10n-id="text-action-paste"
              key="key_paste"
              command="cmd_paste"/>
    <menuitem id="menu_delete"
              key="key_delete"
              command="cmd_delete"/>
    <menuseparator id="editMenuAfterDeleteSeparator"/>
    <menu id="menu_select" label="&selectMenu.label;" accesskey="&selectMenu.accesskey;">
      <menupopup id="menu_SelectPopup">
        <menuitem id="menu_SelectAll" label="&all.label;"
                  accesskey="&all.accesskey;" key="key_selectAll"
                  command="cmd_selectAll"/>
        <menuseparator id="selectMenuSeparator"/>
        <menuitem id="menu_selectThread" label="&selectThreadCmd.label;"
                  accesskey="&selectThreadCmd.accesskey;"
                  key="key_selectThread"
                  command="cmd_selectThread"/>
        <menuitem id="menu_selectFlagged"
                  label="&selectFlaggedCmd.label;"
                  accesskey="&selectFlaggedCmd.accesskey;"
                  command="cmd_selectFlagged"/>
      </menupopup>
    </menu>
    <menuseparator id="editMenuAfterSelectSeparator"/>
    <menu id="menu_find"
          label="&findMenu.label;" accesskey="&findMenu.accesskey;">
      <menupopup id="menu_FindPopup"
                  onpopupshowing="initSearchMessagesMenu()">
        <menuitem id="menu_findCmd"
                  label="&findCmd.label;"
                  key="key_find"
                  accesskey="&findCmd.accesskey;"
                  command="cmd_find"/>
        <menuitem id="menu_findAgainCmd"
                  label="&findAgainCmd.label;"
                  key="key_findAgain"
                  accesskey="&findAgainCmd.accesskey;"
                  command="cmd_findAgain"/>
        <menuseparator id="editMenuAfterFindSeparator"/>
        <menuitem id="searchMailCmd" label="&searchMailCmd.label;"
                  key="key_searchMail"
                  accesskey="&searchMailCmd.accesskey;"
                  command="cmd_searchMessages"/>
        <menuitem id="glodaSearchCmd"
                  label="&glodaSearchCmd.label;"
                  accesskey="&glodaSearchCmd.accesskey;"
                  oncommand="openGlodaSearchTab()"/>
        <menuitem id="searchAddressesCmd" label="&searchAddressesCmd.label;"
                  accesskey="&searchAddressesCmd.accesskey;"
                  oncommand="MsgSearchAddresses()"/>
      </menupopup>
    </menu>
    <menuseparator id="editPropertiesSeparator"/>
    <menuitem id="menu_favoriteFolder"
              type="checkbox"
              label="&menuFavoriteFolder.label;"
              accesskey="&menuFavoriteFolder.accesskey;"
              checked="false"
              command="cmd_toggleFavoriteFolder"/>
    <menuitem id="menu_properties"
              command="cmd_properties"/>
  </menupopup>
</menu>

<!-- View -->
<menu id="menu_View"
      label="&viewMenu.label;"
      accesskey="&viewMenu.accesskey;">
  <menupopup id="menu_View_Popup" onpopupshowing="view_init(event);">
    <menu id="menu_Toolbars"
          label="&viewToolbarsMenu.label;"
          accesskey="&viewToolbarsMenu.accesskey;"
          onpopupshowing="calendarOnToolbarsPopupShowing(event);">
      <menupopup id="view_toolbars_popup">
        <menuitem id="menu_showTaskbar"
                  type="checkbox"
                  label="&showTaskbarCmd.label;"
                  accesskey="&showTaskbarCmd.accesskey;"
                  oncommand="goToggleToolbar('status-bar', 'menu_showTaskbar')"
                  checked="true"/>
        <menuseparator id="viewMenuBeforeCustomizeMailToolbarsSeparator"/>
        <menuitem id="customizeMailToolbars"
                  command="cmd_CustomizeMailToolbar"
                  label="&customizeToolbar.label;"
                  accesskey="&customizeToolbar.accesskey;"/>
      </menupopup>
    </menu>
    <menu id="menu_MessagePaneLayout" label="&messagePaneLayoutStyle.label;" accesskey="&messagePaneLayoutStyle.accesskey;">
      <menupopup id="view_layout_popup" onpopupshowing="InitViewLayoutStyleMenu(event)">
        <menuitem id="messagePaneClassic" type="radio" label="&messagePaneClassic.label;" name="viewlayoutgroup"
                  accesskey="&messagePaneClassic.accesskey;" command="cmd_viewClassicMailLayout"/>
        <menuitem id="messagePaneWide" type="radio" label="&messagePaneWide.label;" name="viewlayoutgroup"
                  accesskey="&messagePaneWide.accesskey;" command="cmd_viewWideMailLayout"/>
        <menuitem id="messagePaneVertical" type="radio" label="&messagePaneVertical.label;" name="viewlayoutgroup"
                  accesskey="&messagePaneVertical.accesskey;" command="cmd_viewVerticalMailLayout"/>
        <menuseparator id="viewMenuAfterPaneVerticalSeparator"/>
        <menuitem id="menu_showFolderPane" type="checkbox" label="&showFolderPaneCmd.label;"
                  accesskey="&showFolderPaneCmd.accesskey;" command="cmd_toggleFolderPane"/>
        <menuitem id="menu_toggleThreadPaneHeader"
                  type="checkbox"
                  name="threadheader"
                  data-l10n-id="menu-view-toggle-thread-pane-header"
                  command="cmd_toggleThreadPaneHeader"/>
        <menuitem id="menu_showMessage" type="checkbox" label="&showMessageCmd.label;" key="key_toggleMessagePane"
                  accesskey="&showMessageCmd.accesskey;" command="cmd_toggleMessagePane"/>
      </menupopup>
    </menu>
    <menu id="menu_FolderViews" label="&folderView.label;" accesskey="&folderView.accesskey;">
      <menupopup id="menu_FolderViewsPopup"
                  onpopupshowing="PanelUI._onFoldersViewShow(event)">
        <menuitem id="menu_toggleFolderHeader"
                  name="paneheader"
                  value="toggle-header"
                  data-l10n-id="menu-view-folders-toggle-header"
                  type="checkbox"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuseparator id="folderViewsHeaderSeparator"/>
        <menuitem id="menu_allFolders" value="all"
                  data-l10n-id="show-all-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuitem id="menu_smartFolders" value="smart"
                  data-l10n-id="show-smart-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuitem id="menu_unreadFolders" value="unread"
                  data-l10n-id="show-unread-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuitem id="menu_favoriteFolders" value="favorite"
                  data-l10n-id="show-favorite-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuitem id="menu_recentFolders" value="recent"
                  data-l10n-id="show-recent-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuseparator/>
        <menuitem id="menu_tags" value="tags"
                  data-l10n-id="show-tags-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuseparator/>
        <menuitem id="menu_compactMode" value="compact"
                  data-l10n-id="folder-toolbar-toggle-folder-compact-view"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderCompactMenuOnCommand(event);"/>
      </menupopup>
    </menu>
    <menuseparator id="viewUIZoomMenuSeparator"/>
    <menu id="menu_uiDensity"
          data-l10n-id="mail-uidensity-label">
      <menupopup id="view_density_popup" onpopupshowing="initUiDensityMenu(event);">
        <menuitem id="uiDensityCompact"
                  data-l10n-id="mail-uidensity-compact"
                  type="radio"
                  name="uidensity"
                  closemenu="none"
                  oncommand="UIDensity.setMode(this.mode);"/>
        <menuitem id="uiDensityNormal"
                  data-l10n-id="mail-uidensity-default"
                  type="radio"
                  name="uidensity"
                  closemenu="none"
                  oncommand="UIDensity.setMode(this.mode);"/>
        <menuitem id="uiDensityTouch"
                  data-l10n-id="mail-uidensity-relaxed"
                  type="radio"
                  name="uidensity"
                  closemenu="none"
                  oncommand="UIDensity.setMode(this.mode);"/>
      </menupopup>
    </menu>
    <menu id="viewFullZoomMenu" label="&fullZoom.label;" accesskey="&fullZoom.accesskey;"
              onpopupshowing="UpdateFullZoomMenu()">
          <menupopup id="viewFullZoomPopupMenu">
            <menuitem id="menu_fullZoomEnlarge" key="key_fullZoomEnlarge"
                      label="&fullZoomEnlargeCmd.label;"
                      accesskey="&fullZoomEnlargeCmd.accesskey;"
                      command="cmd_fullZoomEnlarge"/>
            <menuitem id="menu_fullZoomReduce" key="key_fullZoomReduce"
                      label="&fullZoomReduceCmd.label;"
                      accesskey="&fullZoomReduceCmd.accesskey;"
                      command="cmd_fullZoomReduce"/>
            <menuseparator id="fullZoomAfterReduceSeparator"/>
            <menuitem id="menu_fullZoomReset" key="key_fullZoomReset"
                      label="&fullZoomResetCmd.label;"
                      accesskey="&fullZoomResetCmd.accesskey;"
                      command="cmd_fullZoomReset"/>
            <menuseparator id="fullZoomAfterResetSeparator"/>
            <menuitem id="menu_fullZoomToggle" label="&fullZoomToggleCmd.label;"
                      accesskey="&fullZoomToggleCmd.accesskey;"
                      type="checkbox" command="cmd_fullZoomToggle" checked="false"/>
          </menupopup>
        </menu>
        <menu id="menu_uiFontSize"
              data-l10n-id="menu-font-size-label">
          <menupopup id="view_font_size_popup">
            <menuitem id="menu_fontSizeEnlarge"
                      data-l10n-id="menuitem-font-size-enlarge"
                      oncommand="UIFontSize.increaseSize();"
                      closemenu="none"/>
            <menuitem id="menu_fontSizeReduce"
                      data-l10n-id="menuitem-font-size-reduce"
                      oncommand="UIFontSize.reduceSize();"
                      closemenu="none"/>
            <menuseparator id="fontSizeAfterReduceSeparator"/>
            <menuitem id="menu_fontSizeReset"
                      data-l10n-id="menuitem-font-size-reset"
                      oncommand="UIFontSize.resetSize();"
                      closemenu="none"/>
          </menupopup>
        </menu>


    <menuseparator id="viewSortMenuSeparator"/>
    <menu id="viewSortMenu" accesskey="&sortMenu.accesskey;" label="&sortMenu.label;">
      <menupopup id="menu_viewSortPopup" oncommand="goDoCommand('cmd_sort', event);" onpopupshowing="InitViewSortByMenu()">
        <menuitem id="sortByDateMenuitem"
                  type="radio"
                  name="sortby"
                  value="byDate"
                  label="&sortByDateCmd.label;"
                  accesskey="&sortByDateCmd.accesskey;"/>
        <menuitem id="sortByReceivedMenuitem"
                  type="radio"
                  name="sortby"
                  value="byReceived"
                  label="&sortByReceivedCmd.label;"
                  accesskey="&sortByReceivedCmd.accesskey;"/>
        <menuitem id="sortByFlagMenuitem"
                  type="radio"
                  name="sortby"
                  value="byFlagged"
                  label="&sortByStarCmd.label;"
                  accesskey="&sortByStarCmd.accesskey;"/>
        <menuitem id="sortByOrderReceivedMenuitem"
                  type="radio"
                  name="sortby"
                  value="byId"
                  label="&sortByOrderReceivedCmd.label;"
                  accesskey="&sortByOrderReceivedCmd.accesskey;"/>
        <menuitem id="sortByPriorityMenuitem"
                  type="radio"
                  name="sortby"
                  value="byPriority"
                  label="&sortByPriorityCmd.label;"
                  accesskey="&sortByPriorityCmd.accesskey;"/>
        <menuitem id="sortByFromMenuitem"
                  type="radio"
                  name="sortby"
                  value="byAuthor"
                  label="&sortByFromCmd.label;"
                  accesskey="&sortByFromCmd.accesskey;"/>
        <menuitem id="sortByRecipientMenuitem"
                  type="radio"
                  name="sortby"
                  value="byRecipient"
                  label="&sortByRecipientCmd.label;"
                  accesskey="&sortByRecipientCmd.accesskey;"/>
        <menuitem id="sortByCorrespondentMenuitem"
                  type="radio"
                  name="sortby"
                  value="byCorrespondent"
                  label="&sortByCorrespondentCmd.label;"
                  accesskey="&sortByCorrespondentCmd.accesskey;"/>
        <menuitem id="sortBySizeMenuitem"
                  type="radio"
                  name="sortby"
                  value="bySize"
                  label="&sortBySizeCmd.label;"
                  accesskey="&sortBySizeCmd.accesskey;"/>
        <menuitem id="sortByStatusMenuitem"
                  type="radio"
                  name="sortby"
                  value="byStatus"
                  label="&sortByStatusCmd.label;"
                  accesskey="&sortByStatusCmd.accesskey;"/>
        <menuitem id="sortBySubjectMenuitem"
                  type="radio"
                  name="sortby"
                  value="bySubject"
                  label="&sortBySubjectCmd.label;"
                  accesskey="&sortBySubjectCmd.accesskey;"/>
        <menuitem id="sortByUnreadMenuitem"
                  type="radio"
                  name="sortby"
                  value="byUnread"
                  label="&sortByUnreadCmd.label;"
                  accesskey="&sortByUnreadCmd.accesskey;"/>
        <menuitem id="sortByTagsMenuitem"
                  type="radio"
                  name="sortby"
                  value="byTags"
                  label="&sortByTagsCmd.label;"
                  accesskey="&sortByTagsCmd.accesskey;"/>
        <menuitem id="sortByJunkStatusMenuitem"
                  type="radio"
                  name="sortby"
                  value="byJunkStatus"
                  label="&sortByJunkStatusCmd.label;"
                  accesskey="&sortByJunkStatusCmd.accesskey;"/>
        <menuitem id="sortByAttachmentsMenuitem"
                  type="radio"
                  name="sortby"
                  value="byAttachments"
                  label="&sortByAttachmentsCmd.label;"
                  accesskey="&sortByAttachmentsCmd.accesskey;"/>
        <menuseparator id="sortAfterAttachmentSeparator"/>
        <menuitem id="sortAscending"
                  type="radio"
                  name="sortdirection"
                  value="ascending"
                  label="&sortAscending.label;"
                  accesskey="&sortAscending.accesskey;"/>
        <menuitem id="sortDescending"
                  type="radio"
                  name="sortdirection"
                  value="descending"
                  label="&sortDescending.label;"
                  accesskey="&sortDescending.accesskey;"/>
        <menuseparator id="sortAfterDescendingSeparator"/>
        <menuitem id="sortThreaded"
                  type="radio"
                  name="threaded"
                  value="threaded"
                  label="&sortThreaded.label;"
                  accesskey="&sortThreaded.accesskey;"/>
        <menuitem id="sortUnthreaded"
                  type="radio"
                  name="threaded"
                  value="unthreaded"
                  label="&sortUnthreaded.label;"
                  accesskey="&sortUnthreaded.accesskey;"/>
        <menuitem id="groupBySort"
                  type="checkbox"
                  name="group"
                  value="group"
                  label="&groupBySort.label;"
                  accesskey="&groupBySort.accesskey;"/>
      </menupopup>
    </menu>
    <menu id="viewMessageViewMenu" label="&msgsMenu.label;" accesskey="&msgsMenu.accesskey;"
          command="mailHideMenus" oncommand="ViewChangeByMenuitem(event.target);">
        <menupopup id="viewMessagePopup" onpopupshowing="RefreshViewPopup(this);">
          <menuitem id="viewMessageAll"    value="0" type="radio" label="&viewAll.label;" accesskey="&viewAll.accesskey;"/>
          <menuitem id="viewMessageUnread" value="1" type="radio" label="&viewUnread.label;" accesskey="&viewUnread.accesskey;"/>
          <menuitem id="viewMessageNotDeleted" value="3" type="radio" label="&viewNotDeleted.label;" accesskey="&viewNotDeleted.accesskey;"/>
          <menuseparator id="messageViewAfterUnreadSeparator"/>
          <menu id="viewMessageTags" label="&viewTags.label;" accesskey="&viewTags.accesskey;">
            <menupopup id="viewMessageTagsPopup" onpopupshowing="RefreshTagsPopup(this);"/>
          </menu>
          <menu id="viewMessageCustomViews" label="&viewCustomViews.label;" accesskey="&viewCustomViews.accesskey;">
            <menupopup id="viewMessageCustomViewsPopup" onpopupshowing="RefreshCustomViewsPopup(this);"/>
          </menu>
          <menuseparator id="messageViewAfterCustomSeparator"/>
          <menuitem id="viewMessageVirtualFolder" value="7" label="&viewVirtualFolder.label;" accesskey="&viewVirtualFolder.accesskey;"/>
          <menuitem id="viewMessageCustomize"     value="8" label="&viewCustomizeView.label;" accesskey="&viewCustomizeView.accesskey;"/>
        </menupopup>
      </menu>

      <menu label="&threads.label;" id="viewMessagesMenu" accesskey="&threads.accesskey;">
        <menupopup id="menu_ThreadsPopup" onpopupshowing="InitViewMessagesMenu()">
          <menuitem id="viewAllMessagesMenuItem" type="radio" name="viewmessages" label="&allMsgsCmd.label;" accesskey="&allMsgsCmd.accesskey;" disabled="true" command="cmd_viewAllMsgs"/>
          <menuitem id="viewUnreadMessagesMenuItem" type="radio" name="viewmessages" label="&unreadMsgsCmd.label;" accesskey="&unreadMsgsCmd.accesskey;" disabled="true" command="cmd_viewUnreadMsgs"/>
          <menuitem id="viewThreadsWithUnreadMenuItem" type="radio" name="viewmessages" label="&threadsWithUnreadCmd.label;" accesskey="&threadsWithUnreadCmd.accesskey;" disabled="true" command="cmd_viewThreadsWithUnread"/>
          <menuitem id="viewWatchedThreadsWithUnreadMenuItem" type="radio" name="viewmessages" label="&watchedThreadsWithUnreadCmd.label;" accesskey="&watchedThreadsWithUnreadCmd.accesskey;" disabled="true" command="cmd_viewWatchedThreadsWithUnread"/>
          <menuseparator id="threadsAfterWatchedSeparator"/>
          <menuitem id="viewIgnoredThreadsMenuItem" type="checkbox" label="&ignoredThreadsCmd.label;" disabled="true" command="cmd_viewIgnoredThreads" accesskey="&ignoredThreadsCmd.accesskey;"/>
          <menuseparator id="threadsAfterIgnoredSeparator"/>
          <menuitem id="menu_expandAllThreads" label="&expandAllThreadsCmd.label;" accesskey="&expandAllThreadsCmd.accesskey;" key="key_expandAllThreads" disabled="true" command="cmd_expandAllThreads"/>
          <menuitem id="collapseAllThreads" label="&collapseAllThreadsCmd.label;" accesskey="&collapseAllThreadsCmd.accesskey;" key="key_collapseAllThreads" disabled="true" command="cmd_collapseAllThreads"/>
        </menupopup>
      </menu>
      <menuseparator id="viewAfterThreadsSeparator"/>
      <menu id="viewheadersmenu" label="&headersMenu.label;" accesskey="&headersMenu.accesskey;">
        <menupopup id="menu_HeadersPopup" onpopupshowing="InitViewHeadersMenu();">
          <menuitem id="viewallheaders"
            type="radio"
            name="viewheadergroup"
            label="&headersAllCmd.label;"
            accesskey="&headersAllCmd.accesskey;"
            command="cmd_viewAllHeader"/>
          <menuitem id="viewnormalheaders"
            type="radio"
            name="viewheadergroup"
            label="&headersNormalCmd.label;"
            accesskey="&headersNormalCmd.accesskey;"
            command="cmd_viewNormalHeader"/>
        </menupopup>
      </menu>
      <menu id="viewBodyMenu" accesskey="&bodyMenu.accesskey;" label="&bodyMenu.label;">
        <menupopup id="viewBodyPopMenu" onpopupshowing="InitViewBodyMenu()">
          <menuitem id="bodyAllowHTML" type="radio" name="bodyPlaintextVsHTMLPref" label="&bodyAllowHTML.label;"
                    accesskey="&bodyAllowHTML.accesskey;" oncommand="MsgBodyAllowHTML()"/>
          <menuitem id="bodySanitized" type="radio" name="bodyPlaintextVsHTMLPref" label="&bodySanitized.label;"
                    accesskey="&bodySanitized.accesskey;"
                    oncommand="MsgBodySanitized()"/>
          <menuitem id="bodyAsPlaintext" type="radio" name="bodyPlaintextVsHTMLPref" label="&bodyAsPlaintext.label;"
                    accesskey="&bodyAsPlaintext.accesskey;" oncommand="MsgBodyAsPlaintext()"/>
          <menuitem id="bodyAllParts" type="radio" name="bodyPlaintextVsHTMLPref" label="&bodyAllParts.label;"
                    accesskey="&bodyAllParts.accesskey;" oncommand="MsgBodyAllParts()"/>
        </menupopup>
      </menu>
      <menu id="viewFeedSummary"
            label="&bodyMenuFeed.label;"
            accesskey="&bodyMenuFeed.accesskey;">
        <menupopup id="viewFeedSummaryPopupMenu"
                    onpopupshowing="InitViewBodyMenu()">
          <menuitem id="bodyFeedGlobalWebPage"
                    type="radio"
                    name="viewFeedSummaryGroup"
                    label="&viewFeedWebPage.label;"
                    accesskey="&viewFeedWebPage.accesskey;"
                    oncommand="FeedMessageHandler.onSelectPref = 0"/>
          <menuitem id="bodyFeedGlobalSummary"
                    type="radio"
                    name="viewFeedSummaryGroup"
                    label="&viewFeedSummary.label;"
                    accesskey="&viewFeedSummary.accesskey;"
                    oncommand="FeedMessageHandler.onSelectPref = 1"/>
          <menuitem id="bodyFeedPerFolderPref"
                    type="radio"
                    name="viewFeedSummaryGroup"
                    label="&viewFeedSummaryFeedPropsPref.label;"
                    accesskey="&viewFeedSummaryFeedPropsPref.accesskey;"
                    oncommand="FeedMessageHandler.onSelectPref = 2"/>
          <menuseparator id="viewFeedSummarySeparator"/>
          <menuitem id="bodyFeedSummaryAllowHTML"
                    type="radio"
                    name="viewFeedBodyHTMLGroup"
                    label="&bodyAllowHTML.label;"
                    accesskey="&bodyAllowHTML.accesskey;"
                    oncommand="MsgFeedBodyRenderPrefs(false, 0, 0)"/>
          <menuitem id="bodyFeedSummarySanitized"
                    type="radio"
                    name="viewFeedBodyHTMLGroup"
                    label="&bodySanitized.label;"
                    accesskey="&bodySanitized.accesskey;"
                    oncommand="MsgFeedBodyRenderPrefs(false, 3, gDisallow_classes_no_html)"/>
          <menuitem id="bodyFeedSummaryAsPlaintext"
                    type="radio"
                    name="viewFeedBodyHTMLGroup"
                    label="&bodyAsPlaintext.label;"
                    accesskey="&bodyAsPlaintext.accesskey;"
                    oncommand="MsgFeedBodyRenderPrefs(true, 1, gDisallow_classes_no_html)"/>
        </menupopup>
      </menu>
      <menuitem id="viewAttachmentsInlineMenuitem" label="&viewAttachmentsInlineCmd.label;" accesskey="&viewAttachmentsInlineCmd.accesskey;"
        oncommand="ToggleInlineAttachment(event.target)" type="checkbox" checked="true"/>
      <menuseparator id="viewAfterAttachmentsSeparator"/>
      <menuitem id="pageSourceMenuItem"
                label="&pageSourceCmd.label;"
                key="key_viewPageSource"
                accesskey="&pageSourceCmd.accesskey;"
                command="cmd_viewPageSource"/>
    </menupopup>
    </menu>

    <!-- Go -->
    <menu id="menu_Go" label="&goMenu.label;" accesskey="&goMenu.accesskey;">
      <menupopup id="menu_GoPopup" onpopupshowing="InitGoMessagesMenu();">
      <menu id="goNextMenu" label="&nextMenu.label;" accesskey="&nextMenu.accesskey;">
        <menupopup id="menu_GoNextPopup">
          <menuitem id="menu_nextMsg"
                    label="&nextMsgCmd.label;"
                    accesskey="&nextMsgCmd.accesskey;"
                    command="cmd_nextMsg"
                    key="key_nextMsg"/>
          <menuitem id="menu_nextUnreadMsg"
                    label="&nextUnreadMsgCmd.label;"
                    accesskey="&nextUnreadMsgCmd.accesskey;"
                    command="cmd_nextUnreadMsg"
                    key="key_nextUnreadMsg"/>
          <menuitem id="menu_nextFlaggedMsg"
                    label="&nextStarredMsgCmd.label;"
                    accesskey="&nextStarredMsgCmd.accesskey;"
                    command="cmd_nextFlaggedMsg"/>
          <menuseparator id="goNextAfterFlaggedSeparator"/>
          <menuitem id="menu_nextUnreadThread"
                    label="&nextUnreadThread.label;"
                    accesskey="&nextUnreadThread.accesskey;"
                    command="cmd_nextUnreadThread"
                    key="key_nextUnreadThread"/>
        </menupopup>
      </menu>
      <menu id="goPreviousMenu" label="&prevMenu.label;" accesskey="&prevMenu.accesskey;">
        <menupopup id="menu_GoPreviousPopup">
          <menuitem id="menu_prevMsg"
                    label="&prevMsgCmd.label;"
                    accesskey="&prevMsgCmd.accesskey;"
                    command="cmd_previousMsg"
                    key="key_previousMsg"/>
          <menuitem id="menu_prevUnreadMsg"
                    label="&prevUnreadMsgCmd.label;"
                    accesskey="&prevUnreadMsgCmd.accesskey;"
                    command="cmd_previousUnreadMsg"
                    key="key_previousUnreadMsg"/>
          <menuitem id="menu_prevFlaggedMsg"
                    label="&prevStarredMsgCmd.label;"
                    accesskey="&prevStarredMsgCmd.accesskey;"
                    command="cmd_previousFlaggedMsg"/>
        </menupopup>
      </menu>
      <menuitem id="menu_goForward" label="&goForwardCmd.label;"
                accesskey="&goForwardCmd.accesskey;" command="cmd_goForward"
                key="key_goForward"/>
      <menuitem id="menu_goBack" label="&goBackCmd.label;"
                accesskey="&goBackCmd.accesskey;" command="cmd_goBack"
                key="key_goBack"/>
      <menuseparator id="goNextSeparator"/>
      <menuitem id="menu_goChat" label="&goChatCmd.label;"
                accesskey="&goChatCmd.accesskey;"
                command="cmd_chat"
                data-l10n-attrs="acceltext"/>
      <menuseparator id="goChatSeparator"/>
      <menu id="goFolderMenu"
            label="&folderMenu.label;"
            accesskey="&folderMenu.accesskey;"
            command="cmd_goFolder">
        <menupopup is="folder-menupopup" id="menu_GoFolderPopup"
                    showFileHereLabel="true"
                    showRecent="true"
                    recentLabel="&contextMoveCopyMsgRecentMenu.label;"
                    recentAccessKey="&contextMoveCopyMsgRecentMenu.accesskey;"
                    showFavorites="true"
                    favoritesLabel="&contextMoveCopyMsgFavoritesMenu.label;"
                    favoritesAccessKey="&contextMoveCopyMsgFavoritesMenu.accesskey;"/>
      </menu>
      <menuseparator id="goFolderSeparator"/>

      <menu id="goRecentlyClosedTabs"
            label="&goRecentlyClosedTabs.label;"
            accesskey="&goRecentlyClosedTabs.accesskey;"
            observes="cmd_undoCloseTab">
        <menupopup id="menu_GoRecentlyClosedTabsPopup"
                    onpopupshowing="return InitRecentlyClosedTabsPopup(this)" />
      </menu>
      <menuseparator id="goRecentlyClosedTabsSeparator"/>

      <menuitem id="goStartPage"
                label="&startPageCmd.label;"
                accesskey="&startPageCmd.accesskey;"
                command="cmd_goStartPage"
                key="key_goStartPage"/>
    </menupopup>
    </menu>

    <!-- Message -->
    <menu id="messageMenu" label="&msgMenu.label;" accesskey="&msgMenu.accesskey;">
      <menupopup id="messageMenuPopup" onpopupshowing="InitMessageMenu();">
        <menuitem id="newMsgCmd" label="&newMsgCmd.label;"
                  accesskey="&newMsgCmd.accesskey;"
                  key="key_newMessage2"
                  command="cmd_newMessage"/>
        <menuitem id="replyMainMenu" label="&replyMsgCmd.label;"
                  accesskey="&replyMsgCmd.accesskey;"
                  key="key_reply"
                  command="cmd_reply"/>
        <menuitem id="replyNewsgroupMainMenu" label="&replyNewsgroupCmd2.label;"
                  accesskey="&replyNewsgroupCmd2.accesskey;"
                  key="key_reply"
                  command="cmd_replyGroup"/>
        <menuitem id="replySenderMainMenu" label="&replySenderCmd.label;"
                  accesskey="&replySenderCmd.accesskey;"
                  command="cmd_replySender"/>
        <menuitem id="menu_replyToAll" label="&replyToAllMsgCmd.label;"
                  accesskey="&replyToAllMsgCmd.accesskey;"
                  key="key_replyall"
                  command="cmd_replyall"/>
        <menuitem id="menu_replyToList" label="&replyToListMsgCmd.label;"
                  accesskey="&replyToListMsgCmd.accesskey;"
                  key="key_replylist"
                  command="cmd_replylist"/>
        <menuitem id="menu_forwardMsg" label="&forwardMsgCmd.label;"
                  accesskey="&forwardMsgCmd.accesskey;"
                  key="key_forward"
                  command="cmd_forward"/>
        <menu id="forwardAsMenu" label="&forwardAsMenu.label;" accesskey="&forwardAsMenu.accesskey;">
          <menupopup id="menu_forwardAsPopup">
            <menuitem id="menu_forwardAsInline"
                      label="&forwardAsInline.label;"
                      accesskey="&forwardAsInline.accesskey;"
                      command="cmd_forwardInline"/>
            <menuitem id="menu_forwardAsAttachment"
                      label="&forwardAsAttachmentCmd.label;"
                      accesskey="&forwardAsAttachmentCmd.accesskey;"
                      command="cmd_forwardAttachment"/>
          </menupopup>
        </menu>
        <menuitem id="menu_redirectMsg"
                  data-l10n-id="redirect-msg-menuitem"
                  command="cmd_redirect"/>
        <menuitem id="menu_editMsgAsNew" label="&editAsNewMsgCmd.label;"
                  accesskey="&editAsNewMsgCmd.accesskey;"
                  key="key_editAsNew"
                  command="cmd_editAsNew"/>
        <menuitem id="menu_editDraftMsg"
                  label="&editDraftMsgCmd.label;"
                  accesskey="&editDraftMsgCmd.accesskey;"
                  command="cmd_editDraftMsg"/>
        <menuitem id="menu_newMsgFromTemplate"
                  label="&newMsgFromTemplateCmd.label;"
                  key="key_newMsgFromTemplate"
                  command="cmd_newMsgFromTemplate"/>
        <menuitem id="menu_editTemplate"
                  label="&editTemplateMsgCmd.label;"
                  accesskey="&editTemplateMsgCmd.accesskey;"
                  command="cmd_editTemplateMsg"/>
        <menuseparator id="messageMenuAfterCompositionCommandsSeparator"/>
        <menuitem id="openMessageWindowMenuitem" label="&openMessageWindowCmd.label;"
                  command="cmd_openMessage"
                  accesskey="&openMessageWindowCmd.accesskey;"
                  key="key_openMessage"/>
        <menu id="openFeedMessage"
              label="&openFeedMessage1.label;"
              accesskey="&openFeedMessage1.accesskey;">
          <menupopup id="menu_openFeedMessage">
            <menuitem id="menu_openFeedWebPage"
                      type="radio"
                      name="openFeedGroup"
                      label="&openFeedWebPage.label;"
                      accesskey="&openFeedWebPage.accesskey;"
                      oncommand="FeedMessageHandler.onOpenPref = 0"/>
            <menuitem id="menu_openFeedSummary"
                      type="radio"
                      name="openFeedGroup"
                      label="&openFeedSummary.label;"
                      accesskey="&openFeedSummary.accesskey;"
                      oncommand="FeedMessageHandler.onOpenPref = 1"/>
            <menuitem id="menu_openFeedWebPageInMessagePane"
                      type="radio"
                      name="openFeedGroup"
                      label="&openFeedWebPageInMP.label;"
                      accesskey="&openFeedWebPageInMP.accesskey;"
                      oncommand="FeedMessageHandler.onOpenPref = 2"/>
          </menupopup>
        </menu>
        <menu id="msgAttachmentMenu"
              label="&openAttachmentListCmd.label;"
              accesskey="&openAttachmentListCmd.accesskey;"
              disabled="true">
          <menupopup id="attachmentMenuList"
                     onpopupshowing="fillAttachmentListPopup(event);">
            <menuseparator/>
            <menuitem id="menu-openAllAttachments"
                      label="&openAllAttachmentsCmd.label;"
                      accesskey="&openAllAttachmentsCmd.accesskey;"
                      command="cmd_openAllAttachments"/>
            <menuitem id="menu-saveAllAttachments"
                      label="&saveAllAttachmentsCmd.label;"
                      accesskey="&saveAllAttachmentsCmd.accesskey;"
                      command="cmd_saveAllAttachments"/>
            <menuitem id="menu-detachAllAttachments"
                      label="&detachAllAttachmentsCmd.label;"
                      accesskey="&detachAllAttachmentsCmd.accesskey;"
                      command="cmd_detachAllAttachments"/>
            <menuitem id="menu-deleteAllAttachments"
                      label="&deleteAllAttachmentsCmd.label;"
                      accesskey="&deleteAllAttachmentsCmd.accesskey;"
                      command="cmd_deleteAllAttachments"/>
          </menupopup>
        </menu>
        <menuseparator id="messageAfterAttachmentMenuSeparator"/>
        <menu id="tagMenu" label="&tagMenu.label;" accesskey="&tagMenu.accesskey;" command="cmd_tag">
          <menupopup id="tagMenu-tagpopup"
                     onpopupshowing="InitMessageTags(this);">
            <menuitem id="tagMenu-addNewTag"
                      label="&addNewTag.label;"
                      accesskey="&addNewTag.accesskey;"
                      command="cmd_addTag"/>
            <menuitem id="tagMenu-manageTags"
                      label="&manageTags.label;"
                      accesskey="&manageTags.accesskey;"
                      command="cmd_manageTags"/>
            <menuseparator id="tagMenu-sep-afterTagAddNew"/>
            <menuitem id="tagMenu-tagRemoveAll"
                      command="cmd_removeTags"/>
            <menuseparator id="tagMenuAfterRemoveSeparator"/>
          </menupopup>
        </menu>
        <menu id="markMenu" label="&markMenu.label;" accesskey="&markMenu.accesskey;">
          <menupopup id="menu_MarkPopup" onpopupshowing="InitMessageMark()">
            <menuitem id="markReadMenuItem" label="&markAsReadCmd.label;"
                      accesskey="&markAsReadCmd.accesskey;"
                      key="key_toggleRead"
                      command="cmd_markAsRead"/>
            <menuitem id="markUnreadMenuItem" label="&markAsUnreadCmd.label;"
                      accesskey="&markAsUnreadCmd.accesskey;"
                      key="key_toggleRead"
                      command="cmd_markAsUnread"/>
            <menuitem id="menu_markThreadAsRead"
                      label="&markThreadAsReadCmd.label;"
                      accesskey="&markThreadAsReadCmd.accesskey;"
                      command="cmd_markThreadAsRead"
                      key="key_markThreadAsRead"/>
            <menuitem id="menu_markReadByDate"
                      label="&markReadByDateCmd.label;"
                      accesskey="&markReadByDateCmd.accesskey;"
                      command="cmd_markReadByDate"
                      key="key_markReadByDate"/>
            <menuitem id="menu_markAllRead"
                      label="&markAllReadCmd.label;"
                      key="key_markAllRead"
                      accesskey="&markAllReadCmd.accesskey;"
                      command="cmd_markAllRead"/>
            <menuseparator id="markMenuAfterAllReadSeparator"/>
            <menuitem id="markFlaggedMenuItem"
                      type="checkbox"
                      label="&markStarredCmd.label;"
                      accesskey="&markStarredCmd.accesskey;"
                      command="cmd_markAsFlagged"
                      key="key_toggleFlagged"/>
            <menuseparator id="markMenuAfterFlaggedSeparator"/>
            <menuitem id="menu_markAsJunk" label="&markAsJunkCmd.label;"
                      accesskey="&markAsJunkCmd.accesskey;"
                      command="cmd_markAsJunk"
                      key="key_markJunk"/>
            <menuitem id="menu_markAsNotJunk" label="&markAsNotJunkCmd.label;"
                      key="key_markNotJunk"
                      accesskey="&markAsNotJunkCmd.accesskey;"
                      command="cmd_markAsNotJunk"/>
            <menuitem id="menu_recalculateJunkScore"
                      label="&recalculateJunkScoreCmd.label;"
                      accesskey="&recalculateJunkScoreCmd.accesskey;"
                      command="cmd_recalculateJunkScore"/>
          </menupopup>
        </menu>
        <menuseparator id="messageMenuAfterMarkSeparator"/>
        <menuitem id="archiveMainMenu" label="&archiveMsgCmd.label;"
                  accesskey="&archiveMsgCmd.accesskey;"
                  key="key_archive"
                  command="cmd_archive"/>
        <menuitem id="menu_cancel" command="cmd_cancel"
                  label="&cancelNewsMsgCmd.label;"
                  accesskey="&cancelNewsMsgCmd.accesskey;"/>
        <menu id="moveMenu"
              label="&moveMsgToMenu.label;"
              accesskey="&moveMsgToMenu.accesskey;"
              oncommand="goDoCommand('cmd_moveMessage', event.target._folder)">
          <menupopup is="folder-menupopup"
                      mode="filing"
                      showFileHereLabel="true"
                      showRecent="true"
                      recentLabel="&moveCopyMsgRecentMenu.label;"
                      recentAccessKey="&moveCopyMsgRecentMenu.accesskey;"
                      showFavorites="true"
                      favoritesLabel="&contextMoveCopyMsgFavoritesMenu.label;"
                      favoritesAccessKey="&contextMoveCopyMsgFavoritesMenu.accesskey;"/>
        </menu>
        <menu id="copyMenu"
              label="&copyMsgToMenu.label;"
              accesskey="&copyMsgToMenu.accesskey;"
              oncommand="goDoCommand('cmd_copyMessage', event.target._folder)">
          <menupopup is="folder-menupopup"
                      mode="filing"
                      showFileHereLabel="true"
                      showRecent="true"
                      recentLabel="&moveCopyMsgRecentMenu.label;"
                      recentAccessKey="&moveCopyMsgRecentMenu.accesskey;"
                      showFavorites="true"
                      favoritesLabel="&contextMoveCopyMsgFavoritesMenu.label;"
                      favoritesAccessKey="&contextMoveCopyMsgFavoritesMenu.accesskey;"/>
        </menu>
        <menuitem id="moveToFolderAgain" key="key_moveToFolderAgain" command="cmd_moveToFolderAgain"
                  label="&moveToFolderAgain.label;" accesskey="&moveToFolderAgain.accesskey;"/>
        <menuseparator id="messageMenuAfterMoveCommandsSeparator"/>
        <menuitem id="createFilter" label="&createFilter.label;"
                  accesskey="&createFilter.accesskey;"
                  command="cmd_createFilterFromMenu"/>
    <menuseparator id="threadItemsSeparator"/>
    <menuitem id="killThread"
              label="&killThreadMenu.label;"
              accesskey="&killThreadMenu.accesskey;"
              command="cmd_killThread"
              type="checkbox"
              key="key_killThread"/>
    <menuitem id="killSubthread"
              label="&killSubthreadMenu.label;"
              accesskey="&killSubthreadMenu.accesskey;"
              type="checkbox"
              command="cmd_killSubthread"
              key="key_killSubthread"/>
    <menuitem id="watchThread"
              label="&watchThreadMenu.label;"
              accesskey="&watchThreadMenu.accesskey;"
              type="checkbox"
              command="cmd_watchThread"
              key="key_watchThread"/>
  </menupopup>
</menu>


<!-- Tools -->
<menu id="tasksMenu" label="&tasksMenu.label;" accesskey="&tasksMenu.accesskey;">
  <menupopup id="taskPopup" onpopupshowing="document.commandDispatcher.updateCommands('create-menu-tasks')">
    <menuitem hidden="true" accesskey="&messengerCmd.accesskey;" label="&messengerCmd.label;"
              key="key_mail" oncommand="toMessengerWindow();" id="tasksMenuMail"/>
    <menuitem id="addressBook"
              label="&addressBookCmd.label;"
              accesskey="&addressBookCmd.accesskey;"
              key="key_addressbook"
              oncommand="toAddressBook();"/>
    <menuseparator id="devToolsSeparator"/>
    <menuitem id="menu_openSavedFilesWnd" label="&savedFiles.label;"
              accesskey="&savedFiles.accesskey;"
              key="key_savedFiles"
              oncommand="openSavedFilesWnd();"/>
    <menuitem id="addonsManager"
              data-l10n-id="menu-addons-and-themes"
              oncommand="openAddonsMgr();"/>
    <menuitem id="activityManager" label="&activitymanager.label;"
              accesskey="&activitymanager.accesskey;"
              oncommand="openActivityMgr();"/>
    <menu id="imAccountsStatus" label="&imAccountsStatus.label;"
          accesskey="&imAccountsStatus.accesskey;"
          command="cmd_chatStatus">
      <menupopup id="imStatusMenupopup">
        <menuitem id="imStatusAvailable" status="available" label="&imStatus.available;" class="menuitem-iconic"/>
        <menuitem id="imStatusUnavailable" status="unavailable" label="&imStatus.unavailable;" class="menuitem-iconic"/>
        <menuseparator id="imStatusOfflineSeparator"/>
        <menuitem id="imStatusOffline" status="offline" label="&imStatus.offline;" class="menuitem-iconic"/>
        <menuseparator id="imStatusShowAccountsSeparator"/>
        <menuitem id="imStatusShowAccounts" label="&imStatus.showAccounts;"/>
      </menupopup>
    </menu>
    <menuitem id="joinChatMenuItem"
              label="&joinChatCmd.label;"
              accesskey="&joinChatCmd.accesskey;"
              command="cmd_joinChat"/>

    <menuseparator id="devToolsSeparator"/>
    <menuitem id="filtersCmd" label="&filtersCmd2.label;"
              accesskey="&filtersCmd2.accesskey;"
              oncommand="MsgFilters();"/>
    <menuitem id="applyFilters"
              label="&filtersApply.label;"
              accesskey="&filtersApply.accesskey;"
              command="cmd_applyFilters"/>
    <menuitem id="applyFiltersToSelection"
              label="&filtersApplyToMessage.label;"
              accesskey="&filtersApplyToMessage.accesskey;"
              command="cmd_applyFiltersToSelection"/>
    <menuseparator id="tasksMenuAfterApplySeparator"/>
    <menuitem id="runJunkControls"
              label="&runJunkControls.label;"
              accesskey="&runJunkControls.accesskey;"
              command="cmd_runJunkControls"/>
    <menuitem id="deleteJunk"
              label="&deleteJunk.label;"
              accesskey="&deleteJunk.accesskey;"
              command="cmd_deleteJunk"/>
    <menuseparator id="tasksMenuAfterDeleteSeparator"/>
    <menuitem id="menu_import" label="&importCmd.label;"
              accesskey="&importCmd.accesskey;"
              oncommand="toImport();"/>
    <menuitem id="menu_export" label="&exportCmd.label;"
              accesskey="&exportCmd.accesskey;"
              oncommand="toExport();"/>
    <menuitem id="manageKeysOpenPGP"
              data-l10n-id="openpgp-manage-keys-openpgp-cmd"
              oncommand="openKeyManager()"/>
    <menu id="devtoolsMenu" label="&devtoolsMenu.label;" accesskey="&devtoolsMenu.accesskey;">
      <menupopup id="devtoolsPopup">
        <menuitem id="devtoolsToolbox"
                  label="&devToolboxCmd.label;"
                  accesskey="&devToolboxCmd.accesskey;"
                  key="key_devtoolsToolbox"
                  oncommand="BrowserToolboxLauncher.init();"/>
        <menuitem id="addonDebugging"
                  label="&debugAddonsCmd.label;"
                  accesskey="&debugAddonsCmd.accesskey;"
                  oncommand="openAboutDebugging('addons')"/>
        <menuseparator id="debuggingSeparator"/>
        <menuitem id="javascriptConsole"
                  label="&errorConsoleCmd.label;"
                  accesskey="&errorConsoleCmd.accesskey;"
                  key="key_errorConsole"
                  oncommand="toJavaScriptConsole();"/>
      </menupopup>
    </menu>
    <menuitem id="sanitizeHistory"
              label="&clearRecentHistory.label;"
              accesskey="&clearRecentHistory.accesskey;"
              key="key_sanitizeHistory"
              oncommand="toSanitize();"/>
    <menuseparator id="prefSep"/>
    <menuitem id="menu_preferences"
              oncommand="openOptionsDialog()"
              data-l10n-id="menu-tools-settings"/>
    <menuitem id="menu_accountmgr"
              label="&accountManagerCmd2.label;"
              accesskey="&accountManagerCmd2.accesskey;"
              oncommand="MsgAccountManager(null);"/>
    </menupopup>
  </menu>


      <!-- Help -->

<menu id="helpMenu"
      data-l10n-id="menu-help-help-title"
      onpopupshowing="buildHelpMenu();">
        <menupopup id="menu_HelpPopup">
          <menuitem id="menu_openHelp"
                    data-l10n-id="menu-help-get-help"
                    key="key_openHelp"
                    oncommand="openSupportURL();"/>
          <menuitem id="menu_openTour"
                    data-l10n-id="menu-help-explore-features"
                    oncommand="openLinkText(event, 'tourURL');"/>
          <menuitem id="menu_keyboardShortcuts"
                    data-l10n-id="menu-help-shortcuts"
                    oncommand="openLinkText(event, 'keyboardShortcutsURL');"/>
          <menuseparator/>
          <menuitem id="getInvolved"
                    data-l10n-id="menu-help-get-involved"
                    oncommand="openLinkText(event, 'getInvolvedURL');"/>
          <menuitem id="donationsPage"
                    data-l10n-id="menu-help-donation"
                    oncommand="openLinkText(event, 'donateURL');"/>
          <menuitem id="feedbackPage"
                    data-l10n-id="menu-help-share-feedback"
                    oncommand="openLinkText(event, 'feedbackURL');"/>
          <menuseparator id="functionsSeparator"/>
          <menuitem id="helpTroubleshootMode"
                    data-l10n-id="menu-help-enter-troubleshoot-mode"
                    oncommand="safeModeRestart();"/>
          <menuitem id="aboutsupport_open"
                    data-l10n-id="menu-help-troubleshooting-info"
                    oncommand="openAboutSupport();"/>
          <menuseparator id="aboutSeparator"/>
          <menuitem id="aboutName"
                    data-l10n-id="menu-help-about-product"
                    oncommand="openAboutDialog();"/>
        </menupopup>
      </menu>
</menubar>
      </toolbaritem>
    </toolbar>
    <!-- mail-toolbox with the main toolbarbuttons -->

  <toolbarpalette id="MailToolbarPalette">
    <toolbarbutton is="toolbarbutton-menu-button" id="button-getmsg"
                   type="menu"
                   class="toolbarbutton-1"
                   label="&getMsgButton1.label;"
                   tooltiptext="&getMsgButton.tooltip;"
                   command="cmd_getNewMessages">
      <menupopup is="folder-menupopup" id="button-getMsgPopup"
                 onpopupshowing="getMsgToolbarMenu_init();"
                 oncommand="MsgGetMessagesForAccount(event.target._folder); event.stopPropagation();"
                 expandFolders="false"
                 mode="getMail">
        <menuitem id="button-getAllNewMsg"
                  class="menuitem-iconic folderMenuItem"
                  label="&getAllNewMsgCmd.label;"
                  accesskey="&getAllNewMsgCmd.accesskey;"
                  command="cmd_getMsgsForAuthAccounts"/>
        <menuseparator id="button-getAllNewMsgSeparator"/>
      </menupopup>
    </toolbarbutton>
    <toolbarbutton id="button-newmsg"
                   class="toolbarbutton-1"
                   label="&newMsgButton.label;"
                   tooltiptext="&newMsgButton.tooltip;"
                   command="cmd_newMessage"/>
    <toolbarbutton id="button-file"
                   type="menu"
                   wantdropmarker="true"
                   class="toolbarbutton-1"
                   label="&fileButton.label;"
                   tooltiptext="&fileButton.tooltip;"
                   oncommand="goDoCommand('cmd_moveMessage', event.target._folder)">
      <menupopup is="folder-menupopup" id="button-filePopup"
                 mode="filing"
                 showRecent="true"
                 showFileHereLabel="true"
                 recentLabel="&moveCopyMsgRecentMenu.label;"
                 recentAccessKey="&moveCopyMsgRecentMenu.accesskey;"/>
    </toolbarbutton>
    <toolbarbutton id="button-showconversation"
                   class="toolbarbutton-1"
                   label="&openConversationButton.label;"
                   tooltiptext="&openMsgConversationButton.tooltip;"
                   command="cmd_openConversation"/>
    <toolbarbutton is="toolbarbutton-menu-button" id="button-goback"
                   type="menu"
                   class="toolbarbutton-1"
                   label="&backButton1.label;"
                   command="cmd_goBack"
                   tooltiptext="&goBackButton.tooltip;">
      <menupopup id="button-goBackPopup" onpopupshowing="backToolbarMenu_init(this)">
        <menuitem id="button-goBack" label="&goBackCmd.label;" command="cmd_goBack"/>
        <menuseparator id="button-goBackSeparator"/>
      </menupopup>
    </toolbarbutton>
    <toolbarbutton is="toolbarbutton-menu-button" id="button-goforward"
                   type="menu"
                   class="toolbarbutton-1"
                   label="&goForwardButton1.label;"
                   command="cmd_goForward"
                   tooltiptext="&goForwardButton.tooltip;">
      <menupopup id="button-goForwardPopup" onpopupshowing="forwardToolbarMenu_init(this)">
        <menuitem id="button-goForward"
                  label="&goForwardCmd.label;"
                  command="cmd_goForward"/>
        <menuseparator id="button-goForwardSeparator"/>
      </menupopup>
    </toolbarbutton>
    <toolbaritem id="button-previous"
                 title="&previousButtonToolbarItem.label;"
                 align="center"
                 class="chromeclass-toolbar-additional">
      <toolbarbutton id="button-previousUnread"
                     class="toolbarbutton-1"
                     label="&previousButton.label;"
                     command="cmd_previousUnreadMsg"
                     tooltiptext="&previousButton.tooltip;"/>
    </toolbaritem>
    <toolbarbutton id="button-previousMsg"
                   class="toolbarbutton-1"
                   label="&previousMsgButton.label;"
                   command="cmd_previousMsg"
                   tooltiptext="&previousMsgButton.tooltip;"/>
    <toolbaritem id="button-next"
                 title="&nextButtonToolbarItem.label;"
                 align="center"
                 class="chromeclass-toolbar-additional">
      <toolbarbutton id="button-nextUnread"
                     class="toolbarbutton-1"
                     label="&nextButton.label;"
                     command="cmd_nextUnreadMsg"
                     tooltiptext="&nextButton.tooltip;"/>
    </toolbaritem>
    <toolbarbutton id="button-nextMsg"
                   class="toolbarbutton-1"
                   label="&nextMsgButton.label;"
                   command="cmd_nextMsg"
                   tooltiptext="&nextMsgButton.tooltip;"/>
    <toolbarbutton id="button-print"
                   class="toolbarbutton-1"
                   label="&printButton.label;"
                   command="cmd_print"
                   tooltiptext="&printButton.tooltip;"/>
    <toolbarbutton is="toolbarbutton-menu-button" id="button-mark"
                   type="menu"
                   class="toolbarbutton-1"
                   label="&markButton.label;"
                   tooltiptext="&markButton.tooltip;">
      <menupopup id="button-markPopup" onpopupshowing="InitMessageMark()">
        <menuitem id="markReadToolbarItem"
                  label="&markAsReadCmd.label;"
                  accesskey="&markAsReadCmd.accesskey;"
                  key="key_toggleRead"
                  command="cmd_markAsRead"/>
        <menuitem id="markUnreadToolbarItem"
                  label="&markAsUnreadCmd.label;"
                  accesskey="&markAsUnreadCmd.accesskey;"
                  key="key_toggleRead"
                  command="cmd_markAsUnread"/>
        <menuitem id="button-markThreadAsRead"
                  label="&markThreadAsReadCmd.label;"
                  key="key_markThreadAsRead"
                  accesskey="&markThreadAsReadCmd.accesskey;"
                  command="cmd_markThreadAsRead"/>
        <menuitem id="button-markReadByDate"
                  label="&markReadByDateCmd.label;"
                  key="key_markReadByDate"
                  accesskey="&markReadByDateCmd.accesskey;"
                  command="cmd_markReadByDate"/>
        <menuitem id="button-markAllRead"
                  label="&markAllReadCmd.label;"
                  key="key_markAllRead"
                  accesskey="&markAllReadCmd.accesskey;"
                  command="cmd_markAllRead"/>
        <menuseparator id="button-markAllReadSeparator"/>
        <menuitem id="markFlaggedToolbarItem"
                  type="checkbox"
                  label="&markStarredCmd.label;"
                  accesskey="&markStarredCmd.accesskey;"
                  key="key_toggleFlagged"
                  command="cmd_markAsFlagged"/>
      </menupopup>
    </toolbarbutton>
    <toolbarbutton id="button-tag"
                   type="menu"
                   wantdropmarker="true"
                   class="toolbarbutton-1"
                   label="&tagButton.label;"
                   tooltiptext="&tagButton.tooltip;"
                   command="cmd_tag">
      <menupopup id="button-tagpopup"
                 onpopupshowing="InitMessageTags(this);">
        <menuitem id="button-addNewTag"
                  label="&addNewTag.label;"
                  accesskey="&addNewTag.accesskey;"
                  command="cmd_addTag"/>
        <menuitem id="button-manageTags"
                  label="&manageTags.label;"
                  accesskey="&manageTags.accesskey;"
                  command="cmd_manageTags"/>
        <menuseparator id="button-tagpopup-sep-afterTagAddNew"/>
        <menuitem id="button-tagRemoveAll"
                  command="cmd_removeTags"/>
        <menuseparator id="button-afterTagRemoveAllSeparator"/>
      </menupopup>
    </toolbarbutton>
    <toolbarbutton id="button-address"
                   class="toolbarbutton-1"
                   label="&addressBookButton.label;"
                   oncommand="toAddressBook();"
                   tooltiptext="&addressBookButton.tooltip;"/>
    <toolbarbutton is="toolbarbutton-badge-button" id="button-chat"
                   image="chrome://messenger/skin/icons/new/compact/chat.svg"
                   class="toolbarbutton-1"
                   label="&chatButton.label;"
                   command="cmd_chat"
                   observes="cmd_chat"
                   tooltiptext="&chatButton.tooltip;"/>
    <toolbaritem id="throbber-box" title="&throbberItem.title;">
      <!-- NOTE: We only display up to one of these images at any given time.
         - Only show the static icon when customizing the toolbar.
         - Only show the animated icon when we are not customizing the toolbar
         - and there is some activity.
         - Once loading animation is handled by CSS, we can use a single image
         - here instead. -->
      <html:img class="animated-throbber-icon"
                src="chrome://global/skin/icons/loading.png"
                srcset="chrome://global/skin/icons/loading@2x.png 2x"
                alt="" />
      <html:img class="static-throbber-icon"
                src="chrome://messenger/skin/icons/notloading.png"
                srcset="chrome://messenger/skin/icons/notloading@2x.png 2x"
                alt="" />
    </toolbaritem>

    <toolbarbutton id="button-addons" class="toolbarbutton-1"
                   data-l10n-id="addons-and-themes-toolbarbutton"
                   oncommand="openAddonsMgr();"/>

<!-- CALENDAR TOOLBAR BUTTONS FOR MAIL TOOLBAR -->
<toolbarbutton id="lightning-button-calendar"
               class="toolbarbutton-1"
               label="&lightning.toolbar.calendar.label;"
               tooltiptext="&lightning.toolbar.calendar.tooltip;"
               command="new_calendar_tab"/>
<toolbarbutton id="lightning-button-tasks"
               class="toolbarbutton-1"
               label="&lightning.toolbar.task.label;"
               tooltiptext="&lightning.toolbar.task.tooltip;"
               command="new_task_tab"/>
<toolbarbutton is="toolbarbutton-menu-button" id="extractEventButton"
               type="menu"
               class="toolbarbutton-1"
               label="&calendar.extract.event.button;"
               tooltiptext="&calendar.extract.event.button.tooltip;"
               oncommand="calendarExtract.extractFromEmail(true);">
  <menupopup id="extractEventLocaleList"
             oncommand="calendarExtract.extractWithLocale(event, true);"
             onpopupshowing="calendarExtract.onShowLocaleMenu(event.target);"/>
</toolbarbutton>
<toolbarbutton is="toolbarbutton-menu-button" id="extractTaskButton"
               type="menu"
               class="toolbarbutton-1"
               label="&calendar.extract.task.button;"
               tooltiptext="&calendar.extract.task.button.tooltip;"
               oncommand="calendarExtract.extractFromEmail(false);">
  <menupopup id="extractTaskLocaleList"
             oncommand="calendarExtract.extractWithLocale(event, false);"
             onpopupshowing="calendarExtract.onShowLocaleMenu(event.target);"/>
</toolbarbutton>
  </toolbarpalette>

  <!-- If changes are made to the default set of toolbar buttons, you may need to rev the id
       of mail-bar in order to force the new default items to show up for users who customized their toolbar
       in earlier versions. Bumping the id means users will have to re-customize their toolbar!
  -->

  <toolbar is="customizable-toolbar" id="mail-bar3"
           class="inline-toolbar chromeclass-toolbar themeable-full"
           toolbarname="&showMessengerToolbarCmd.label;"
           accesskey="&showMessengerToolbarCmd.accesskey;"
           fullscreentoolbar="true" mode="full"
           customizable="true"
           context="toolbar-context-menu"
           defaultset="button-getmsg,button-newmsg,separator,button-tag,qfb-show-filter-bar,spring">
  </toolbar>
  </toolbox>

  <stack flex="1" class="printPreviewStack">
    <browser id="messageBrowser"
             flex="1"
             src="about:message"
             autocompletepopup="PopupAutoComplete"
             messagemanagergroup="single-page"/>
  </stack>

  <panel id="customizeToolbarSheetPopup" noautohide="true">
    <iframe id="customizeToolbarSheetIFrame"
            style="&dialog.dimensions;"
            hidden="true"/>
  </panel>

  <hbox id="status-bar" class="statusbar chromeclass-status" role="status">

    <hbox id="statusTextBox" ondblclick="openActivityMgr();" flex="1">
      <hbox class="statusbarpanel">
        <toolbarbutton id="offline-status" oncommand="MailOfflineMgr.toggleOfflineStatus();"/>
      </hbox>
      <label id="statusText" class="statusbarpanel" value="&statusText.label;" flex="1" crop="end"/>
      <hbox id="statusbar-progresspanel" class="statusbarpanel statusbarpanel-progress" collapsed="true">
        <html:progress class="progressmeter-statusbar" id="statusbar-icon" value="0" max="100"/>
      </hbox>
      <hbox id="quotaPanel" class="statusbarpanel statusbarpanel-progress" hidden="true">
        <stack>
          <html:progress id="quotaMeter" class="progressmeter-statusbar" value="0" max="100"/>
          <html:a id="quotaLabel" onclick="openFolderQuota();"></html:a>
        </stack>
      </hbox>
    </hbox>
  </hbox>


<html:template id="dialogStackTemplate">
  <stack class="dialogStack tab-dialog-box" hidden="true">
    <vbox class="dialogTemplate dialogOverlay" align="center" topmost="true" hidden="true">
      <hbox class="dialogBox">
        <browser class="dialogFrame"
                 autoscroll="false"
                 disablehistory="true"/>
      </hbox>
    </vbox>
  </stack>
</html:template>

<html:template id="printPreviewStackTemplate">
  <stack class="previewStack" rendering="true" flex="1" previewtype="primary">
    <vbox class="previewRendering" flex="1">
      <h1 class="print-pending-label" data-l10n-id="printui-loading"></h1>
    </vbox>
  </stack>
</html:template>
</html:body>
</html>
