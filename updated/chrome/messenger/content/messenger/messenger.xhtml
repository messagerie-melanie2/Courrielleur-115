<?xml version="1.0"?>

<?xml-stylesheet href="chrome://messenger/skin/mailWindow1.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/tagColors.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/shared/glodacomplete.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/tabmail.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/popupPanel.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/chat.css" type="text/css"?>
<?xml-stylesheet href="chrome://chat/skin/imtooltip.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/messageHeader.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/icons.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/colors.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/folderMenus.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/attachmentList.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/searchBox.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/panelUI.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/contextMenu.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/input-fields.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/openpgp/inlineNotification.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/spacesToolbar.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/shared/unifiedToolbar.css" type="text/css"?>

<!-- Calendar CSS -->
<?xml-stylesheet href="chrome://calendar/skin/calendar.css" type="text/css"?>

<?xml-stylesheet href="chrome://calendar/skin/calendar-event-dialog.css" type="text/css"?>
<?xml-stylesheet href="chrome://calendar/skin/shared/dialogs/calendar-event-dialog.css" type="text/css"?>

<?xml-stylesheet href="chrome://calendar/skin/today-pane.css" type="text/css"?>

<?xml-stylesheet href="chrome://calendar/skin/calendar-unifinder.css" type="text/css"?>

<?xml-stylesheet href="chrome://calendar/skin/calendar-task-tree.css" type="text/css"?>
<?xml-stylesheet href="chrome://calendar/skin/calendar-task-view.css" type="text/css"?>

<?xml-stylesheet href="chrome://calendar/skin/calendar-views.css" type="text/css"?>
<?xml-stylesheet href="chrome://calendar/skin/shared/calendar-alarms.css" type="text/css"?>
<?xml-stylesheet href="chrome://calendar/skin/shared/widgets/minimonth.css" type="text/css"?>
<?xml-stylesheet href="chrome://calendar/skin/widgets/calendar-widgets.css" type="text/css"?>

<!DOCTYPE html [

<!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd" >
%brandDTD;
<!ENTITY % msgHdrViewOverlayDTD SYSTEM "chrome://messenger/locale/msgHdrViewOverlay.dtd">
%msgHdrViewOverlayDTD;
<!ENTITY % messengerDTD SYSTEM "chrome://messenger/locale/messenger.dtd" >
%messengerDTD;
<!ENTITY % chatDTD SYSTEM "chrome://messenger/locale/chat.dtd">
%chatDTD;
<!ENTITY % customizeToolbarDTD SYSTEM "chrome://messenger/locale/customizeToolbar.dtd">
%customizeToolbarDTD;
<!ENTITY % tabMailDTD SYSTEM "chrome://messenger/locale/tabmail.dtd" >
%tabMailDTD;
<!ENTITY % utilityDTD SYSTEM "chrome://communicator/locale/utilityOverlay.dtd">
%utilityDTD;
<!ENTITY % msgViewPickerDTD SYSTEM "chrome://messenger/locale/msgViewPickerOverlay.dtd" >
%msgViewPickerDTD;
<!ENTITY % baseMenuOverlayDTD SYSTEM "chrome://messenger/locale/baseMenuOverlay.dtd">
%baseMenuOverlayDTD;
<!ENTITY % viewZoomOverlayDTD SYSTEM "chrome://messenger/locale/viewZoomOverlay.dtd">
%viewZoomOverlayDTD;
<!ENTITY % msgViewPickerDTD SYSTEM "chrome://messenger/locale/msgViewPickerOverlay.dtd" >
%msgViewPickerDTD;
<!ENTITY % calendarGlobalDTD SYSTEM "chrome://calendar/locale/global.dtd">
%calendarGlobalDTD;
<!ENTITY % calendarDTD SYSTEM "chrome://calendar/locale/calendar.dtd">
%calendarDTD;
<!ENTITY % calendarMenuOverlayDTD SYSTEM "chrome://calendar/locale/menuOverlay.dtd" >
%calendarMenuOverlayDTD;
<!ENTITY % eventDialogDTD SYSTEM "chrome://calendar/locale/calendar-event-dialog.dtd">
%eventDialogDTD;
<!ENTITY % lightningDTD SYSTEM "chrome://lightning/locale/lightning.dtd">
%lightningDTD;
<!ENTITY % lightningToolbarDTD SYSTEM "chrome://lightning/locale/lightning-toolbar.dtd" >
%lightningToolbarDTD;
<!ENTITY % mailOverlayDTD SYSTEM "chrome://messenger/locale/mailOverlay.dtd">
%mailOverlayDTD;
<!ENTITY % smimeDTD SYSTEM "chrome://messenger-smime/locale/msgReadSecurityInfo.dtd">
%smimeDTD;
]>

<!--
  - The 'what you think of when you think of thunderbird' window;
  -  3-pane view inside of tabs.
  -->
<html id="messengerWindow" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:html="http://www.w3.org/1999/xhtml"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      icon="messengerWindow"
      titlemodifier="&titledefault.label;"
      titlemenuseparator="&titleSeparator.label;"
      defaultTabTitle="&defaultTabTitle.label;"
      windowtype="mail:3pane"
      macanimationtype="document"
      screenX="10" screenY="10"
      scrolling="false"
      persist="screenX screenY width height sizemode"
      toggletoolbar="true"
      lightweightthemes="true"
      fullscreenbutton="true"
      calendar-deactivated="">
<head>
  <link rel="localization" href="branding/brand.ftl" />
  <link rel="localization" href="messenger/shortcuts.ftl" />
  <link rel="localization" href="messenger/messenger.ftl" />
  <link rel="localization" href="toolkit/main-window/findbar.ftl" />
  <link rel="localization" href="toolkit/global/textActions.ftl" />
  <link rel="localization" href="toolkit/printing/printUI.ftl" />
  <link rel="localization" href="messenger/menubar.ftl" />
  <link rel="localization" href="messenger/appmenu.ftl" />
  <link rel="localization" href="messenger/openpgp/openpgp.ftl" />
  <link rel="localization" href="messenger/openpgp/openpgp-frontend.ftl" />
  <link rel="localization" href="messenger/openpgp/msgReadStatus.ftl"/>
  <link rel="localization" href="calendar/calendar-widgets.ftl" />
  <link rel="localization" href="calendar/calendar-context-menus.ftl" />
  <link rel="localization" href="calendar/calendar-editable-item.ftl" />
  <link rel="localization" href="messenger/chat.ftl" />
  <link rel="localization" href="messenger/messageheader/headerFields.ftl" />
  <link rel="localization" href="messenger/mailWidgets.ftl" />
  <link rel="localization" href="messenger/unifiedToolbar.ftl" />
  <link rel="localization" href="messenger/unifiedToolbarItems.ftl" />

  <title>&titledefault.label;</title>

  <script defer="defer" src="chrome://messenger/content/globalOverlay.js"></script>
  <script defer="defer" src="chrome://global/content/editMenuOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailWindow.js"></script>
  <script defer="defer" src="chrome://messenger/content/selectionsummaries.js"></script>
  <script defer="defer" src="chrome://messenger/content/messenger.js"></script>
  <script defer="defer" src="chrome://messenger/content/specialTabs.js"></script>
  <script defer="defer" src="chrome://messenger/content/spacesToolbar.js"></script>
  <script defer="defer" src="chrome://messenger/content/newmailaccount/provisionerCheckout.js"></script>
  <script defer="defer" src="chrome://messenger/content/glodaFacetTab.js"></script>
  <script defer="defer" src="chrome://messenger/content/searchBar.js"></script>
  <script defer="defer" src="chrome://messenger/content/mail3PaneWindowCommands.js"></script>
  <script defer="defer" src="chrome://global/content/contentAreaUtils.js"></script>
  <script defer="defer" src="chrome://messenger/content/browserPopups.js"></script>
  <script defer="defer" src="chrome://messenger/content/accountUtils.js"></script>
  <script defer="defer" src="chrome://communicator/content/contentAreaClick.js"></script>
  <script defer="defer" src="chrome://messenger/content/toolbarIconColor.js"></script>
  <script defer="defer" src="chrome://messenger/content/jsTreeView.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/chat-messenger.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/imStatusSelector.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/imContextMenu.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/chat-conversation.js"></script>
  <script defer="defer" src="chrome://messenger/content/addressbook/addressBookTab.js"></script>
  <script defer="defer" src="chrome://messenger/content/preferences/preferencesTab.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailCore.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailCommands.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailWindowOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/mailTabs.js"></script>
  <script defer="defer" src="chrome://messenger-newsblog/content/newsblogOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/mail-offline.js"></script>
  <script defer="defer" src="chrome://messenger/content/msgViewPickerOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/viewZoomOverlay.js"></script>
  <script defer="defer" src="chrome://communicator/content/utilityOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/newmailaccount/uriListener.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/chat-conversation-info.js"></script>
  <script defer="defer" src="chrome://gloda/content/autocomplete-richlistitem.js"></script>
  <script defer="defer" src="chrome://gloda/content/glodacomplete.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/chat-contact.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/chat-group.js"></script>
  <script defer="defer" src="chrome://messenger/content/chat/chat-imconv.js"></script>
  <script defer="defer" src="chrome://messenger/content/tabmail-tab.js"></script>
  <script defer="defer" src="chrome://messenger/content/tabmail-tabs.js"></script>
  <script defer="defer" src="chrome://messenger/content/tabmail.js"></script>
  <script defer="defer" src="chrome://messenger/content/messenger-customization.js"></script>
  <script defer="defer" src="chrome://messenger/content/customizable-toolbar.js"></script>
  <!-- panelUI.js is for the appmenus. -->
  <script defer="defer" src="chrome://messenger/content/panelUI.js"></script>
  <script defer="defer" src="chrome://messenger/content/minimizeToTray.js"></script>
  <!-- calendar-management.js also needed for multiple calendar support and today pane -->
  <script defer="defer" src="chrome://calendar/content/calendar-management.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-ui-utils.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-tabs.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-modes.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-day-label.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-clipboard.js"></script>

  <script defer="defer" src="chrome://calendar/content/import-export.js"></script>

  <script defer="defer" src="chrome://calendar/content/publish.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-item-editing.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-chrome-startup.js"></script>
  <script defer="defer" src="chrome://calendar/content/widgets/mouseoverPreviews.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-views-utils.js"></script>
  <script defer="defer" src="chrome://calendar/content/widgets/calendar-filter.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-base-view.js"></script>
  <script defer="defer" src="chrome://calendar/content/widgets/calendar-dnd-widgets.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-editable-item.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-month-view.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-multiday-view.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-views.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-dnd-listener.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-statusbar.js"></script>
  <script defer="defer" src="chrome://calendar/content/widgets/calendar-invitation-panel.js"></script>
  <script defer="defer" src="chrome://calendar/content/widgets/calendar-minidate.js"></script>
  <script defer="defer" src="chrome://calendar/content/widgets/calendar-minimonth.js"></script>
  <script defer="defer" src="chrome://calendar/content/widgets/calendar-modebox.js"></script>

  <!-- NEEDED FOR TASK VIEW/LIST SUPPORT -->
  <script defer="defer" src="chrome://calendar/content/calendar-task-editing.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-extract.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-invitations-manager.js"></script>

  <!-- NEEDED FOR EVENT/TASK IN A TAB -->
  <script defer="defer" src="chrome://calendar/content/calendar-item-panel.js"></script>

  <script defer="defer" src="chrome://calendar/content/calendar-command-controller.js"></script>

  <!-- NEEDED FOR EVENTS VIEW (UNIFINDER) -->
  <script defer="defer" src="chrome://calendar/content/calendar-unifinder.js"></script>

  <!-- NEEDED FOR TODAY PANE AND TASKS VIEW -->

  <script defer="defer" src="chrome://messenger/content/tree-listbox.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-task-tree-utils.js"></script>
  <script defer="defer" src="chrome://calendar/content/today-pane-agenda.js"></script>
  <script defer="defer" src="chrome://calendar/content/today-pane.js"></script>

  <!-- NEEDED FOR TASK VIEW -->
  <script defer="defer" src="chrome://calendar/content/calendar-task-tree-view.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-task-tree.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-task-view.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-dialog-utils.js"></script>
  <script defer="defer" src="chrome://calendar/content/calApplicationUtils.js"></script>
  <script defer="defer" src="chrome://calendar/content/calendar-menus.js"></script>

  <!-- NEEDED FOR MIGRATION CHECK AT INSTALL -->
  <script defer="defer" src="chrome://calendar/content/calendar-migration.js"></script>
  <script defer="defer" src="chrome://messenger/content/shortcutsOverlay.js"></script>

  <script defer="defer" src="chrome://messenger/content/accountcreation/accountHub.js"></script>

  <!-- Unified toolbar -->
  <script type="module" defer="defer" src="chrome://messenger/content/unifiedtoolbar/unified-toolbar.mjs"></script>

  <script>
    window.onload = gMailInit.onLoad.bind(gMailInit);
    window.onunload = gMailInit.onUnload.bind(gMailInit);

    window.addEventListener("MozBeforeInitialXULLayout",
     gMailInit.onBeforeInitialXULLayout.bind(gMailInit), { once: true });
  </script>

  <!-- Color customization for the folder pane. -->
  <style id="folderColorsStyle"></style>
  <style id="folderColorsStylePreview"></style>
</head>
<html:body xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<stringbundle id="bundle_brand" src="chrome://branding/locale/brand.properties"/>
<stringbundle id="bundle_messenger" src="chrome://messenger/locale/messenger.properties"/>

<commandset id="mailCommands">

  <command id="cmd_quitApplication" oncommand="goQuitApplication(event)"/>
  <command id="cmd_CustomizeMailToolbar"
           oncommand="CustomizeMailToolbar('mail-toolbox', 'CustomizeMailToolbar')"/>

  <commandset id="mailFileMenuItems"
              commandupdater="true"
              events="create-menu-file"
              oncommandupdate="goUpdateMailMenuItems(this)">
      <command id="cmd_newFolder" oncommand="goDoCommand('cmd_newFolder')" disabled="true"/>
      <command id="cmd_newVirtualFolder" oncommand="goDoCommand('cmd_newVirtualFolder')" disabled="true"/>
      <command id="cmd_getNewMessages" oncommand="goDoCommand('cmd_getNewMessages')" disabled="true"/>
      <command id="cmd_open" oncommand="goDoCommand('cmd_open')"/>

      <command id="cmd_emptyTrash" oncommand="goDoCommand('cmd_emptyTrash')" disabled="true"/>
      <command id="cmd_compactFolder" oncommand="goDoCommand('cmd_compactFolder')" disabled="true"/>
      <command id="cmd_print" oncommand="goDoCommand('cmd_print')" disabled="true"/>
      <command id="cmd_saveAsFile" oncommand="goDoCommand('cmd_saveAsFile')" disabled="true"/>
      <command id="cmd_saveAsTemplate" oncommand="goDoCommand('cmd_saveAsTemplate')" disabled="true"/>
      <command id="cmd_getNextNMessages" oncommand="goDoCommand('cmd_getNextNMessages')" disabled="true"/>
      <command id="cmd_deleteFolder" oncommand="goDoCommand('cmd_deleteFolder')"/>
      <command id="cmd_renameFolder" oncommand="goDoCommand('cmd_renameFolder')" />
      <command id="cmd_sendUnsentMsgs" oncommand="goDoCommand('cmd_sendUnsentMsgs')" />
      <command id="cmd_subscribe" oncommand="goDoCommand('cmd_subscribe')" disabled="true"/>
      <command id="cmd_synchronizeOffline" oncommand="goDoCommand('cmd_synchronizeOffline')" disabled="true"/>
      <command id="cmd_downloadFlagged" oncommand="goDoCommand('cmd_downloadFlagged')" disabled="true"/>
      <command id="cmd_downloadSelected" oncommand="goDoCommand('cmd_downloadSelected')" disabled="true"/>
      <command id="cmd_settingsOffline" oncommand="goDoCommand('cmd_settingsOffline')" disabled="true"/>
  </commandset>

  <commandset id="mailViewMenuItems"
              commandupdater="true"
              events="create-menu-view"
              oncommandupdate="goUpdateMailMenuItems(this)">
     <command id="cmd_showQuickFilterBar"
              oncommand="goDoCommand('cmd_showQuickFilterBar');"/>
     <command id="cmd_toggleQuickFilterBar"
              oncommand="goDoCommand('cmd_toggleQuickFilterBar');"/>
     <command id="cmd_viewPageSource" oncommand="goDoCommand('cmd_viewPageSource')" disabled="true"/>
     <command id="cmd_setFolderCharset" oncommand="goDoCommand('cmd_setFolderCharset')" />

     <command id="cmd_expandAllThreads" oncommand="goDoCommand('cmd_expandAllThreads')" disabled="true"/>
     <command id="cmd_collapseAllThreads" oncommand="goDoCommand('cmd_collapseAllThreads')" disabled="true"/>
     <command id="cmd_viewClassicMailLayout" oncommand="goDoCommand('cmd_viewClassicMailLayout')" disabled="true"/>
     <command id="cmd_viewWideMailLayout" oncommand="goDoCommand('cmd_viewWideMailLayout')" disabled="true"/>
     <command id="cmd_viewVerticalMailLayout" oncommand="goDoCommand('cmd_viewVerticalMailLayout')" disabled="true"/>
     <command id="cmd_toggleFolderPane" oncommand="goDoCommand('cmd_toggleFolderPane')" disabled="true"/>
     <command id="cmd_toggleThreadPaneHeader" oncommand="goDoCommand('cmd_toggleThreadPaneHeader')" disabled="true"/>
     <command id="cmd_toggleMessagePane" oncommand="goDoCommand('cmd_toggleMessagePane')" disabled="true"/>
     <command id="cmd_viewAllMsgs" oncommand="goDoCommand('cmd_viewAllMsgs')" disabled="true"/>
     <command id="cmd_viewUnreadMsgs" oncommand="goDoCommand('cmd_viewUnreadMsgs')" disabled="true"/>
     <command id="cmd_viewThreadsWithUnread" oncommand="goDoCommand('cmd_viewThreadsWithUnread')" disabled="true"/>
     <command id="cmd_viewWatchedThreadsWithUnread" oncommand="goDoCommand('cmd_viewWatchedThreadsWithUnread')" disabled="true"/>
     <command id="cmd_viewIgnoredThreads" oncommand="goDoCommand('cmd_viewIgnoredThreads')" disabled="true"/>
     <commandset id="viewZoomCommands"
                 commandupdater="true"
                 events="create-menu-view"
                 oncommandupdate="goUpdateMailMenuItems(this);">
       <command id="cmd_fullZoomReduce"
                oncommand="goDoCommand('cmd_fullZoomReduce');"/>
       <command id="cmd_fullZoomEnlarge"
                oncommand="goDoCommand('cmd_fullZoomEnlarge');"/>
       <command id="cmd_fullZoomReset"
                oncommand="goDoCommand('cmd_fullZoomReset');"/>
       <command id="cmd_fullZoomToggle"
                oncommand="goDoCommand('cmd_fullZoomToggle');"
                checked="false"/>
     </commandset>
  </commandset>

  <commandset id="mailEditMenuItems"
              commandupdater="true"
              events="create-menu-edit"
              oncommandupdate="goUpdateMailMenuItems(this)">

    <command id="cmd_undo"
           oncommand="goDoCommand('cmd_undo')"
           disabled="true"
           valueDeleteMsg="&undoDeleteMsgCmd.label;"
           valueMoveMsg="&undoMoveMsgCmd.label;"
           valueCopyMsg="&undoCopyMsgCmd.label;"
           valueUnmarkAllMsgs="&undoMarkAllCmd.label;"
           valueDefault="&undoDefaultCmd.label;"/>
    <command id="cmd_redo"
           oncommand="goDoCommand('cmd_redo')"
           disabled="true"
           valueDeleteMsg="&redoDeleteMsgCmd.label;"
           valueMoveMsg="&redoMoveMsgCmd.label;"
           valueCopyMsg="&redoCopyMsgCmd.label;"
           valueUnmarkAllMsgs="&redoMarkAllCmd.label;"
           valueDefault="&redoDefaultCmd.label;"/>
    <command id="cmd_cut"
           oncommand="goDoCommand('cmd_cut')"
           disabled="true"/>
    <command id="cmd_copy"
           oncommand="goDoCommand('cmd_copy')"
           disabled="true"/>
    <command id="cmd_paste"
           oncommand="goDoCommand('cmd_paste')"
           disabled="true"/>
    <command id="cmd_delete"
             oncommand="goDoCommand('cmd_delete')"
             disabled="true"/>
    <command id="cmd_cancel" oncommand="goDoCommand('cmd_cancel')"/>
    <command id="cmd_selectThread" oncommand="goDoCommand('cmd_selectThread')"/>
    <command id="cmd_selectFlagged" oncommand="goDoCommand('cmd_selectFlagged')"/>
    <command id="cmd_toggleFavoriteFolder" oncommand="goDoCommand('cmd_toggleFavoriteFolder')"/>
    <command id="cmd_properties" oncommand="goDoCommand('cmd_properties')"/>
    <command id="cmd_find" oncommand="goDoCommand('cmd_find')" disabled="true"/>
    <command id="cmd_findAgain" oncommand="goDoCommand('cmd_findAgain')" disabled="true"/>
    <command id="cmd_findPrevious" oncommand="goDoCommand('cmd_findPrevious')"
             disabled="true"/>
    <command id="cmd_searchMessages" oncommand="goDoCommand('cmd_searchMessages');"/>
    <!-- Stop/abort current network activities. -->
    <command id="cmd_stop" oncommand="goDoCommand('cmd_stop')"/>
    <command id="cmd_reload" oncommand="goDoCommand('cmd_reload')"/>
  </commandset>

  <commandset id="mailEditContextMenuItems">
    <command id="cmd_copyLink" oncommand="goDoCommand('cmd_copyLink')" disabled="false"/>
    <command id="cmd_copyImage" oncommand="goCopyImage()" disabled="false"/>
  </commandset>

  <commandset id="mailGoMenuItems"
              commandupdater="true"
              events="create-menu-go"
              oncommandupdate="goUpdateMailMenuItems(this)">

    <command id="cmd_nextMsg" oncommand="goDoCommand('cmd_nextMsg')" disabled="true"/>
    <command id="cmd_nextUnreadMsg" oncommand="goDoCommand('cmd_nextUnreadMsg')" disabled="true"/>
    <command id="cmd_nextFlaggedMsg" oncommand="goDoCommand('cmd_nextFlaggedMsg')" disabled="true"/>
    <command id="cmd_nextUnreadThread" oncommand="goDoCommand('cmd_nextUnreadThread')" disabled="true"/>
    <command id="cmd_previousMsg" oncommand="goDoCommand('cmd_previousMsg')" disabled="true"/>
    <command id="cmd_previousUnreadMsg" oncommand="goDoCommand('cmd_previousUnreadMsg')" disabled="true"/>
    <command id="cmd_previousFlaggedMsg" oncommand="goDoCommand('cmd_previousFlaggedMsg')" disabled="true"/>
    <command id="cmd_goStartPage" oncommand="goDoCommand('cmd_goStartPage');"/>
    <command id="cmd_undoCloseTab" oncommand="goDoCommand('cmd_undoCloseTab');"/>
    <command id="cmd_goForward" oncommand="goDoCommand('cmd_goForward')" disabled="true"/>
    <command id="cmd_goBack" oncommand="goDoCommand('cmd_goBack')" disabled="true"/>
    <command id="cmd_goFolder" oncommand="" disabled="true"/>
    <command id="cmd_chat" oncommand="goDoCommand('cmd_chat')" disabled="true"/>
  </commandset>

  <commandset id="mailMessageMenuItems"
              commandupdater="true"
              events="create-menu-message"
              oncommandupdate="goUpdateMailMenuItems(this)">
    <command id="cmd_archive" oncommand="goDoCommand('cmd_archive')"/>
    <command id="cmd_newMessage" oncommand="goDoCommand('cmd_newMessage', event)"/>
    <command id="cmd_reply" oncommand="goDoCommand('cmd_reply', event)"/>
    <command id="cmd_replySender" oncommand="goDoCommand('cmd_replySender', event)"/>
    <command id="cmd_replyGroup" oncommand="goDoCommand('cmd_replyGroup', event)"/>
    <command id="cmd_replyall" oncommand="goDoCommand('cmd_replyall', event)"/>
    <command id="cmd_replylist" oncommand="goDoCommand('cmd_replylist', event)"/>
    <command id="cmd_forward" oncommand="goDoCommand('cmd_forward', event);"/>
    <command id="cmd_forwardInline" oncommand="goDoCommand('cmd_forwardInline', event)"/>
    <command id="cmd_forwardAttachment" oncommand="goDoCommand('cmd_forwardAttachment', event);"/>
    <command id="cmd_redirect" oncommand="goDoCommand('cmd_redirect', event)"/>
    <command id="cmd_editAsNew" oncommand="goDoCommand('cmd_editAsNew', event)"/>
    <command id="cmd_editDraftMsg" oncommand="goDoCommand('cmd_editDraftMsg', event)"/>
    <command id="cmd_newMsgFromTemplate" oncommand="goDoCommand('cmd_newMsgFromTemplate', event)"/>
    <command id="cmd_editTemplateMsg" oncommand="goDoCommand('cmd_editTemplateMsg', event)"/>
    <command id="cmd_openMessage" oncommand="goDoCommand('cmd_openMessage')"/>
    <command id="cmd_openConversation" oncommand="goDoCommand('cmd_openConversation')"/>
    <command id="cmd_moveToFolderAgain" oncommand="goDoCommand('cmd_moveToFolderAgain')"/>
    <command id="cmd_createFilterFromMenu" oncommand="goDoCommand('cmd_createFilterFromMenu')"/>
    <command id="cmd_killThread" oncommand="goDoCommand('cmd_killThread')"/>
    <command id="cmd_killSubthread" oncommand="goDoCommand('cmd_killSubthread')"/>
    <command id="cmd_watchThread" oncommand="goDoCommand('cmd_watchThread')"/>
  </commandset>

  <commandset id="mailGetMsgMenuItems"
              commandupdater="true"
              events="create-menu-getMsgToolbar,create-menu-file"
              oncommandupdate="goUpdateMailMenuItems(this)">

      <command id="cmd_getMsgsForAuthAccounts"
               oncommand="goDoCommand('cmd_getMsgsForAuthAccounts'); event.stopPropagation()"
               disabled="true"/>
  </commandset>

  <commandset id="mailMarkMenuItems"
              commandupdater="true"
              events="create-menu-mark"
              oncommandupdate="goUpdateMailMenuItems(this)">
      <command id="cmd_mark"/>
      <command id="cmd_tag"/>
      <command id="cmd_toggleRead" oncommand="goDoCommand('cmd_toggleRead'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAsRead" oncommand="goDoCommand('cmd_markAsRead'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAsUnread" oncommand="goDoCommand('cmd_markAsUnread'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAllRead" oncommand="goDoCommand('cmd_markAllRead'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markThreadAsRead" oncommand="goDoCommand('cmd_markThreadAsRead'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markReadByDate" oncommand="goDoCommand('cmd_markReadByDate');" disabled="true"/>
      <command id="cmd_markAsFlagged" oncommand="goDoCommand('cmd_markAsFlagged'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAsJunk" oncommand="goDoCommand('cmd_markAsJunk'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_markAsNotJunk" oncommand="goDoCommand('cmd_markAsNotJunk'); event.stopPropagation()" disabled="true"/>
      <command id="cmd_recalculateJunkScore" oncommand="goDoCommand('cmd_recalculateJunkScore');" disabled="true"/>
      <command id="cmd_viewAllHeader" oncommand="goDoCommand('cmd_viewAllHeader');" disabled="true"/>
      <command id="cmd_viewNormalHeader" oncommand="goDoCommand('cmd_viewNormalHeader');" disabled="true"/>
  </commandset>

  <commandset id="mailTagMenuItems"
              commandupdater="true"
              events="create-menu-tag"
              oncommandupdate="goUpdateMailMenuItems(this);">

      <command id="cmd_addTag" oncommand="goDoCommand('cmd_addTag'); event.stopPropagation();"/>
      <command id="cmd_manageTags" oncommand="goDoCommand('cmd_manageTags'); event.stopPropagation();"/>
      <command id="cmd_removeTags" oncommand="goDoCommand('cmd_removeTags'); event.stopPropagation();"/>
  </commandset>

  <commandset id="mailToolsMenuItems"
              commandupdater="true"
              events="create-menu-tasks"
              oncommandupdate="goUpdateMailMenuItems(this);">
    <command id="cmd_applyFilters" oncommand="goDoCommand('cmd_applyFilters');" disabled="true"/>
    <command id="cmd_applyFiltersToSelection"
             oncommand="goDoCommand('cmd_applyFiltersToSelection');"
             disabled="true"
             valueSelection="&filtersApplyToSelection.label;"
             valueSelectionAccessKey="&filtersApplyToSelection.accesskey;"
             valueMessage="&filtersApplyToMessage.label;"
             valueMessageAccessKey="&filtersApplyToMessage.accesskey;"/>
    <command id="cmd_runJunkControls" oncommand="goDoCommand('cmd_runJunkControls');" disabled="true"/>
    <command id="cmd_deleteJunk" oncommand="goDoCommand('cmd_deleteJunk');" disabled="true"/>
  </commandset>

  <commandset id="mailChatMenuItems"
              commandupdater="true"
              events="create-menu-tag">
       <command id="cmd_joinChat" oncommand="chatHandler.joinChat();" disabled="true"/>
       <command id="cmd_chatStatus" oncommand="chatHandler.setStatusMenupopupCommand(event);" disabled="true"/>
       <command id="cmd_addChatBuddy" oncommand="chatHandler.addBuddy();" disabled="true"/>
  </commandset>

  <commandset id="mailSearchMenuItems"/>
  <commandset id="globalEditMenuItems"
              commandupdater="true"
              events="create-menu-edit"
              oncommandupdate="goUpdateGlobalEditMenuItems()"/>
  <commandset id="selectEditMenuItems"
              commandupdater="true"
              events="create-menu-edit"
              oncommandupdate="goUpdateSelectEditMenuItems()"/>
  <commandset id="undoEditMenuItems"
              commandupdater="true"
              events="undo"
              oncommandupdate="goUpdateUndoEditMenuItems()"/>
  <commandset id="clipboardEditMenuItems"
              commandupdater="true"
              events="clipboard"
              oncommandupdate="goUpdatePasteMenuItems()"/>
  <commandset id="webSearchItems"/>
  <commandset id="browserCommands">
    <!-- Browsing back and forth inside the add-on manager and on content tabs -->
    <command id="Browser:Back"
             oncommand="goDoCommand('Browser:Back');"/>
    <command id="Browser:Forward"
             oncommand="goDoCommand('Browser:Forward');"/>
  </commandset>
  <commandset id="attachmentCommands">
    <command id="cmd_openAllAttachments"
             oncommand="goDoCommand('cmd_openAllAttachments');"/>
    <command id="cmd_saveAllAttachments"
             oncommand="goDoCommand('cmd_saveAllAttachments');"/>
    <command id="cmd_detachAllAttachments"
             oncommand="goDoCommand('cmd_detachAllAttachments');"/>
    <command id="cmd_deleteAllAttachments"
             oncommand="goDoCommand('cmd_deleteAllAttachments');"/>
  </commandset>
  <commandset id="tasksCommands">
    <command id="cmd_newMessage" oncommand="goOpenNewMessage();"/>
    <command id="cmd_newCard" oncommand="openNewCardDialog()"/>
  </commandset>
  <command id="cmd_close" oncommand="CloseTabOrWindow();"/>
  <command id="cmd_CustomizeMailToolbar"
           oncommand="customizeMailToolbarForTabType()"/>
</commandset>


<commandset id="calendar_commands"
            commandupdater="true"
            events="calendar_commands"
            oncommandupdate="calendarController.updateCommands()">
  <command id="agenda_delete_event_command" oncommand="TodayPane.agenda.deleteSelectedItem();"/>
  <command id="agenda_edit_event_command" oncommand="TodayPane.agenda.editSelectedItem();"/>
  <command id="switch2calendar"
           oncommand="document.getElementById('tabmail').openTab('calendar')"/>
  <command id="switch2task"
           oncommand="document.getElementById('tabmail').openTab('tasks')"/>
  <command id="new_calendar_tab"
           oncommand="document.getElementById('tabmail').openTab('calendar')"/>
  <command id="new_task_tab"
           oncommand="document.getElementById('tabmail').openTab('tasks')"/>
  <command id="calendar_go_to_today_command"
           observes="calendar_mode_calendar"
           oncommand="document.getElementById('tabmail').openTab('calendar'); goToDate(cal.dtz.now())"/>
  <command id="calendar_new_calendar_command" oncommand="goDoCommand('calendar_new_calendar_command')"/>
  <command id="calendar_delete_calendar_command" oncommand="goDoCommand('calendar_delete_calendar_command')"/>
  <command id="calendar_edit_calendar_command" oncommand="goDoCommand('calendar_edit_calendar_command')"/>

  <command id="calendar_new_event_command" oncommand="goDoCommand('calendar_new_event_command')"/>
  <command id="calendar_new_event_context_command" oncommand="goDoCommand('calendar_new_event_context_command')"/>
  <command id="calendar_new_event_todaypane_command" oncommand="goDoCommand('calendar_new_event_todaypane_command')"/>
  <command id="calendar_modify_event_command" oncommand="goDoCommand('calendar_modify_event_command')"/>
  <command id="calendar_view_event_command" oncommand="goDoCommand('calendar_view_event_command')"/>
  <command id="calendar_delete_event_command" oncommand="goDoCommand('calendar_delete_event_command')"/>

  <command id="calendar_new_todo_command" oncommand="goDoCommand('calendar_new_todo_command')"/>
  <command id="calendar_new_todo_context_command" oncommand="goDoCommand('calendar_new_todo_context_command')"/>
  <command id="calendar_new_todo_todaypane_command" oncommand="goDoCommand('calendar_new_todo_todaypane_command')"/>
  <command id="calendar_modify_todo_command" oncommand="goDoCommand('calendar_modify_todo_command')"/>
  <command id="calendar_modify_todo_todaypane_command" oncommand="goDoCommand('calendar_modify_todo_todaypane_command')"/>
  <command id="calendar_delete_todo_command" oncommand="goDoCommand('calendar_delete_todo_command')"/>

  <command id="calendar_modify_focused_item_command" oncommand="goDoCommand('calendar_modify_focused_item_command')"/>
  <command id="calendar_delete_focused_item_command" oncommand="goDoCommand('calendar_delete_focused_item_command')"/>

  <command id="calendar_import_command" oncommand="goDoCommand('calendar_import_command')"/>
  <command id="calendar_export_command" oncommand="goDoCommand('calendar_export_command')"/>
  <command id="calendar_export_selection_command" oncommand="goDoCommand('calendar_export_selection_command')"/>

  <command id="calendar_publish_selected_calendar_command" oncommand="goDoCommand('calendar_publish_selected_calendar_command')"/>
  <command id="calendar_publish_calendar_command" oncommand="goDoCommand('calendar_publish_calendar_command')"/>
  <command id="calendar_publish_selected_events_command" oncommand="goDoCommand('calendar_publish_selected_events_command')"/>

  <command id="calendar_reload_remote_calendars" oncommand="goDoCommand('calendar_reload_remote_calendars')"/>

  <command id="calendar_show_unifinder_command" oncommand="goDoCommand('calendar_show_unifinder_command')"/>
  <!-- The dash instead of the underscore is intended. the 'xxx-view' part should be the id of the view in the deck -->
  <command id="calendar_day-view_command" oncommand="goDoCommand('calendar_day-view_command')"/>
  <command id="calendar_week-view_command" oncommand="goDoCommand('calendar_week-view_command')"/>
  <command id="calendar_multiweek-view_command" oncommand="goDoCommand('calendar_multiweek-view_command')"/>
  <command id="calendar_month-view_command" oncommand="goDoCommand('calendar_month-view_command')"/>
  <command id="calendar_task_category_command"/>
  <command id="calendar_toggle_completed_command" oncommand="toggleCompleted(event)"/>
  <command id="calendar_percentComplete-0_command" oncommand="contextChangeTaskProgress(0)"/>
  <command id="calendar_percentComplete-25_command" oncommand="contextChangeTaskProgress(25)"/>
  <command id="calendar_percentComplete-50_command" oncommand="contextChangeTaskProgress(50)"/>
  <command id="calendar_percentComplete-75_command" oncommand="contextChangeTaskProgress(75)"/>
  <command id="calendar_percentComplete-100_command" oncommand="contextChangeTaskProgress(100)"/>
  <command id="calendar_priority-0_command" oncommand="contextChangeTaskPriority(0)"/>
  <command id="calendar_priority-9_command" oncommand="contextChangeTaskPriority(9)"/>
  <command id="calendar_priority-5_command" oncommand="contextChangeTaskPriority(5)"/>
  <command id="calendar_priority-1_command" oncommand="contextChangeTaskPriority(1)"/>
  <command id="calendar_general-priority_command" oncommand="goDoCommand('calendar_general-priority_command')"/>
  <command id="calendar_general-progress_command" oncommand="goDoCommand('calendar_general-progress_command')"/>
  <command id="calendar_general-postpone_command"/>
  <command id="calendar_postpone-1hour_command" oncommand="contextPostponeTask('PT1H')"/>
  <command id="calendar_postpone-1day_command" oncommand="contextPostponeTask('P1D')"/>
  <command id="calendar_postpone-1week_command" oncommand="contextPostponeTask('P1W')"/>
  <command id="calendar_toggle_orientation_command" persist="checked" oncommand="goDoCommand('calendar_toggle_orientation_command')"/>
  <command id="calendar_toggle_workdays_only_command" persist="checked" oncommand="goDoCommand('calendar_toggle_workdays_only_command')"/>
  <command id="calendar_toggle_tasks_in_view_command" persist="checked" oncommand="toggleTasksInView()"/>
  <command id="calendar_toggle_show_completed_in_view_command" persist="checked" oncommand="toggleShowCompletedInView()"/>
  <command id="calendar_toggle_calendarsidebar_command" oncommand="togglePaneSplitter('calsidebar_splitter')"/>
  <command id="calendar_toggle_minimonthpane_command" oncommand="document.getElementById('minimonth-pane').togglePane(event)"/>
  <command id="calendar_toggle_calendarlist_command" oncommand="document.getElementById('calendar-list-pane').togglePane(event)"/>
  <command id="calendar_task_filter_command" oncommand="taskViewUpdate(event.target.getAttribute('value'))"/>
  <command id="calendar_toggle_filter_command" oncommand="document.getElementById('task-filter-pane').togglePane(event)"/>
  <command id="calendar_view_next_command" oncommand="goDoCommand('calendar_view_next_command')"/>
  <command id="calendar_view_today_command" oncommand="currentView().moveView()"/>
  <command id="calendar_view_prev_command" oncommand="goDoCommand('calendar_view_prev_command')"/>

  <!-- this is a pseudo-command that is disabled when in calendar mode -->
  <command id="calendar_in_foreground"/>
  <!-- this is a pseudo-command that is disabled when not in calendar mode -->
  <command id="calendar_in_background"/>

  <!-- These commands are enabled when in calendar or task mode, respectively -->
  <command id="calendar_mode_calendar"/>
  <command id="calendar_mode_task"/>

  <command id="calendar_attendance_command"/>

  <command id="calendar_toggle_todaypane_command" oncommand="TodayPane.toggleVisibility(event)"/>
</commandset>

<keyset id="browserKeys">
  <key id="key_goBackKb" keycode="VK_LEFT" oncommand="goDoCommand('Browser:Back');" modifiers="alt" />
  <key id="key_goForwardKb" keycode="VK_RIGHT" oncommand="goDoCommand('Browser:Forward');" modifiers="alt" />
</keyset>
<keyset id="mailKeys">
  <!-- Tab/F6 Keys -->
  <key keycode="VK_TAB" oncommand="SwitchPaneFocus(event);" modifiers="control,shift"/>
  <key keycode="VK_TAB" oncommand="SwitchPaneFocus(event);" modifiers="control"/>
  <key keycode="VK_F6" oncommand="SwitchPaneFocus(event);" modifiers="control,shift"/>
  <key keycode="VK_F6" oncommand="SwitchPaneFocus(event);" modifiers="control"/>
  <key keycode="VK_F6" oncommand="SwitchPaneFocus(event);" modifiers="shift"/>
  <key keycode="VK_F6" oncommand="SwitchPaneFocus(event);"/>


  <key id="space" key=" " modifiers="shift any" oncommand="goDoCommand('cmd_space', event);"/>

  <!-- File Menu -->
  <key id="key_close" key="&closeCmd.key;" command="cmd_close" modifiers="accel"/>
  <key id="key_close2" keycode="VK_F4" modifiers="accel" command="cmd_close"/>
  <key id="key_renameFolder" keycode="&renameFolder.key;" oncommand="goDoCommand('cmd_renameFolder')"/>
  <key id="key_quitApplication" data-l10n-id="quit-app-shortcut"
       modifiers="accel,shift"
       command="cmd_quitApplication"
       reserved="true"/>
  <!-- Edit Menu -->
  <key id="key_undo" data-l10n-id="text-action-undo-shortcut" modifiers="accel" internal="true"/>
  <key id="key_redo"
       data-l10n-id="text-action-redo-shortcut" modifiers="accel"
       internal="true"/>
  <key id="key_cut" data-l10n-id="text-action-cut-shortcut" modifiers="accel" internal="true"/>
  <key id="key_copy" data-l10n-id="text-action-copy-shortcut" modifiers="accel" internal="true"/>
  <key id="key_paste" data-l10n-id="text-action-paste-shortcut" modifiers="accel" internal="true"/>
  <key id="key_delete" keycode="VK_DELETE"
       oncommand="goDoCommand('cmd_delete');"/>
  <key id="cmd_shiftDelete" keycode="VK_DELETE"
       oncommand="goDoCommand('cmd_shiftDelete');" modifiers="shift"/>
  <key id="key_selectAll" data-l10n-id="text-action-select-all-shortcut" modifiers="accel" internal="true"/>
  <key id="key_selectThread" key="&selectThreadCmd.key;"             oncommand="goDoCommand('cmd_selectThread');" modifiers="accel, shift"/>

  <key id="key_toggleRead" key="&toggleReadCmd.key;"                 oncommand="goDoCommand('cmd_toggleRead');"/>
  <key id="key_toggleFlagged" key="&markStarredCmd.key;"             oncommand="goDoCommand('cmd_markAsFlagged');"/>
  <key id="key_markJunk" key="&markAsJunkCmd.key;"                   oncommand="goDoCommand('cmd_markAsJunk');"/>
  <key id="key_markNotJunk" key="&markAsNotJunkCmd.key;"             oncommand="goDoCommand('cmd_markAsNotJunk');"
       modifiers="shift"/>

  <key id="key_markAllRead" key="&markAllReadCmd.key;"
       oncommand="goDoCommand('cmd_markAllRead');" modifiers="shift"/>

  <key id="key_markThreadAsRead" key="&markThreadAsReadCmd.key;"     oncommand="goDoCommand('cmd_markThreadAsRead')"/>
  <key id="key_markReadByDate" key="&markReadByDateCmd.key;"         oncommand="goDoCommand('cmd_markReadByDate')"/>
  <key id="key_nextMsg" key="&nextMsgCmd.key;"                       oncommand="goDoCommand('cmd_nextMsg')"/>
  <key id="key_nextUnreadMsg" key="&nextUnreadMsgCmd.key;"           oncommand="goDoCommand('cmd_nextUnreadMsg')"/>
  <key id="key_expandAllThreads" key="&expandAllThreadsCmd.key;"     oncommand="goDoCommand('cmd_expandAllThreads')"/>
  <key key="&expandAllThreadsCmd.key;" modifiers="shift"             oncommand="goDoCommand('cmd_expandAllThreads')"/>
  <key id="key_collapseAllThreads" key="&collapseAllThreadsCmd.key;" oncommand="goDoCommand('cmd_collapseAllThreads')"/>
  <key key="&collapseAllThreadsCmd.key;" modifiers="shift"           oncommand="goDoCommand('cmd_collapseAllThreads')"/>
  <key id="key_nextUnreadThread" key="&nextUnreadThread.key;"        oncommand="goDoCommand('cmd_nextUnreadThread')"/>
  <key id="key_previousMsg" key="&prevMsgCmd.key;"                   oncommand="goDoCommand('cmd_previousMsg')"/>
  <key id="key_previousUnreadMsg" key="&prevUnreadMsgCmd.key;"       oncommand="goDoCommand('cmd_previousUnreadMsg')"/>
  <key id="key_archive" key="&archiveMsgCmd.key;"                    oncommand="goDoCommand('cmd_archive')"/>
  <key id="key_goForward" key="&goForwardCmd.commandKey;"            oncommand="goDoCommand('cmd_goForward')"/>
  <key id="key_goBack" key="&goBackCmd.commandKey;"                  oncommand="goDoCommand('cmd_goBack')"/>
  <key id="key_goStartPage" keycode="VK_HOME"                        oncommand="goDoCommand('cmd_goStartPage')" modifiers="alt"/>
  <key id="key_undoCloseTab" key="&undoCloseTabCmd.commandkey;"      oncommand="goDoCommand('cmd_undoCloseTab')" modifiers="accel, shift"/>
  <key id="key_reply" key="&replyMsgCmd.key;"                        oncommand="goDoCommand('cmd_reply')" modifiers="accel"/>
  <key id="key_replyall" key="&replyToAllMsgCmd.key;"                oncommand="goDoCommand('cmd_replyall')" modifiers="accel, shift"/>
  <key id="key_replylist" key="&replyToListMsgCmd.key;"              oncommand="goDoCommand('cmd_replylist')" modifiers="accel, shift"/>
  <key id="key_forward" key="&forwardMsgCmd.key;"                    oncommand="goDoCommand('cmd_forward')" modifiers="accel"/>
  <key id="key_editAsNew" key="&editAsNewMsgCmd.key;"                oncommand="goDoCommand('cmd_editAsNew')" modifiers="accel"/>
  <key id="key_newMsgFromTemplate" keycode="&newMsgFromTemplateCmd.keycode;" internal="true"/><!-- for display on menus only -->
  <key id="key_watchThread" key="&watchThreadMenu.key;"              oncommand="goDoCommand('cmd_watchThread')" />
  <key id="key_killThread" key="&killThreadMenu.key;"                oncommand="goDoCommand('cmd_killThread')" />
  <key id="key_killSubthread" key="&killSubthreadMenu.key;"          oncommand="goDoCommand('cmd_killSubthread')" modifiers="shift" />
  <key id="key_openMessage" key="&openMessageWindowCmd.key;"         oncommand="goDoCommand('cmd_openMessage')" modifiers="accel"/>
  <key id="key_openConversation" key="&openInConversationCmd.key;"   oncommand="goDoCommand('cmd_openConversation')" modifiers="accel, shift"/>
  <key id="key_moveToFolderAgain" key="&moveToFolderAgainCmd.key;"   oncommand="goDoCommand('cmd_moveToFolderAgain')" modifiers="accel, shift"/>
  <key id="key_print" key="&printCmd.key;"                           oncommand="goDoCommand('cmd_print')" modifiers="accel"/>
  <key id="key_saveAsFile" key="&saveAsFileCmd.key;"                 oncommand="goDoCommand('cmd_saveAsFile')" modifiers="accel"/>
  <key id="key_viewPageSource" key="&pageSourceCmd.key;"             oncommand="goDoCommand('cmd_viewPageSource')" modifiers="accel"/>
  <key id="key_getNewMessages" keycode="VK_F5"
       oncommand="goDoCommand('cmd_getNewMessages');"/>
  <key id="key_getAllNewMessages" keycode="VK_F5" modifiers="shift"
       oncommand="goDoCommand('cmd_getMsgsForAuthAccounts');"/>
  <key id="key_find" key="&findCmd.key;"  oncommand="goDoCommand('cmd_find')" modifiers="accel"/>
  <key id="key_findAgain" key="&findAgainCmd.key;"   oncommand="goDoCommand('cmd_findAgain')" modifiers="accel"/>
  <key id="key_findPrev"  key="&findPrevCmd.key;"    oncommand="goDoCommand('cmd_findPrevious')"  modifiers="accel, shift"/>
  <key keycode="&findAgainCmd.key2;"   oncommand="goDoCommand('cmd_findAgain')"/>
  <key keycode="&findPrevCmd.key2;"    oncommand="goDoCommand('cmd_findPrevious')"  modifiers="shift"/>
  <key id="key_quickSearchFocus" key="&quickSearchCmd.key;"  oncommand="QuickSearchFocus()" modifiers="accel"/>

  <keyset id="viewZoomKeys">
    <key id="key_fullZoomReduce"  key="&fullZoomReduceCmd.commandkey;"
         command="cmd_fullZoomReduce"  modifiers="accel"/>
    <key                          key="&fullZoomReduceCmd.commandkey2;"
         command="cmd_fullZoomReduce"  modifiers="accel"/>
    <key id="key_fullZoomEnlarge" key="&fullZoomEnlargeCmd.commandkey;"
         command="cmd_fullZoomEnlarge" modifiers="accel"/>
    <key                          key="&fullZoomEnlargeCmd.commandkey2;"
         command="cmd_fullZoomEnlarge" modifiers="accel"/>
    <key                          key="&fullZoomEnlargeCmd.commandkey3;"
         command="cmd_fullZoomEnlarge" modifiers="accel"/>
    <key id="key_fullZoomReset"   key="&fullZoomResetCmd.commandkey;"
         command="cmd_fullZoomReset"   modifiers="accel"/>
    <key                          key="&fullZoomResetCmd.commandkey2;"
         command="cmd_fullZoomReset"   modifiers="accel"/>
  </keyset>

  <!-- View Toggle Keys (F8) -->
  <key id="key_toggleMessagePane" keycode="VK_F8" oncommand="goDoCommand('cmd_toggleMessagePane');"/>

  <!-- Tag Keys -->
  <!-- Includes both shifted and not, for Azerty and other layouts where the
       numeric keys are shifted. -->
  <key id="key_tag0" key="&tagCmd0.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_removeTags');"/>
  <key id="key_tag1" key="&tagCmd1.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag1');"/>
  <key id="key_tag2" key="&tagCmd2.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag2');"/>
  <key id="key_tag3" key="&tagCmd3.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag3');"/>
  <key id="key_tag4" key="&tagCmd4.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag4');"/>
  <key id="key_tag5" key="&tagCmd5.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag5');"/>
  <key id="key_tag6" key="&tagCmd6.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag6');"/>
  <key id="key_tag7" key="&tagCmd7.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag7');"/>
  <key id="key_tag8" key="&tagCmd8.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag8');"/>
  <key id="key_tag9" key="&tagCmd9.key;" modifiers="shift any"
       oncommand="goDoCommand('cmd_tag9');"/>

  <!-- Tools Keys -->
  <key id="key_searchMail"
       key="&searchMailCmd.key;"
       modifiers="accel,shift"
       command="cmd_searchMessages"/>
  <key id="key_errorConsole"
       key="&errorConsoleCmd.commandkey;"
       oncommand="toJavaScriptConsole();"
       modifiers="accel,shift"/>
  <key id="key_devtoolsToolbox"
       key="&devToolboxCmd.commandkey;"
       modifiers="accel,shift"
       oncommand="BrowserToolboxLauncher.init();"/>
  <key id="key_sanitizeHistory"
       keycode="VK_DELETE"
       oncommand="toSanitize();"
       modifiers="accel,shift"/>
  <key id="key_addressbook"
       key="&addressBookCmd.key;"
       modifiers="accel, shift"
       oncommand="toAddressBook();"/>
  <key id="key_savedFiles"
       key="&savedFiles.key;"
       modifiers="accel"
       oncommand="openSavedFilesWnd();"/>

  <key id="key_qfb_show"
       modifiers="accel,shift"
       data-l10n-id="quick-filter-bar-show"
       command="cmd_showQuickFilterBar"/>

<key id="key_mail" oncommand="focusOnMail(0, event);" key="1" modifiers="accel"/>
<key id="key_selectTab2" oncommand="focusOnMail(1, event);" key="2" modifiers="accel"/>
<key id="key_selectTab3" oncommand="focusOnMail(2, event);" key="3" modifiers="accel"/>
<key id="key_selectTab4" oncommand="focusOnMail(3, event);" key="4" modifiers="accel"/>
<key id="key_selectTab5" oncommand="focusOnMail(4, event);" key="5" modifiers="accel"/>
<key id="key_selectTab6" oncommand="focusOnMail(5, event);" key="6" modifiers="accel"/>
<key id="key_selectTab7" oncommand="focusOnMail(6, event);" key="7" modifiers="accel"/>
<key id="key_selectTab8" oncommand="focusOnMail(7, event);" key="8" modifiers="accel"/>
<key id="key_selectLastTab" oncommand="focusOnMail(-1, event);" key="9" modifiers="accel"/>

  <key id="key_openHelp"
       oncommand="openSupportURL();"
       keycode="&productHelp.commandkey;"/>
  <keyset id="tasksKeys">
    <key id="key_newMessage"  key="&newMessageCmd.key;" command="cmd_newMessage"
         modifiers="accel"/>
    <key id="key_newMessage2" key="&newMessageCmd2.key;" command="cmd_newMessage"
         modifiers="accel"/>
  </keyset>
</keyset>


<keyset id="calendar-keys">
  <key id="todaypanekey" command="calendar_toggle_todaypane_command" keycode="VK_F11"/>
  <key id="calendar-new-event-key" key="&lightning.keys.event.new;" modifiers="accel" command="calendar_new_event_command"/>
  <key id="calendar-new-todo-key" key="&lightning.keys.todo.new;" modifiers="accel" command="calendar_new_todo_command"/>
  <key id="calendar-go-to-today-key" keycode="VK_END"
      command="calendar_go_to_today_command" modifiers="alt"/>
  <key id="calendar-delete-item-key" keycode="VK_DELETE"
      command="calendar_delete_event_command"/>
  <key id="calendar-delete-todo-key" keycode="VK_DELETE"
      command="calendar_delete_todo_command"/>
</keyset>

<popupset id="mainPopupSet">

  <menupopup id="browserContext"
             onpopupshowing="return browserContextOnShowing(event);"
             onpopuphiding="browserContextOnHiding(event);">
    <!-- Browser navigation -->
    <menugroup id="context-navigation">
        <menuitem id="browserContext-back"
                  data-l10n-id="content-tab-menu-back"
                  data-l10n-args='{"shortcut":""}'
                  class="menuitem-iconic"
                  command="Browser:Back"/>
        <menuitem id="browserContext-forward"
                  data-l10n-id="content-tab-menu-forward"
                  data-l10n-args='{"shortcut":""}'
                  class="menuitem-iconic"
                  command="Browser:Forward"/>
        <menuitem id="browserContext-reload"
                  class="menuitem-iconic"
                  tooltip="dynamic-shortcut-tooltip"
                  data-l10n-id="content-tab-menu-reload"
                  command="cmd_reload"/>
        <menuitem id="browserContext-stop"
                  class="menuitem-iconic"
                  tooltip="dynamic-shortcut-tooltip"
                  data-l10n-id="content-tab-menu-stop"
                  command="cmd_stop"/>
    </menugroup>
    <menuseparator id="browserContext-sep-navigation"/>
    <!-- Spellchecking suggestions -->
    <menuitem id="browserContext-spell-no-suggestions"
              disabled="true"
              data-l10n-id="text-action-spell-no-suggestions"/>
    <menuitem id="browserContext-spell-add-to-dictionary"
              data-l10n-id="text-action-spell-add-to-dictionary"
              oncommand="gSpellChecker.addToDictionary();"/>
    <menuitem id="browserContext-spell-undo-add-to-dictionary"
              data-l10n-id="text-action-spell-undo-add-to-dictionary"
              oncommand="gSpellChecker.undoAddToDictionary();" />
    <menuseparator id="browserContext-spell-suggestions-separator"/>

    <menuitem id="browserContext-openInBrowser"
              label="&openInBrowser.label;"
              accesskey="&openInBrowser.accesskey;"
              oncommand="gContextMenu.openInBrowser();"/>
    <menuitem id="browserContext-openLinkInBrowser"
              label="&openLinkInBrowser.label;"
              accesskey="&openLinkInBrowser.accesskey;"
              oncommand="gContextMenu.openLinkInBrowser();"/>
    <menuseparator id="browserContext-sep-open-browser"/>
    <menuitem id="browserContext-undo"
              label="&undoDefaultCmd.label;"
              accesskey="&undoDefaultCmd.accesskey;"
              command="cmd_undo"/>
    <menuseparator id="browserContext-sep-undo"/>
    <menuitem id="browserContext-cut"
              data-l10n-id="text-action-cut"
              command="cmd_copy"/>
    <menuitem id="browserContext-copy"
              data-l10n-id="text-action-copy"
              command="cmd_copy"/>
    <menuitem id="browserContext-paste"
              data-l10n-id="text-action-paste"
              command="cmd_paste"/>
    <menuitem id="browserContext-selectall"
              data-l10n-id="text-action-select-all"
              command="cmd_selectAll"/>
    <menuseparator id="browserContext-sep-clipboard"/>

    <menuitem id="browserContext-searchTheWeb"
              label="[glodaComplete.webSearch1.label]"
              oncommand="openWebSearch(event.target.value)"/>

    <!-- Spellchecking general menu items (enable, add dictionaries...) -->
    <menuseparator id="browserContext-spell-separator"/>
    <menuitem id="browserContext-spell-check-enabled"
              data-l10n-id="text-action-spell-check-toggle"
              type="checkbox"
              oncommand="gSpellChecker.toggleEnabled();"/>
    <menuitem id="browserContext-spell-add-dictionaries-main"
              label="&spellAddDictionaries.label;"
              accesskey="&spellAddDictionaries.accesskey;"
              oncommand="gContextMenu.addDictionaries();"/>
    <menu id="browserContext-spell-dictionaries"
          data-l10n-id="text-action-spell-dictionaries">
        <menupopup id="browserContext-spell-dictionaries-menu">
            <menuseparator id="browserContext-spell-language-separator"/>
            <menuitem id="browserContext-spell-add-dictionaries"
                      label="&spellAddDictionaries.label;"
                      accesskey="&spellAddDictionaries.accesskey;"
                      oncommand="gContextMenu.addDictionaries();"/>
        </menupopup>
    </menu>

    <menuitem id="browserContext-media-play"
              label="&contextPlay.label;"
              accesskey="&contextPlay.accesskey;"
              oncommand="gContextMenu.mediaCommand('play');"/>
    <menuitem id="browserContext-media-pause"
              label="&contextPause.label;"
              accesskey="&contextPause.accesskey;"
              oncommand="gContextMenu.mediaCommand('pause');"/>
    <menuitem id="browserContext-media-mute"
              label="&contextMute.label;"
              accesskey="&contextMute.accesskey;"
              oncommand="gContextMenu.mediaCommand('mute');"/>
    <menuitem id="browserContext-media-unmute"
              label="&contextUnmute.label;"
              accesskey="&contextUnmute.accesskey;"
              oncommand="gContextMenu.mediaCommand('unmute');"/>
    <menuseparator id="browserContext-sep-edit"/>
    <menuitem id="browserContext-copylink"
              label="&copyLinkCmd.label;"
              accesskey="&copyLinkCmd.accesskey;"
              command="cmd_copyLink"/>
    <menuitem id="browserContext-copyimage"
              label="&copyImageAllCmd.label;"
              accesskey="&copyImageAllCmd.accesskey;"
              command="cmd_copyImage"/>
    <menuitem id="browserContext-addemail"
              label="&AddToAddressBook.label;"
              accesskey="&AddToAddressBook.accesskey;"
              oncommand="addEmail(gContextMenu.linkURL);"/>
    <menuitem id="browserContext-composeemailto"
              label="&SendMessageTo.label;"
              accesskey="&SendMessageTo.accesskey;"
              oncommand="composeEmailTo(gContextMenu.linkURL);"/>
    <menuitem id="browserContext-copyemail"
              label="&copyEmailCmd.label;"
              accesskey="&copyEmailCmd.accesskey;"
              oncommand="gContextMenu.copyEmail();"/>
    <menuseparator id="browserContext-sep-copy"/>
    <menuitem id="browserContext-savelink"
              label="&saveLinkAsCmd.label;"
              accesskey="&saveLinkAsCmd.accesskey;"
              oncommand="gContextMenu.saveLink();"/>
    <menuitem id="browserContext-saveimage"
              label="&saveImageAsCmd.label;"
              accesskey="&saveImageAsCmd.accesskey;"
              oncommand="gContextMenu.saveImage();"/>
  </menupopup>
  <panel id="DateTimePickerPanel"
         type="arrow"
         orient="vertical"
         noautofocus="true"
         norolluponanchor="true"
         consumeoutsideclicks="never"
         level="top"
         tabspecific="true">
  </panel>

  <!-- For select dropdowns. The menupopup is what shows the list of options,
       and the popuponly menulist makes things like the menuactive attributes
       work correctly on the menupopup. ContentSelectDropdown expects the
       popuponly menulist to be its immediate parent. -->
  <menulist popuponly="true" id="ContentSelectDropdown" hidden="true">
    <menupopup rolluponmousewheel="true"
               activateontab="true" position="after_start"
               level="parent"
               consumeoutsideclicks="false" ignorekeys="shortcuts"
      />
  </menulist>

  <panel is="autocomplete-richlistbox-popup" id="PopupAutoComplete"
         type="autocomplete"
         role="group"
         noautofocus="true"/>

  <tooltip id="remoteBrowserTooltip"/>

<menupopup id="toolbar-context-menu"
           onpopupshowing="calendarOnToolbarsPopupShowing(event); ToolbarContextMenu.updateExtension(this);">
  <menuseparator id="customizeMailToolbarMenuSeparator"/>
  <menuitem id="CustomizeMailToolbar"
            command="cmd_CustomizeMailToolbar"
            label="&customizeToolbar.label;"
            accesskey="&customizeToolbar.accesskey;"/>
  <menuseparator id="extensionsMailToolbarMenuSeparator"/>
  <menuitem oncommand="ToolbarContextMenu.openAboutAddonsForContextAction(this.parentElement)"
            data-l10n-id="toolbar-context-menu-manage-extension"
            class="customize-context-manageExtension"/>
  <menuitem oncommand="ToolbarContextMenu.removeExtensionForContextAction(this.parentElement)"
            data-l10n-id="toolbar-context-menu-remove-extension"
            class="customize-context-removeExtension"/>
</menupopup>
  <menupopup id="aboutPagesContext"
             onpopupshowing="goUpdateCommand('cmd_copy'); goUpdateCommand('cmd_paste'); goUpdateCommand('cmd_selectAll');">
    <menuitem id="aboutPagesContext-copy"
              data-l10n-id="text-action-copy"
              command="cmd_copy"/>
    <menuitem id="aboutPagesContext-paste"
              data-l10n-id="text-action-paste"
              command="cmd_paste"/>
    <menuitem id="aboutPagesContext-selectall"
              data-l10n-id="text-action-select-all"
              command="cmd_selectAll"/>
  </menupopup>

<!-- The panelUI is for the appmenu. -->
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->

<panel id="appMenu-popup"
       class="cui-widget-panel panel-no-padding"
       role="group"
       type="arrow"
       hidden="true"
       flip="slide"
       position="bottomright topright"
       noautofocus="true">
  <panelmultiview id="appMenu-multiView"
                  mainViewId="appMenu-mainView"
                  viewCacheId="appMenu-viewCache">

    <!-- Main Appmenu View -->
    <panelview id="appMenu-mainView" class="PanelUI-subView">
      <vbox id="appMenu-mainViewItems"
            class="panel-subview-body">
        <vbox id="appMenu-addon-banners"/>
        <toolbarbutton class="panel-banner-item"
                       oncommand="PanelUI._onBannerItemSelected(event)"
                       hidden="true"/>
        <toolbarbutton id="appmenu_new"
                       data-l10n-id="appmenu-new-account-panel"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-newView', this)"/>
        <toolbarbutton id="appmenu_create"
                       data-l10n-id="appmenu-create-panel"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-createView', this)"/>
        <toolbarseparator id="appmenu_createPopupMenuSeparator"/>
        <toolbarbutton id="appmenu_open"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="appmenu-open-file-panel"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-openView', this)"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_View"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="appmenu-view-panel"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-viewView', this)"/>
        <toolbaritem id="appMenu-uiDensity-controls"
                     class="subviewbutton subviewbutton-iconic toolbaritem-combined-buttons"
                     closemenu="none">
          <html:img class="toolbarbutton-icon" src="" alt=""/>
          <label class="toolbarbutton-text" data-l10n-id="appmenu-mail-uidensity-value"/>
          <toolbarbutton id="appmenu_uiDensityCompact"
                         class="subviewbutton subviewbutton-iconic subviewbutton"
                         data-l10n-id="appmenu-uidensity-compact"
                         type="radio"
                         oncommand="PanelUI.setUIDensity(event);"/>
          <toolbarbutton id="appmenu_uiDensityNormal"
                         class="subviewbutton subviewbutton-iconic subviewbutton"
                         data-l10n-id="appmenu-uidensity-default"
                         type="radio"
                         oncommand="PanelUI.setUIDensity(event);"/>
          <toolbarbutton id="appmenu_uiDensityTouch"
                         class="subviewbutton subviewbutton-iconic subviewbutton"
                         data-l10n-id="appmenu-uidensity-relaxed"
                         type="radio"
                         oncommand="PanelUI.setUIDensity(event);"/>
        </toolbaritem>
        <toolbaritem id="appMenu-fontSize-controls"
                     class="subviewbutton subviewbutton-iconic toolbaritem-combined-buttons"
                     closemenu="none">
          <html:img class="toolbarbutton-icon" src="" alt=""/>
          <label class="toolbarbutton-text" data-l10n-id="appmenu-font-size-value"/>
          <toolbarbutton id="appMenu-fontSizeReduce-button"
                         class="subviewbutton subviewbutton-iconic"
                         oncommand="UIFontSize.reduceSize();"
                         data-l10n-id="appmenuitem-font-size-reduce"/>
          <toolbarbutton id="appMenu-fontSizeReset-button"
                         class="subviewbutton"
                         oncommand="UIFontSize.resetSize();"
                         tooltip="fontSizeReset"/>
          <toolbarbutton id="appMenu-fontSizeEnlarge-button"
                         class="subviewbutton subviewbutton-iconic"
                         oncommand="UIFontSize.increaseSize();"
                         data-l10n-id="appmenuitem-font-size-enlarge"/>
        </toolbaritem>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_preferences"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-settings"
                       oncommand="openOptionsDialog();"/>
        <toolbarbutton id="appmenu_accountmgr"
                       class="subviewbutton subviewbutton-iconic"
                       label="&accountManagerCmd2.label;"
                       oncommand="MsgAccountManager(null);"/>
        <toolbarbutton id="appmenu_addons"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-addons-and-themes"
                       oncommand="openAddonsMgr();"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_toolsMenu"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="appmenu-tools-panel"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-toolsView', this)"/>
        <toolbarbutton id="appmenu_help"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="menu-help-help-title"
                       closemenu="none"
                       oncommand="buildHelpMenu(); PanelUI.showSubView('appMenu-helpView', this)"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu-quit"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="menu-quit"
                       key="key_quitApplication"
                       command="cmd_quitApplication"/>
      </vbox>
    </panelview>
    <!-- New -->
    <panelview id="appMenu-newView"
               data-l10n-id="appmenu-new-account-panel-title"
               class="PanelUI-subView">
      <vbox id="appMenu-newViewItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_newCreateEmailAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-create-new-mail-account"
                       oncommand="openAccountProvisionerTab();"/>
        <toolbarbutton id="appmenu_newMailAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-mail-account"
                       oncommand="openAccountSetupTab();"/>
        <toolbarbutton id="appmenu_calendar-new-calendar-menu-item"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-calendar"
                       command="calendar_new_calendar_command"/>
        <toolbarbutton id="appmenu_newAB"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       data-l10n-id="appmenu-newab-panel"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-newabView', this)"/>
        <toolbarbutton id="appmenu_newIMAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-chat-account"
                       oncommand="openIMAccountWizard();"/>
        <toolbarbutton id="appmenu_newFeedAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-feed"
                       oncommand="AddFeedAccount();"/>
        <toolbarbutton id="appmenu_newNewsgroupAccountMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-newsgroup"
                       oncommand="openNewsgroupAccountWizard();"/>
      </vbox>
    </panelview>

    <!-- New AB -->
    <panelview id="appMenu-newabView"
               data-l10n-id="appmenu-newab-panel-title"
               class="PanelUI-subView">
      <vbox id="appMenu-newABItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_newABMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-addressbook"
                       oncommand="openNewABDialog();"/>
        <toolbarbutton id="appmenu_newCardDAVMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-carddav"
                       oncommand="openNewABDialog('CARDDAV');"/>
        <toolbarbutton id="appmenu_newLdapMenuItem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-new-ldap"
                       oncommand="openNewABDialog('LDAP');"/>
      </vbox>
    </panelview>

    <!-- Create -->
    <panelview id="appMenu-createView"
               data-l10n-id="appmenu-create-panel-title"
               class="PanelUI-subView">
      <vbox id="appMenu-createViewItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_newNewMsgCmd"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-create-message"
                       key = "key_newMessage2"
                       command="cmd_newMessage"/>
        <toolbarbutton id="appmenu_calendar-new-event-menu-item"
                       class="subviewbutton subviewbutton-iconic hide-when-calendar-deactivated"
                       data-l10n-id="appmenu-create-event"
                       command="calendar_new_event_command"/>
        <toolbarbutton id="appmenu_calendar-new-task-menu-item"
                       class="subviewbutton subviewbutton-iconic hide-when-calendar-deactivated"
                       data-l10n-id="appmenu-create-task"
                       command="calendar_new_todo_command"/>
        <toolbarbutton id="appmenu_newCard"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-create-contact"
                       command="cmd_newCard"/>
      </vbox>
    </panelview>

    <!-- Open -->
    <panelview id="appMenu-openView"
               data-l10n-id="appmenu-open-file-panel-title"
               class="PanelUI-subView">
      <vbox id="appMenu-openViewItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_OpenMessageFileMenuitem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-open-message"
                       oncommand="MsgOpenFromFile();"/>
        <toolbarbutton id="appmenu_OpenCalendarFileMenuitem"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-open-calendar"
                       oncommand="openLocalCalendar();"/>
      </vbox>
    </panelview>

    <!-- View / Toolbars -->
    <panelview id="appMenu-toolbarsView"
               title="&viewToolbarsMenu.label;"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_quickFilterBar"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       closemenu="none"
                       data-l10n-id="quick-filter-bar-toggle"
                       command="cmd_toggleQuickFilterBar"/>
        <toolbarbutton id="appmenu_spacesToolbar"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       data-l10n-id="menu-spaces-toolbar-button"
                       closemenu="none"
                       oncommand="gSpacesToolbar.toggleToolbarFromMenu();"/>
        <toolbarbutton id="appmenu_showStatusbar"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       label="&showTaskbarCmd.label;"
                       oncommand="goToggleToolbar('status-bar', 'menu_showTaskbar')"
                       closemenu="none"
                       checked="true"
                       observes="menu_showTaskbar"/>
        <toolbarseparator id="appmenu_toggleToolbarsSeparator"/>
        <toolbarbutton id="appmenu_toolbarLayout"
                       class="subviewbutton subviewbutton-iconic"
                       label="&appmenuToolbarLayout.label;"
                       command="cmd_CustomizeMailToolbar"/>
      </vbox>
    </panelview>

    <!-- View / Layout -->
    <panelview id="appMenu-preferencesLayoutView"
               title="&messagePaneLayoutStyle.label;"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_messagePaneClassic"
                       class="subviewbutton subviewbutton-iconic"
                       type="radio"
                       label="&messagePaneClassic.label;"
                       name="viewlayoutgroup"
                       command="cmd_viewClassicMailLayout"/>
        <toolbarbutton id="appmenu_messagePaneWide"
                       class="subviewbutton subviewbutton-iconic"
                       type="radio"
                       label="&messagePaneWide.label;"
                       name="viewlayoutgroup"
                       command="cmd_viewWideMailLayout"/>
        <toolbarbutton id="appmenu_messagePaneVertical"
                       class="subviewbutton subviewbutton-iconic"
                       type="radio"
                       label="&messagePaneVertical.label;"
                       name="viewlayoutgroup"
                       command="cmd_viewVerticalMailLayout"/>
        <toolbarseparator id="appmenu_viewMenuAfterPaneVerticalSeparator"/>
        <toolbarbutton id="appmenu_showFolderPane"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       closemenu="none"
                       label="&showFolderPaneCmd.label;"
                       command="cmd_toggleFolderPane"/>
        <toolbarbutton id="appmenu_toggleThreadPaneHeader"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       name="threadheader"
                       closemenu="none"
                       data-l10n-id="appmenuitem-toggle-thread-pane-header"
                       command="cmd_toggleThreadPaneHeader"/>
        <toolbarbutton id="appmenu_showMessage"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       closemenu="none"
                       label="&showMessageCmd.label;"
                       key="key_toggleMessagePane"
                       command="cmd_toggleMessagePane"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_calShowTodayPane-2"
                       class="subviewbutton subviewbutton-iconic"
                       label="&todaypane.showTodayPane.label;"
                       type="checkbox"
                       command="calendar_toggle_todaypane_command"/>
      </vbox>
    </panelview>

    <!-- View -->
    <panelview id="appMenu-viewView"
               class="PanelUI-subView"
               data-l10n-id="appmenu-view-panel-title">
      <vbox id="appMenu-viewViewItems"
            class="panel-subview-body">
        <toolbarbutton id="appmenu_Toolbars"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       label="&viewToolbarsMenu.label;"
                       accesskey="&viewToolbarsMenu.accesskey;"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-toolbarsView', this)"/>
        <toolbarbutton id="appmenu_MessagePaneLayout"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       label="&messagePaneLayoutStyle.label;"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-preferencesLayoutView', this)"/>
        <toolbarbutton id="appmenu_FolderViews"
                       class="subviewbutton subviewbutton-iconic subviewbutton-nav"
                       label="&folderView.label;"
                       closemenu="none"
                       oncommand="PanelUI.showSubView('appMenu-foldersView', this)"/>
      </vbox>
    </panelview>

    <!-- View / Folders -->
    <panelview id="appMenu-foldersView"
               title="&folderView.label;"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_toggleFolderHeader"
                       class="subviewbutton subviewbutton-iconic"
                       name="paneheader"
                       value="toggle-header"
                       data-l10n-id="menu-view-folders-toggle-header"
                       type="checkbox"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarseparator id="appmenu_folderModesSeparator"/>
        <toolbarbutton id="appmenu_allFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="all"
                       data-l10n-id="show-all-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarbutton id="appmenu_smartFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="smart"
                       data-l10n-id="show-smart-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarbutton id="appmenu_unreadFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="unread"
                       data-l10n-id="show-unread-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarbutton id="appmenu_favoriteFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="favorite"
                       data-l10n-id="show-favorite-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarbutton id="appmenu_recentFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="recent"
                       data-l10n-id="show-recent-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_tagsFolders"
                       class="subviewbutton subviewbutton-iconic"
                       value="tags"
                       data-l10n-id="show-tags-folders-label"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <toolbarseparator id="appmenu_compactPropertiesSeparator"/>
        <toolbarbutton id="appmenu_compactMode"
                       class="subviewbutton subviewbutton-iconic"
                       value="compact"
                       data-l10n-id="folder-toolbar-toggle-folder-compact-view"
                       type="checkbox"
                       name="viewmessages"
                       closemenu="none"
                       oncommand="PanelUI.folderCompactMenuOnCommand(event)"/>
        <toolbarseparator id="appmenu_favoritePropertiesSeparator"/>
        <toolbarbutton id="appmenu_favoriteFolder"
                       class="subviewbutton subviewbutton-iconic"
                       type="checkbox"
                       label="&menuFavoriteFolder.label;"
                       checked="false"
                       command="cmd_toggleFavoriteFolder"/>
        <toolbarbutton id="appmenu_properties"
                       class="subviewbutton subviewbutton-iconic"
                       command="cmd_properties"/>
      </vbox>
    </panelview>

    <!-- View / Messages / Tags -->
    <!-- Dynamically populated when shown. -->
    <panelview id="appMenu-viewMessagesTagsView"
               title="&viewTags.label;"
               class="PanelUI-subView"
               oncommand="ViewChangeByMenuitem(event.target);">
      <vbox class="panel-subview-body"/>
    </panelview>

    <!-- View / Messages / Custom Views -->
    <!-- Dynamically populated when shown. -->
    <panelview id="appMenu-viewMessagesCustomViewsView"
               title="&viewCustomViews.label;"
               class="PanelUI-subView"
               oncommand="ViewChangeByMenuitem(event.target);">
      <vbox class="panel-subview-body"/>
    </panelview>

    <!-- Tools -->
    <panelview id="appMenu-toolsView"
               data-l10n-id="appmenu-tools-panel-title"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_import"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-import"
                       oncommand="toImport();"/>
        <toolbarbutton id="appmenu_export"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-export"
                       oncommand="toExport();"/>
        <toolbarseparator id="importExportSeparator"/>
        <toolbarbutton id="appmenu_searchCmd"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-message-search"
                       key="key_searchMail"
                       command="cmd_searchMessages"/>
        <toolbarbutton id="appmenu_filtersCmd"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-message-filters"
                       oncommand="MsgFilters();"/>
        <toolbarbutton id="appmenu_manageKeysOpenPGP"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="openpgp-manage-keys-openpgp-cmd"
                       oncommand="openKeyManager()"/>
        <toolbarbutton id="appmenu_openSavedFilesWnd"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-download-manager"
                       key="key_savedFiles"
                       oncommand="openSavedFilesWnd();"/>
        <toolbarbutton id="appmenu_activityManager"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-activity-manager"
                       oncommand="openActivityMgr();"/>
        <toolbarseparator id="devToolsSeparator"/>
        <toolbarbutton id="appmenu_devtoolsToolbox"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-tools-dev-tools"
                       key="key_devtoolsToolbox"
                       oncommand="BrowserToolboxLauncher.init();"/>
      </vbox>
    </panelview>

    <!-- Help -->
    <panelview id="appMenu-helpView"
               data-l10n-id="appmenu-help-panel-title"
               class="PanelUI-subView">
      <vbox class="panel-subview-body">
        <toolbarbutton id="appmenu_openHelp"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-get-help"
                       key="key_openHelp"
                       oncommand="openSupportURL();"/>
        <toolbarbutton id="appmenu_openTour"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-explore-features"
                       oncommand="openLinkText(event, 'tourURL');"/>
        <toolbarbutton id="appmenu_keyboardShortcuts"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-shortcuts"
                       oncommand="openLinkText(event, 'keyboardShortcutsURL');"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_getInvolved"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-get-involved"
                       oncommand="openLinkText(event, 'getInvolvedURL');"/>
        <toolbarbutton id="appmenu_makeDonation"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-donation"
                       oncommand="openLinkText(event, 'donateURL');"/>
        <toolbarbutton id="appmenu_submitFeedback"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-share-feedback"
                       oncommand="openLinkText(event, 'feedbackURL');"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_troubleshootMode"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-enter-troubleshoot-mode2"
                       oncommand="safeModeRestart();"/>
        <toolbarbutton id="appmenu_troubleshootingInfo"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-troubleshooting-info"
                       oncommand="openAboutSupport();"/>
        <toolbarseparator/>
        <toolbarbutton id="appmenu_about"
                       class="subviewbutton subviewbutton-iconic"
                       data-l10n-id="appmenu-help-about-product"
                       oncommand="openAboutDialog();"/>
      </vbox>
    </panelview>
  </panelmultiview>
</panel>
<menupopup id="unifiedToolbarMenu">
  <menuitem id="menuBarToggleVisible"
            type="checkbox"
            label="&menubarCmd.label;"
            accesskey="&menubarCmd.accesskey;"/>
  <menuseparator id="menuBarToggleMenuSeparator"/>
  <menuitem id="unifiedToolbarCustomize" data-l10n-id="customize-menu-customize" />
  <menuseparator id="extensionsMailToolbarMenuSeparator"/>
  <menuitem oncommand="ToolbarContextMenu.openAboutAddonsForContextAction(this.parentElement)"
            data-l10n-id="toolbar-context-menu-manage-extension"
            class="customize-context-manageExtension"/>
  <menuitem oncommand="ToolbarContextMenu.removeExtensionForContextAction(this.parentElement)"
            data-l10n-id="toolbar-context-menu-remove-extension"
            class="customize-context-removeExtension"/>
</menupopup>
<menupopup id="customizationTargetMenu">
  <menuitem id="customizationTargetEnd" data-l10n-id="customize-target-end" />
  <menuitem id="customizationTargetForward" data-l10n-id="customize-target-forward" />
  <menuitem id="customizationTargetBackward" data-l10n-id="customize-target-backward" />
  <menuitem id="customizationTargetStart" data-l10n-id="customize-target-start" />
  <menuitem id="customizationTargetRemove" data-l10n-id="customize-target-remove" />
  <menuitem id="customizationTargetRemoveEverywhere"
            data-l10n-id="customize-target-remove-everywhere"
            hidden="true" />
  <menuitem id="customizationTargetAddEverywhere"
            data-l10n-id="customize-target-add-everywhere"
            hidden="true" />
</menupopup>
<menupopup id="customizationPaletteMenu">
  <menuitem id="customizationPaletteAddEverywhere"
            data-l10n-id="customize-palette-add-everywhere"
            hidden="true" />
</menupopup>
<menupopup is="folder-menupopup" id="toolbarMoveToPopup"
           mode="filing"
           showRecent="true"
           showFileHereLabel="true"
           recentLabel="&moveCopyMsgRecentMenu.label;"
           recentAccessKey="&moveCopyMsgRecentMenu.accesskey;"
           oncommand="goDoCommand('cmd_moveMessage', event.target._folder);event.stopPropagation()"/>
<menupopup is="folder-menupopup" id="toolbarFolderLocationPopup"
           class="menulist-menupopup"
           mode="notDeferred"
           showFileHereLabel="true"/>
<menupopup id="toolbarTagPopup"
           onpopupshowing="InitMessageTags(this);">
  <menuitem id="button-addNewTag"
            label="&addNewTag.label;"
            accesskey="&addNewTag.accesskey;"
            command="cmd_addTag"/>
  <menuitem id="button-manageTags"
            label="&manageTags.label;"
            accesskey="&manageTags.accesskey;"
            command="cmd_manageTags"/>
  <menuseparator id="button-tagpopup-sep-afterTagAddNew"/>
  <menuitem id="button-tagRemoveAll"
            command="cmd_removeTags"/>
  <menuseparator id="button-afterTagRemoveAllSeparator"/>
</menupopup>
<menupopup id="toolbarMarkPopup" onpopupshowing="InitMessageMark()">
  <menuitem id="markReadToolbarItem"
            label="&markAsReadCmd.label;"
            accesskey="&markAsReadCmd.accesskey;"
            key="key_toggleRead"
            command="cmd_markAsRead"/>
  <menuitem id="markUnreadToolbarItem"
            label="&markAsUnreadCmd.label;"
            accesskey="&markAsUnreadCmd.accesskey;"
            key="key_toggleRead"
            command="cmd_markAsUnread"/>
  <menuitem id="button-markThreadAsRead"
            label="&markThreadAsReadCmd.label;"
            key="key_markThreadAsRead"
            accesskey="&markThreadAsReadCmd.accesskey;"
            command="cmd_markThreadAsRead"/>
  <menuitem id="button-markReadByDate"
            label="&markReadByDateCmd.label;"
            key="key_markReadByDate"
            accesskey="&markReadByDateCmd.accesskey;"
            command="cmd_markReadByDate"/>
  <menuitem id="button-markAllRead"
            label="&markAllReadCmd.label;"
            key="key_markAllRead"
            accesskey="&markAllReadCmd.accesskey;"
            command="cmd_markAllRead"/>
  <menuseparator id="button-markAllReadSeparator"/>
  <menuitem id="markFlaggedToolbarItem"
            type="checkbox"
            label="&markStarredCmd.label;"
            accesskey="&markStarredCmd.accesskey;"
            key="key_toggleFlagged"
            command="cmd_markAsFlagged"/>
</menupopup>
<menupopup id="toolbarViewPickerPopup"
            onpopupshowing="RefreshViewPopup(this);">
  <menuitem id="viewPickerAll" value="0"
            label="&viewAll.label;"
            type="radio"
            oncommand="ViewChangeByMenuitem(this);"/>
  <menuitem id="viewPickerUnread" value="1"
            label="&viewUnread.label;"
            type="radio"
            oncommand="ViewChangeByMenuitem(this);"/>
  <menuitem id="viewPickerNotDeleted" value="3"
            label="&viewNotDeleted.label;"
            type="radio"
            oncommand="ViewChangeByMenuitem(this);"/>
  <menuseparator id="afterViewPickerUnreadSeparator"/>
  <menu id="viewPickerTags" label="&viewTags.label;">
    <menupopup id="viewPickerTagsPopup"
                class="menulist-menupopup"
                onpopupshowing="RefreshTagsPopup(this);"/>
  </menu>
  <menu id="viewPickerCustomViews" label="&viewCustomViews.label;">
    <menupopup id="viewPickerCustomViewsPopup"
                class="menulist-menupopup"
                onpopupshowing="RefreshCustomViewsPopup(this);"/>
  </menu>
  <menuseparator id="afterViewPickerCustomViewsSeparator"/>
  <menuitem id="viewPickerVirtualFolder"
            value="7"
            label="&viewVirtualFolder.label;"
            oncommand="ViewChangeByMenuitem(this);"/>
  <menuitem id="viewPickerCustomize"
            value="8"
            label="&viewCustomizeView.label;"
            oncommand="ViewChangeByMenuitem(this);"/>
</menupopup>
<menupopup id="messageHistoryPopup">
</menupopup>
  <panel is="glodacomplete-rich-result-popup"
         id="PopupGlodaAutocomplete"
         noautofocus="true"/>

  <tooltip id="attachmentListTooltip"/>

  <!-- We want to be able to do the following:

       1)  Open the tabContextMenu by right-clicking on individual tab selectors
       2)  Open the mail-toolbox customize context menu when right-clicking on
           the empty space of the tab selector.

       In order to do that, we make the tabContextMenu available in the main
       document, and refer to it via the context attributes of each newly spawned
       tab selector.  We also make the context attribute of the tab strip default
       to the mail-toolbox customization popup.

       So, when right-clicking on a tab, the tabContextMenu opens up, and stops
       the click event from propagating - but when the strip is right-clicked
       outside of any tabs, the mail-toolbox context menu opens, as desired.
  -->

  <menupopup id="tabContextMenu">
    <menuitem id="tabContextMenuOpenInWindow"
              label="&moveToNewWindow.label;"
              accesskey="&moveToNewWindow.accesskey;"/>
    <menuseparator />
    <menuitem id="tabContextMenuCloseOtherTabs"
              label="&closeOtherTabsCmd2.label;"
              accesskey="&closeOtherTabsCmd2.accesskey;"/>
    <menuseparator />
    <menu id="tabContextMenuRecentlyClosed"
          label="&recentlyClosedTabsCmd.label;"
          accesskey="&recentlyClosedTabsCmd.accesskey;">
      <menupopup />
    </menu>
    <menuitem id="tabContextMenuClose"
              label="&closeTabCmd2.label;"
              accesskey="&closeTabCmd2.accesskey;"/>
  </menupopup>

  <tooltip id="aHTMLTooltip" page="true"/>

  <panel id="notification-popup"
         position="after_end"
         orient="vertical"
         noautofocus="true"
         role="alert"/>

  <popupnotification id="addon-progress-notification" hasicon="true" hidden="true">
    <popupnotificationcontent orient="vertical">
      <html:progress id="addon-progress-notification-progressmeter" max="100"/>
      <label id="addon-progress-notification-progresstext" crop="end"/>
    </popupnotificationcontent>
  </popupnotification>

  <popupnotification id="addon-install-confirmation-notification" hasicon="true" hidden="true">
    <popupnotificationcontent id="addon-install-confirmation-content" orient="vertical"/>
  </popupnotification>

  <popupnotification id="addon-webext-permissions-notification" hasicon="true" hidden="true">
    <popupnotificationcontent class="addon-webext-perm-notification-content" orient="vertical">
      <description id="addon-webext-perm-text" class="addon-webext-perm-text"/>
      <label id="addon-webext-perm-intro" class="addon-webext-perm-text"/>
      <label id="addon-webext-perm-single-entry" class="addon-webext-perm-single-entry"/>
      <html:ul id="addon-webext-perm-list" class="addon-webext-perm-list"/>
      <description id="addon-webext-experiment-warning" class="addon-webext-experiment-warning"/>
      <hbox>
        <label id="addon-webext-perm-info" is="text-link" class="popup-notification-learnmore-link"/>
      </hbox>
    </popupnotificationcontent>
  </popupnotification>

  <popupnotification id="addon-installed-notification" hasicon="true" hidden="true">
    <popupnotificationcontent class="addon-installed-notification-content" orient="vertical">
      <html:ul id="addon-installed-list" class="addon-installed-list"/>
    </popupnotificationcontent>
  </popupnotification>

  <popupnotification id="addon-install-blocked-notification" hasicon="true" hidden="true">
    <popupnotificationcontent id="addon-install-blocked-content" orient="vertical">
      <description id="addon-install-blocked-message" class="popup-notification-description"></description>
      <hbox>
        <label id="addon-install-blocked-info" class="popup-notification-learnmore-link" is="text-link"/>
      </hbox>
    </popupnotificationcontent>
  </popupnotification>


  <tooltip is="chat-tooltip" id="imTooltip"/>

  <menupopup id="buddyListContextMenu"
             onpopupshowing="if (event.target != this) { return true; } gBuddyListContextMenu = new buddyListContextMenu(this); return gBuddyListContextMenu.shouldDisplay;"
             onpopuphiding="if (event.target == this) { gBuddyListContextMenu = null; }">
    <menuitem id="context-openconversation"
              label="&openConversationCmd.label;"
              accesskey="&openConversationCmd.accesskey;"
              oncommand="gBuddyListContextMenu.openConversation();"/>
    <menuitem id="context-close-conversation"
              label="&closeConversationCmd.label;"
              accesskey="&closeConversationCmd.accesskey;"
              oncommand="gBuddyListContextMenu.closeConversation();"/>
    <menuitem id="context-verifyBuddy"
              data-l10n-id="chat-verify-identity"
              oncommand="gBuddyListContextMenu.verifyIdentity();"/>
    <menuseparator id="context-edit-buddy-separator"/>
    <menuitem id="context-alias"
              label="&aliasCmd.label;"
              accesskey="&aliasCmd.accesskey;"
              oncommand="gBuddyListContextMenu.alias();"/>
    <menuitem id="context-delete"
              data-l10n-id="text-action-delete"
              oncommand="gBuddyListContextMenu.delete();"/>
  </menupopup>

  <menupopup id="chatConversationContextMenu"
             onpopupshowing="if (event.target != this) { return true; } gChatContextMenu = new imContextMenu(this); return gChatContextMenu.shouldDisplay;"
             onpopuphiding="if (event.target == this &amp;&amp; gChatContextMenu) { gChatContextMenu.cleanup(); gChatContextMenu = null; }">
    <menuitem id="context-openlink"
              label="&openLinkCmd.label;"
              accesskey="&openLinkCmd.accesskey;"
              oncommand="gChatContextMenu.openLink();"/>
    <menuitem id="context-copyemail"
              label="&copyEmailCmd.label;"
              accesskey="&copyEmailCmd.accesskey;"
              oncommand="gChatContextMenu.copyEmail();"/>
    <menuitem id="context-copylink"
              label="&copyLinkCmd.label;"
              accesskey="&copyLinkCmd.accesskey;"
              oncommand="goDoCommand('cmd_copyLink');"/>
    <menuseparator id="context-sep-copylink"/>

    <menuitem id="context-copy"
              data-l10n-id="text-action-copy"
              command="cmd_copy"/>
    <menuitem id="context-selectall"
              data-l10n-id="text-action-select-all"
              command="cmd_selectAll"/>
    <menuseparator id="context-sep-messageactions"/>
  </menupopup>

  <menupopup id="chat-toolbar-context-menu">
    <menuitem id="CustomizeChatToolbar"
              oncommand="CustomizeMailToolbar('chat-view-toolbox', 'CustomizeChatToolbar')"
              label="&customizeToolbar.label;"
              accesskey="&customizeToolbar.accesskey;"/>
  </menupopup>

  <menupopup id="chatContextMenu"
             onpopupshowing="if (event.target != this) { return true; } openChatContextMenu(this);"
             onpopuphiding="if (event.target == this) { clearChatContextMenu(this); }">

    <!-- Spellchecking menu items -->
    <menuitem id="spellCheckNoSuggestions"
              data-l10n-id="text-action-spell-no-suggestions"
              disabled="true"/>
    <menuseparator id="spellCheckAddSep" />
    <menuitem id="spellCheckAddToDictionary"
              data-l10n-id="text-action-spell-add-to-dictionary"
              oncommand="gChatSpellChecker.addToDictionary();"/>
    <menuseparator id="spellCheckSuggestionsSeparator"/>

    <menuitem data-l10n-id="text-action-undo" command="cmd_undo"/>
    <menuitem data-l10n-id="text-action-cut" command="cmd_cut"/>
    <menuitem data-l10n-id="text-action-copy" command="cmd_copy"/>
    <menuitem data-l10n-id="text-action-paste" command="cmd_paste"/>
    <menuseparator/>
    <menuitem data-l10n-id="text-action-select-all" command="cmd_selectAll"/>

    <!-- Spellchecking general menu items (enable, add dictionaries...) -->
    <menuseparator id="spellCheckSeparator"/>
    <menuitem id="spellCheckEnable"
              data-l10n-id="text-action-spell-check-toggle"
              type="checkbox"
              oncommand="enableInlineSpellCheck(!gChatSpellChecker.enabled);"/>
    <menu id="spellCheckDictionaries"
          data-l10n-id="text-action-spell-dictionaries">
      <menupopup id="spellCheckDictionariesMenu">
        <menuseparator id="spellCheckLanguageSeparator"/>
        <menuitem id="spellCheckAddDictionaries"
                  label="&spellAddDictionaries.label;"
                  accesskey="&spellAddDictionaries.accesskey;"
                  oncommand="openDictionaryList();"/>
      </menupopup>
    </menu>

  </menupopup>

  <menupopup id="participantListContextMenu"
             onpopupshowing="return showParticipantMenu(this);">
    <menuitem id="context-verifyParticipant"
              data-l10n-id="chat-verify-identity"
              oncommand="verifyChatParticipant();"/>
  </menupopup>
</popupset>


<popupset id="calendar-popupset">
  <!-- Tooltips -->
  <tooltip id="eventTreeTooltip"
          onpopupshowing="return showToolTip(this, unifinderTreeView.getItemFromEvent(event))"
          noautohide="true"/>

  <tooltip id="taskTreeTooltip"
          onpopupshowing="return showToolTip(this, getTaskTree().getTaskFromEvent(event))"
          noautohide="true"/>

  <tooltip id="itemTooltip"
          noautohide="true"/>

  <menupopup id="agenda-menupopup">
    <menuitem label="&calendar.context.modifyorviewitem.label;"
              accesskey="&calendar.context.modifyorviewitem.accesskey;"
              command="agenda_edit_event_command"/>
    <menu id="agenda-context-menu-convert-menu"
          label="&calendar.context.convertmenu.label;"
          accesskey="&calendar.context.convertmenu.accesskey.calendar;">
      <menupopup id="agenda-context-menu-convert-menupopup">
        <menuitem id="agenda-context-menu-convert-message-menuitem"
                  label="&calendar.context.convertmenu.message.label;"
                  accesskey="&calendar.context.convertmenu.message.accesskey;"
                  oncommand="calendarMailButtonDNDObserver.onDropItems([TodayPane.agenda.selectedItem])"/>
        <menuitem id="agenda-context-menu-convert-task-menuitem"
                  class="event-only"
                  label="&calendar.context.convertmenu.task.label;"
                  accesskey="&calendar.context.convertmenu.task.accesskey;"
                  oncommand="calendarTaskButtonDNDObserver.onDropItems([TodayPane.agenda.selectedItem])"/>
      </menupopup>
    </menu>
    <menuseparator id="calendar-today-pane-menuseparator-before-delete"/>
    <menuitem label="&calendar.context.deleteevent.label;"
              accesskey="&calendar.context.deleteevent.accesskey;"
              key="calendar-delete-item-key"
              command="agenda_delete_event_command"/>
    <menu id="calendar-today-pane-menu-attendance-menu"
          label="&calendar.context.attendance.menu.label;"
          accesskey="&calendar.context.attendance.menu.accesskey;"
          oncommand="setContextPartstat(event.target, [TodayPane.agenda.selectedItem])"
          observes="calendar_attendance_command">
      <menupopup id="agenda-context-menu-attendance-menupopup">
        <label id="agenda-context-attendance-thisoccurrence-label"
               class="calendar-context-heading-label"
               scope="this-occurrence"
               value="&calendar.context.attendance.occurrence.label;"/>
        <menu id="agenda-context-menu-attendance-accepted-menu"
              label="&calendar.context.attendance.occ.accepted.label;"
              accesskey="&calendar.context.attendance.occ.accepted.accesskey;"
              value="ACCEPTED"
              name="agenda-context-attendance"
              scope="this-occurrence">
          <menupopup id="agenda-context-menu-occurrence-accepted-menupopup">
            <menuitem id="agenda-context-menu-attend-accept-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="AUTO"/>
            <menuitem id="agenda-context-menu-attend-accept-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="agenda-context-menu-attendance-tentative-menu"
              label="&calendar.context.attendance.occ.tentative.label;"
              accesskey="&calendar.context.attendance.occ.tentative.accesskey;"
              value="TENTATIVE"
              name="agenda-context-attendance"
              scope="this-occurrence">
          <menupopup id="agenda-context-menu-occurrence-tentative-menupopup">
            <menuitem id="agenda-context-menu-attend-tentative-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="AUTO"/>
            <menuitem id="agenda-context-menu-attend-tentative-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="agenda-context-menu-attendance-declined-menu"
              label="&calendar.context.attendance.occ.declined.label;"
              accesskey="&calendar.context.attendance.occ.declined.accesskey;"
              value="DECLINED"
              name="agenda-context-attendance"
              scope="this-occurrence">
          <menupopup id="agenda-context-menu-occurrence-tentative-menupopup">
            <menuitem id="agenda-context-menu-attend-declined-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="DECLINED"
                      respmode="AUTO"/>
            <menuitem id="agenda-context-menu-attend-declined-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="DECLINED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menuitem id="agenda-context-menu-attendance-delegated-menu"
                  label="&calendar.context.attendance.occ.delegated.label;"
                  name="agenda-context-attendance"
                  scope="this-occurrence"
                  value="DELEGATED"/>
        <menuitem id="agenda-context-menu-attendance-needsaction-menu"
                  label="&calendar.context.attendance.occ.needsaction.label;"
                  name="agenda-context-attendance"
                  scope="this-occurrence"
                  value="NEEDS-ACTION"/>
        <label id="agenda-context-attendance-alloccurrence-label"
               class="calendar-context-heading-label"
               scope="all-occurrences"
               value="&calendar.context.attendance.all2.label;"/>
        <menu id="agenda-context-menu-attendance-accepted-all-menu"
              label="&calendar.context.attendance.all.accepted.label;"
              accesskey="&calendar.context.attendance.all.accepted.accesskey;"
              value="ACCEPTED"
              name="agenda-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="agenda-context-menu-alloccurrences-accept-menupopup">
            <menuitem id="agenda-context-menu-attend-accept-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="AUTO"/>
            <menuitem id="agenda-context-menu-attend-accept-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="agenda-context-menu-attendance-tentative-all-menu"
              label="&calendar.context.attendance.all.tentative.label;"
              accesskey="&calendar.context.attendance.all.tentative.accesskey;"
              value="TENTATIVE"
              name="agenda-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="agenda-context-menu-alloccurrences-tentative-menupopup">
            <menuitem id="agenda-context-menu-attend-tentative-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="AUTO"/>
            <menuitem id="agenda-context-menu-attend-tentative-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="agenda-context-menu-attendance-decline-all-menu"
              label="&calendar.context.attendance.all.declined.label;"
              accesskey="&calendar.context.attendance.all.declined.accesskey;"
              value="DECLINED"
              name="agenda-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="agenda-context-menu-alloccurrences-decline-menupopup">
            <menuitem id="agenda-context-menu-attend-declined-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="DECLINED"
                      respmode="AUTO"/>
            <menuitem id="agenda-context-menu-attend-declined-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="DECLINED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menuitem id="agenda-context-menu-attendance-delegated-all-menu"
                  label="&calendar.context.attendance.all.delegated.label;"
                  name="agenda-context-attendance-delegated-all"
                  scope="all-occurrences"
                  value="DELEGATED"/>
        <menuitem id="agenda-context-menu-attendance-needsaction-all-menu"
                  label="&calendar.context.attendance.all.needsaction.label;"
                  name="agenda-context-attendance-needaction-all"
                  scope="all-occurrences"
                  value="NEEDS-ACTION"/>
      </menupopup>
    </menu>
  </menupopup>

  <!-- CALENDAR LIST CONTEXT MENU -->
  <menupopup id="list-calendars-context-menu">
    <menuitem id="list-calendars-context-togglevisible"
              class="needs-calendar"
              accesskeyshow="&calendar.context.showcalendar.accesskey;"
              accesskeyhide="&calendar.context.hidecalendar.accesskey;"
              oncommand="toggleCalendarVisible(document.getElementById('list-calendars-context-menu').contextCalendar);"/>
    <menuitem id="list-calendars-context-showonly"
              class="needs-calendar"
              accesskey="&calendar.context.showonly.accesskey;"
              oncommand="showOnlyCalendar(document.getElementById('list-calendars-context-menu').contextCalendar);"/>
    <menuitem id="list-calendars-context-showall"
              label="&calendar.context.showall.label;"
              accesskey="&calendar.context.showall.accesskey;"
              oncommand="showAllCalendars();"/>
    <menuseparator id="list-calendars-context-showops-menuseparator"/>
    <menuitem id="list-calendars-context-new"
              label="&calendar.context.newserver.label;"
              accesskey="&calendar.context.newserver.accesskey;"
              command="calendar_new_calendar_command"/>
    <menuitem id="list-calendars-context-delete"
              class="needs-calendar"
              labeldelete="&calendar.context.deleteserver2.label;"
              labelremove="&calendar.context.removeserver.label;"
              labelunsubscribe="&calendar.context.unsubscribeserver.label;"
              accesskeydelete="&calendar.context.deleteserver2.accesskey;"
              accesskeyremove="&calendar.context.removeserver.accesskey;"
              accesskeyunsubscribe="&calendar.context.unsubscribeserver.accesskey;"
              command="calendar_delete_calendar_command"/>
    <menuseparator id="list-calendars-context-itemops-menuseparator"
                   class="needs-calendar"/>
    <menuitem id="list-calendars-context-export"
              class="needs-calendar"
              label="&calendar.context.export.label;"
              accesskey="&calendar.context.export.accesskey;"
              oncommand="exportEntireCalendar(document.getElementById('list-calendars-context-menu').contextCalendar);"/>
    <menuitem id="list-calendars-context-publish"
              class="needs-calendar"
              label="&calendar.context.publish.label;"
              accesskey="&calendar.context.publish.accesskey;"
              command="calendar_publish_selected_calendar_command"/>
    <menuseparator id="list-calendars-context-export-menuseparator"
              class="needs-calendar"/>
    <menuitem id="list-calendar-context-reload"
              class="needs-calendar"
              data-l10n-id="list-calendar-context-reload-menuitem"
              oncommand="document.getElementById('list-calendars-context-menu').contextCalendar.refresh();"/>
    <menuseparator id="list-calendars-context-reload-menuseparator"
                   class="needs-calendar"/>
    <menuitem id="list-calendars-context-edit"
              class="needs-calendar"
              label="&calendar.context.properties.label;"
              accesskey="&calendar.context.properties.accesskey;"
              command="calendar_edit_calendar_command"/>
  </menupopup>

  <!-- CALENDAR ITEM CONTEXT MENU -->
  <menupopup id="calendar-item-context-menu"
             onpopupshowing="return setupContextItemType(event, currentView().getSelectedItems());">
    <menuitem id="calendar-item-context-menu-view-menuitem"
              label="&calendar.context.modifyorviewitem.label;"
              accesskey="&calendar.context.modifyorviewitem.accesskey;"
              command="calendar_view_event_command"/>
    <menuitem id="calendar-item-context-menu-modify-menuitem"
              data-l10n-id="calendar-item-context-menu-modify-menuitem"
              command="calendar_modify_event_command"
              disabled="true" />
    <menuitem id="calendar-item-context-menu-newevent-menutitem"
              label="&calendar.context.newevent.label;"
              accesskey="&calendar.context.newevent.accesskey;"
              key="calendar-new-event-key"
              command="calendar_new_event_context_command"/>
    <menuitem id="calendar-item-context-menu-newtodo-menuitem"
              label="&calendar.context.newtodo.label;"
              accesskey="&calendar.context.newtodo.accesskey;"
              key="calendar-new-todo-key"
              command="calendar_new_todo_context_command"/>
    <menuseparator id="calendar-item-context-menuseparator-adddeletemodify"/>
    <menuitem id="calendar-item-context-menu-cut-menuitem"
              label="&calendar.context.cutevent.label;"
              accesskey="&calendar.context.cutevent.accesskey;"
              key="key_cut"
              command="cmd_cut"/>
    <menuitem id="calendar-item-context-menu-copy-menuitem"
              label="&calendar.context.copyevent.label;"
              accesskey="&calendar.context.copyevent.accesskey;"
              key="key_copy"
              command="cmd_copy"/>
    <menuitem id="calendar-item-context-menu-paste-menuitem"
              label="&calendar.context.pasteevent.label;"
              accesskey="&calendar.context.pasteevent.accesskey;"
              key="key_paste"
              command="cmd_paste"/>
    <menuseparator id="calendar-item-context-separator-cutcopypaste"/>
    <menu id="calendar-item-context-menu-convert-menu"
          label="&calendar.context.convertmenu.label;"
          accesskey="&calendar.context.convertmenu.accesskey.calendar;">
      <menupopup id="calendar-item-context-menu-convert-menupopup">
        <menuitem id="calendar-view-context-menu-convert-message-menuitem"
                  label="&calendar.context.convertmenu.message.label;"
                  accesskey="&calendar.context.convertmenu.message.accesskey;"
                  oncommand="calendarMailButtonDNDObserver.onDropItems(currentView().getSelectedItems())"/>
        <menuitem id="calendar-item-context-menu-convert-event-menuitem"
                  class="todo-only"
                  label="&calendar.context.convertmenu.event.label;"
                  accesskey="&calendar.context.convertmenu.event.accesskey;"
                  oncommand="calendarCalendarButtonDNDObserver.onDropItems(currentView().getSelectedItems())"/>
        <menuitem id="calendar-item-context-menu-convert-task-menuitem"
                  class="event-only"
                  label="&calendar.context.convertmenu.task.label;"
                  accesskey="&calendar.context.convertmenu.task.accesskey;"
                  oncommand="calendarTaskButtonDNDObserver.onDropItems(currentView().getSelectedItems())"/>
      </menupopup>
    </menu>
    <menuseparator id="calendar-menuseparator-before-delete"/>
    <!-- the label and accesskey of the following menuitem is set during runtime,
        and depends on whether the item is a task or an event -->
    <menuitem id="calendar-item-context-menu-delete-menuitem"
              key="calendar-delete-item-key"
              command="calendar_delete_event_command"/>
    <menu id="calendar-item-context-menu-attendance-menu"
          label="&calendar.context.attendance.menu.label;"
          accesskey="&calendar.context.attendance.menu.accesskey;"
          oncommand="setContextPartstat(event.target, currentView().getSelectedItems())"
          observes="calendar_attendance_command">
      <menupopup id="calendar-item-context-menu-attendance-menupopup">
        <label id="calendar-item-context-attendance-thisoccurrence-label"
              class="calendar-context-heading-label"
              scope="this-occurrence"
              value="&calendar.context.attendance.occurrence.label;"/>
        <menu id="calendar-item-context-menu-attendance-accepted-menu"
              label="&calendar.context.attendance.occ.accepted.label;"
              accesskey="&calendar.context.attendance.occ.accepted.accesskey;"
              value="ACCEPTED"
              name="calendar-item-context-attendance"
              scope="this-occurrence">
          <menupopup id="calendar-item-context-menu-occurrence-accepted-menupopup">
            <menuitem id="calendar-item-context-menu-attend-accept-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="AUTO"/>
            <menuitem id="calendar-item-context-menu-attend-accept-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="calendar-item-context-menu-attendance-tentative-menu"
              label="&calendar.context.attendance.occ.tentative.label;"
              accesskey="&calendar.context.attendance.occ.tentative.accesskey;"
              value="TENTATIVE"
              name="calendar-item-context-attendance"
              scope="this-occurrence">
          <menupopup id="calendar-item-context-menu-occurrence-tentative-menupopup">
            <menuitem id="calendar-item-context-menu-attend-tentative-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="AUTO"/>
            <menuitem id="calendar-item-context-menu-attend-tentative-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="calendar-item-context-menu-attendance-declined-menu"
              label="&calendar.context.attendance.occ.declined.label;"
              accesskey="&calendar.context.attendance.occ.declined.accesskey;"
              value="DECLINED"
              name="calendar-item-context-attendance"
              scope="this-occurrence">
          <menupopup id="calendar-item-context-menu-occurrence-tentative-menupopup">
            <menuitem id="calendar-item-context-menu-attend-declined-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="DECLINED"
                      respmode="AUTO"/>
            <menuitem id="calendar-item-context-menu-attend-declined-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="DECLINED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menuitem id="calendar-item-context-menu-attendance-delegated-menu"
                  label="&calendar.context.attendance.occ.delegated.label;"
                  name="calendar-item-context-attendance"
                  scope="this-occurrence"
                  value="DELEGATED"/>
        <menuitem id="calendar-item-context-menu-attendance-needsaction-menu"
                  label="&calendar.context.attendance.occ.needsaction.label;"
                  name="calendar-item-context-attendance"
                  scope="this-occurrence"
                  value="NEEDS-ACTION"/>
        <label id="calendar-item-context-attendance-alloccurrence-label"
              class="calendar-context-heading-label"
              scope="all-occurrences"
              value="&calendar.context.attendance.all2.label;"/>
        <menu id="calendar-item-context-menu-attendance-accepted-all-menu"
              label="&calendar.context.attendance.all.accepted.label;"
              accesskey="&calendar.context.attendance.all.accepted.accesskey;"
              value="ACCEPTED"
              name="calendar-item-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="calendar-item-context-menu-alloccurrences-accept-menupopup">
            <menuitem id="calendar-item-context-menu-attend-accept-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="AUTO"/>
            <menuitem id="calendar-item-context-menu-attend-accept-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="calendar-item-context-menu-attendance-tentative-all-menu"
              label="&calendar.context.attendance.all.tentative.label;"
              accesskey="&calendar.context.attendance.all.tentative.accesskey;"
              value="TENTATIVE"
              name="calendar-item-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="calendar-item-context-menu-alloccurrences-tentative-menupopup">
            <menuitem id="calendar-item-context-menu-attend-tentative-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="AUTO"/>
            <menuitem id="calendar-item-context-menu-attend-tentative-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="calendar-item-context-menu-attendance-decline-all-menu"
              label="&calendar.context.attendance.all.declined.label;"
              accesskey="&calendar.context.attendance.all.declined.accesskey;"
              value="DECLINED"
              name="calendar-item-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="calendar-item-context-menu-alloccurrences-decline-menupopup">
            <menuitem id="calendar-item-context-menu-attend-declined-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="DECLINED"
                      respmode="AUTO"/>
            <menuitem id="calendar-item-context-menu-attend-declined-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="DECLINED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menuitem id="calendar-item-context-menu-attendance-delegated-all-menu"
                  label="&calendar.context.attendance.all.delegated.label;"
                  name="calendar-item-context-attendance-delegated-all"
                  scope="all-occurrences"
                  value="DELEGATED"/>
        <menuitem id="calendar-item-context-menu-attendance-needsaction-all-menu"
                  label="&calendar.context.attendance.all.needsaction.label;"
                  name="calendar-item-context-attendance-needaction-all"
                  scope="all-occurrences"
                  value="NEEDS-ACTION"/>
      </menupopup>
    </menu>
  </menupopup>

  <!-- CALENDAR VIEW CONTEXT MENU -->
  <menupopup id="calendar-view-context-menu">
    <menuitem id="calendar-view-context-menu-newevent"
              label="&calendar.context.newevent.label;"
              command="calendar_new_event_context_command"
              accesskey="&calendar.context.newevent.accesskey;"
              key="calendar-new-event-key"/>
    <menuitem id="calendar-view-context-menu-newtodo"
              label="&calendar.context.newtodo.label;"
              command="calendar_new_todo_context_command"
              accesskey="&calendar.context.newtodo.accesskey;"
              key="calendar-new-todo-key"/>
    <!-- These labels are set dynamically, based on the current view -->
    <menuitem id="calendar-view-context-menu-previous"
              command="calendar_view_prev_command"/>
    <menuitem id="calendar-view-context-menu-next"
              command="calendar_view_next_command"/>
    <menuseparator id="calendar-item-context-separator-cutcopypaste"/>
    <!-- Cut and copy doesn't make sense in the views, but only showing paste
        makes it look like something is missing. Disable by default. -->
    <menuitem id="calendar-view-context-menu-cut-menuitem"
              label="&calendar.context.cutevent.label;"
              accesskey="&calendar.context.cutevent.accesskey;"
              key="key_cut"
              disabled="true"/>
    <menuitem id="calendar-view-context-menu-copy-menuitem"
              label="&calendar.context.copyevent.label;"
              accesskey="&calendar.context.copyevent.accesskey;"
              key="key_copy"
              disabled="true"/>
    <menuitem id="calendar-view-context-menu-paste-menuitem"
              label="&calendar.context.pasteevent.label;"
              accesskey="&calendar.context.pasteevent.accesskey;"
              key="key_paste"
              command="cmd_paste"/>
  </menupopup>

  <!-- TASK ITEM CONTEXT MENU -->
  <menupopup id="taskitem-context-menu"
            onpopupshowing="changeContextMenuForTask(event);"
            onpopuphiding="handleTaskContextMenuStateChange(event);">
    <menuitem id="task-context-menu-modify"
              label="&calendar.context.modifyorviewtask.label;"
              accesskey="&calendar.context.modifyorviewtask.accesskey;"
              command="calendar_modify_todo_command"/>
    <menuitem id="task-context-menu-modify-todaypane"
              label="&calendar.context.modifyorviewtask.label;"
              accesskey="&calendar.context.modifyorviewtask.accesskey;"
              command="calendar_modify_todo_todaypane_command"/>
    <menuitem id="task-context-menu-new"
              label="&calendar.context.newtodo.label;"
              accesskey="&calendar.context.newtodo.accesskey;"
              key="calendar-new-todo-key"
              command="calendar_new_todo_command"/>
    <menuitem id="task-context-menu-new-todaypane"
              label="&calendar.context.newtodo.label;"
              accesskey="&calendar.context.newtodo.accesskey;"
              key="calendar-new-todo-key"
              command="calendar_new_todo_todaypane_command"/>
    <menuseparator id="task-context-menuseparator-cutcopypaste"/>
    <menuitem id="task-context-menu-cut-menuitem"
              label="&calendar.context.cutevent.label;"
              accesskey="&calendar.context.cutevent.accesskey;"
              key="key_cut"
              command="cmd_cut"/>
    <menuitem id="task-context-menu-copy-menuitem"
              label="&calendar.context.copyevent.label;"
              accesskey="&calendar.context.copyevent.accesskey;"
              key="key_copy"
              command="cmd_copy"/>
    <menuitem id="task-context-menu-paste-menuitem"
              label="&calendar.context.pasteevent.label;"
              accesskey="&calendar.context.pasteevent.accesskey;"
              key="key_paste"
              command="cmd_paste"/>
    <menuseparator id="calendar-menuseparator-beforemarkcompleted"/>
    <menuitem id="calendar-context-markcompleted"
              type="checkbox"
              autocheck="false"
              label="&calendar.context.markcompleted.label;"
              accesskey="&calendar.context.markcompleted.accesskey;"
              command="calendar_toggle_completed_command"/>
    <menu id="task-context-menu-progress"
          label="&calendar.context.progress.label;"
          accesskey="&calendar.context.progress.accesskey;"
          command="calendar_general-progress_command">
      <menupopup is="calendar-task-progress-menupopup"/>
    </menu>
    <menu id="task-context-menu-priority"
          label="&calendar.context.priority.label;"
          accesskey="&calendar.context.priority.accesskey;"
          command="calendar_general-priority_command">
      <menupopup is="calendar-task-priority-menupopup"/>
    </menu>
    <menu id="task-context-menu-postpone"
          label="&calendar.context.postpone.label;"
          accesskey="&calendar.context.postpone.accesskey;"
          command="calendar_general-postpone_command">
      <menupopup id="task-context-postpone-menupopup">
        <menuitem id="task-context-postpone-1hour"
                  label="&calendar.context.postpone.1hour.label;"
                  accesskey="&calendar.context.postpone.1hour.accesskey;"
                  command="calendar_postpone-1hour_command"/>
        <menuitem id="task-context-postpone-1day"
                  label="&calendar.context.postpone.1day.label;"
                  accesskey="&calendar.context.postpone.1day.accesskey;"
                  command="calendar_postpone-1day_command"/>
        <menuitem id="task-context-postpone-1week"
                  label="&calendar.context.postpone.1week.label;"
                  accesskey="&calendar.context.postpone.1week.accesskey;"
                  command="calendar_postpone-1week_command"/>
      </menupopup>
    </menu>
    <menu id="calendar-context-calendar-menu"
          label="&calendar.calendar.label;"
          accesskey="&calendar.calendar.accesskey;">
          <menupopup id="calendar-context-calendar-menupopup"
                    onpopupshowing="addCalendarNames(event);"/>
    </menu>
    <menuseparator id="task-context-menu-separator-conversion"/>
    <menu id="task-context-menu-convert"
          label="&calendar.context.convertmenu.label;"
          accesskey="&calendar.context.convertmenu.accesskey.calendar;">
      <menupopup id="task-context-convert-menupopup">
        <menuitem id="calendar-context-converttomessage"
                  label="&calendar.context.convertmenu.message.label;"
                  accesskey="&calendar.context.convertmenu.message.accesskey;"
                  oncommand="tasksToMail()"/>
        <menuitem id="calendar-context-converttoevent"
                  label="&calendar.context.convertmenu.event.label;"
                  accesskey="&calendar.context.convertmenu.event.accesskey;"
                  oncommand="tasksToEvents()"/>
      </menupopup>
    </menu>
    <menuseparator/>
    <menuitem id="task-context-menu-delete"
              label="&calendar.context.deletetask.label;"
              accesskey="&calendar.context.deletetask.accesskey;"
              command="calendar_delete_todo_command"/>
    <menu id="task-context-menu-attendance-menu"
          label="&calendar.context.attendance.menu.label;"
          accesskey="&calendar.context.attendance.menu.accesskey;"
          oncommand="setContextPartstat(event.target, getSelectedTasks())"
          observes="calendar_attendance_command">
      <menupopup id="task-context-menu-attendance-menupopup">
        <label id="task-context-attendance-thisoccurrence-label"
              class="calendar-context-heading-label"
              scope="this-occurrence"
              value="&calendar.context.attendance.occurrence.label;"/>
        <menu id="task-context-menu-attendance-accepted-menu"
              label="&calendar.context.attendance.occ.accepted.label;"
              accesskey="&calendar.context.attendance.occ.accepted.accesskey;"
              value="ACCEPTED"
              name="task-context-attendance"
              scope="this-occurrence">
          <menupopup id="task-context-menu-occurrence-accepted-menupopup">
            <menuitem id="task-context-menu-attend-accept-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-accept-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="task-context-menu-attendance-tentative-menu"
              label="&calendar.context.attendance.occ.tentative.label;"
              accesskey="&calendar.context.attendance.occ.tentative.accesskey;"
              value="TENTATIVE"
              name="task-context-attendance"
              scope="this-occurrence">
          <menupopup id="task-context-menu-occurrence-tentative-menupopup">
            <menuitem id="task-context-menu-attend-tentative-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-tentative-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="task-context-menu-attendance-declined-menu"
              label="&calendar.context.attendance.occ.declined.label;"
              accesskey="&calendar.context.attendance.occ.declined.accesskey;"
              value="DECLINED"
              name="task-context-attendance"
              scope="this-occurrence">
          <menupopup id="task-context-menu-occurrence-tentative-menupopup">
            <menuitem id="task-context-menu-attend-declined-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="DECLINED"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-declined-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="DECLINED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="task-context-menu-attendance-inprogress-menu"
              label="&calendar.context.attendance.occ.inprogress.label;"
              accesskey="&calendar.context.attendance.occ.inprogress.accesskey;"
              value="IN-PROGRESS"
              name="task-context-attendance"
              scope="this-occurrence">
          <menupopup id="task-context-menu-occurrence-inprogress-menupopup">
            <menuitem id="task-context-menu-attend-inprogress-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="IN-PROGRESS"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-inprogress-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="IN-PROGRESS"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="task-context-menu-attendance-completed-menu"
              label="&calendar.context.attendance.occ.completed.label;"
              accesskey="&calendar.context.attendance.occ.completed.accesskey;"
              value="COMPLETED"
              name="task-context-attendance"
              scope="this-occurrence">
          <menupopup id="task-context-menu-occurrence-completed-menupopup">
            <menuitem id="task-context-menu-attend-completed-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="COMPLETED"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-completed-dontsend-menuitem"
                      scope="this-occurrence"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="COMPLETED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menuitem id="task-context-menu-attendance-delegated-menu"
                  label="&calendar.context.attendance.occ.delegated.label;"
                  name="task-context-attendance"
                  scope="this-occurrence"
                  value="DELEGATED"/>
        <menuitem id="task-context-menu-attendance-needsaction-menu"
                  label="&calendar.context.attendance.occ.needsaction.label;"
                  name="task-context-attendance"
                  scope="this-occurrence"
                  value="NEEDS-ACTION"/>
        <label id="task-context-attendance-alloccurrence-label"
              class="calendar-context-heading-label"
              scope="all-occurrences"
              value="&calendar.context.attendance.all2.label;"/>
        <menu id="task-context-menu-attendance-accepted-all-menu"
              label="&calendar.context.attendance.all.accepted.label;"
              accesskey="&calendar.context.attendance.all.accepted.accesskey;"
              value="ACCEPTED"
              name="task-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="task-context-menu-alloccurrences-accept-menupopup">
            <menuitem id="task-context-menu-attend-accept-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-accept-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="ACCEPTED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="task-context-menu-attendance-tentative-all-menu"
              label="&calendar.context.attendance.all.tentative.label;"
              accesskey="&calendar.context.attendance.all.tentative.accesskey;"
              value="TENTATIVE"
              name="task-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="task-context-menu-alloccurrences-tentative-menupopup">
            <menuitem id="task-context-menu-attend-tentative-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-tentative-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="TENTATIVE"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="task-context-menu-attendance-decline-all-menu"
              label="&calendar.context.attendance.all.declined.label;"
              accesskey="&calendar.context.attendance.all.declined.accesskey;"
              value="DECLINED"
              name="task-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="task-context-menu-alloccurrences-decline-menupopup">
            <menuitem id="task-context-menu-attend-declined-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="DECLINED"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-declined-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="DECLINED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="task-context-menu-attendance-inprogress-all-menu"
              label="&calendar.context.attendance.all.inprogress.label;"
              accesskey="&calendar.context.attendance.all.inprogress.accesskey;"
              value="IN-PROGRESS"
              name="task-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="task-context-menu-alloccurrences-inprogress-menupopup">
            <menuitem id="task-context-menu-attend-inprogress-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="IN-PROGRESS"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-inprogress-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="IN-PROGRESS"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menu id="task-context-menu-attendance-completed-all-menu"
              label="&calendar.context.attendance.all.completed.label;"
              accesskey="&calendar.context.attendance.all.completed.accesskey;"
              value="COMPLETED"
              name="task-context-attendance-all"
              scope="all-occurrences">
          <menupopup id="task-context-menu-alloccurrences-completed-menupopup">
            <menuitem id="task-context-menu-attend-completed-all-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.send.label;"
                      accesskey="&calendar.context.attendance.send.accesskey;"
                      respvalue="COMPLETED"
                      respmode="AUTO"/>
            <menuitem id="task-context-menu-attend-completed-all-dontsend-menuitem"
                      scope="all-occurrences"
                      label="&calendar.context.attendance.dontsend.label;"
                      accesskey="&calendar.context.attendance.dontsend.accesskey;"
                      respvalue="COMPLETED"
                      respmode="NONE"/>
          </menupopup>
        </menu>
        <menuitem id="task-context-menu-attendance-delegated-all-menu"
                  label="&calendar.context.attendance.all.delegated.label;"
                  name="task-context-attendance-delegated-all"
                  scope="all-occurrences"
                  value="DELEGATED"/>
        <menuitem id="task-context-menu-attendance-needsaction-all-menu"
                  label="&calendar.context.attendance.all.delegated.label;"
                  name="task-context-attendance-needaction-all"
                  scope="all-occurrences"
                  value="NEEDS-ACTION"/>
      </menupopup>
    </menu>
    <menuseparator id="task-context-menu-separator-filter"/>
    <menu id="task-context-menu-filter-todaypane"
          label="&calendar.tasks.view.filtertasks.label;"
          accesskey="&calendar.tasks.view.filtertasks.accesskey;">
      <menupopup id="task-context-menu-filter-todaypane-popup"
                 oncommand="TodayPane.updateCalendarToDoUnifinder(event.target.getAttribute('value'))">
        <menuitem id="task-context-menu-filter-todaypane-current"
                  name="filtergrouptodaypane"
                  value="throughcurrent"
                  type="radio"
                  label="&calendar.task.filter.current.label;"
                  accesskey="&calendar.task.filter.current.accesskey;"/>
        <menuitem id="task-context-menu-filter-todaypane-today"
                  name="filtergrouptodaypane"
                  value="throughtoday"
                  type="radio"
                  label="&calendar.task.filter.today.label;"
                  accesskey="&calendar.task.filter.today.accesskey;"/>
        <menuitem id="task-context-menu-filter-todaypane-next7days"
                  name="filtergrouptodaypane"
                  value="throughsevendays"
                  type="radio"
                  label="&calendar.task.filter.next7days.label;"
                  accesskey="&calendar.task.filter.next7days.accesskey;"/>
        <menuitem id="task-context-menu-filter-todaypane-notstarted"
                  name="filtergrouptodaypane"
                  value="notstarted"
                  type="radio"
                  label="&calendar.task.filter.notstarted.label;"
                  accesskey="&calendar.task.filter.notstarted.accesskey;"/>
        <menuitem id="task-context-menu-filter-todaypane-overdue"
                  name="filtergrouptodaypane"
                  value="overdue"
                  type="radio"
                  label="&calendar.task.filter.overdue.label;"
                  accesskey="&calendar.task.filter.overdue.accesskey;"/>
        <menuitem id="task-context-menu-filter-todaypane-completed"
                  name="filtergrouptodaypane"
                  type="radio"
                  value="completed"
                  label="&calendar.task.filter.completed.label;"
                  accesskey="&calendar.task.filter.completed.accesskey;"/>
        <menuitem id="task-context-menu-filter-todaypane-open"
                  name="filtergrouptodaypane"
                  type="radio"
                  value="open"
                  label="&calendar.task.filter.open.label;"
                  accesskey="&calendar.task.filter.open.accesskey;"/>
        <menuitem id="task-context-menu-filter-todaypane-all"
                  name="filtergrouptodaypane"
                  value="all"
                  type="radio"
                  label="&calendar.task.filter.all.label;"
                  accesskey="&calendar.task.filter.all.accesskey;"/>
      </menupopup>
    </menu>
  </menupopup>

  <!-- TASKVIEW LINK CONTEXT MENU -->
  <menupopup id="taskview-link-context-menu">
    <menuitem id="taskview-link-context-menu-copy"
              label="&calendar.copylink.label;"
              accesskey="&calendar.copylink.accesskey;"
              oncommand="taskViewCopyLink(this.parentNode.triggerNode)"/>
  </menupopup>

  <!-- CALENDAR EVENT DIALOG (IN TAB) TOOLBAR CONTEXT MENU -->
  <menupopup id="event-dialog-toolbar-context-menu"
             onpopupshowing="calendarOnToolbarsPopupShowing(event);">
    <menuseparator id="customizeEventToolbarMenuSeparator"/>
    <menuitem id="CustomizeDialogToolbar"
              label="&event.menu.view.toolbars.customize.label;"
              command="cmd_customize"/>
  </menupopup>
</popupset>

<html:template id="searchBarItemTemplate"
  xmlns="http://www.w3.org/1999/xhtml">
  <global-search-bar data-l10n-id="search-bar-item"
                     data-l10n-attrs="label"
                     aria-keyshortcuts="Control+K">
    <span slot="placeholder" data-l10n-id="search-bar-placeholder-with-key2"></span>
    <img data-l10n-id="search-bar-button"
         slot="button"
         class="search-button-icon"
         src="" />
  </global-search-bar>
</html:template>

<html:template id="writeMessageTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="cmd_newMessage"
          label-id="toolbar-write-message-label"
          data-l10n-id="toolbar-write-message"></button>
</html:template>

<html:template id="moveToTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          popup="toolbarMoveToPopup"
          observes="cmd_moveMessage"
          label-id="toolbar-move-to-label"
          data-l10n-id="toolbar-move-to"></button>
</html:template>

<html:template id="calendarUnifinderTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="calendar_show_unifinder_command"
          aria-pressed="false"
          class="check-button"
          label-id="toolbar-unifinder-label"
          data-l10n-id="toolbar-unifinder"></button>
</html:template>

<html:template id="folderLocationTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="folder-location-button"
          popup="toolbarFolderLocationPopup"
          data-l10n-id="toolbar-folder-location"></button>
</html:template>

<html:template id="editEventTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="calendar_modify_focused_item_command"
          label-id="toolbar-edit-event-label"
          data-l10n-id="toolbar-edit-event"></button>
</html:template>

<html:template id="getMessagesTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="cmd_getMsgsForAuthAccounts"
          label-id="toolbar-get-messages-label"
          data-l10n-id="toolbar-get-messages"></button>
</html:template>

<html:template id="replyTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_reply"
          label-id="toolbar-reply-label"
          data-l10n-id="toolbar-reply"></button>
</html:template>

<html:template id="replyAllTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_replyall"
          label-id="toolbar-reply-all-label"
          data-l10n-id="toolbar-reply-all"></button>
</html:template>

<html:template id="replyToListTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_replylist"
          label-id="toolbar-reply-to-list-label"
          data-l10n-id="toolbar-reply-to-list"></button>
</html:template>

<html:template id="redirectTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_redirect"
          label-id="toolbar-redirect-label"
          data-l10n-id="toolbar-redirect"></button>
</html:template>

<html:template id="archiveTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_archive"
          label-id="toolbar-archive-label"
          data-l10n-id="toolbar-archive"></button>
</html:template>

<html:template id="conversationTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_openConversation"
          label-id="toolbar-conversation-label"
          data-l10n-id="toolbar-conversation"></button>
</html:template>

<html:template id="previousUnreadTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_previousUnreadMsg"
          label-id="toolbar-previous-unread-label"
          data-l10n-id="toolbar-previous-unread"></button>
</html:template>

<html:template id="previousTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_previousMsg"
          label-id="toolbar-previous-label"
          data-l10n-id="toolbar-previous"></button>
</html:template>

<html:template id="nextUnreadTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_nextUnreadMsg"
          label-id="toolbar-next-unread-label"
          data-l10n-id="toolbar-next-unread"></button>
</html:template>

<html:template id="nextTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_nextMsg"
          label-id="toolbar-next-label"
          data-l10n-id="toolbar-next"></button>
</html:template>

<html:template id="junkTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_markAsJunk"
          label-id="toolbar-junk-label"
          data-l10n-id="toolbar-junk"></button>
</html:template>

<html:template id="deleteTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="delete-button"
          label-id="toolbar-delete-label"
          data-l10n-id="toolbar-delete-title"></button>
</html:template>

<html:template id="compactTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="compact-folder-button"
          label-id="toolbar-compact-label"
          data-l10n-id="toolbar-compact"></button>
</html:template>

<html:template id="addAsEventTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="add-to-calendar-button"
          type="event"
          label-id="toolbar-add-as-event-label"
          data-l10n-id="toolbar-add-as-event"></button>
</html:template>

<html:template id="addAsTaskTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="add-to-calendar-button"
          type="task"
          label-id="toolbar-add-as-task-label"
          data-l10n-id="toolbar-add-as-task"></button>
</html:template>

<html:template id="tagMessageTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          popup="toolbarTagPopup"
          observes="cmd_tag"
          label-id="toolbar-tag-message-label"
          data-l10n-id="toolbar-tag-message"></button>
</html:template>

<html:template id="forwardInlineTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_forwardInline"
          label-id="toolbar-forward-inline-label"
          data-l10n-id="toolbar-forward-inline"></button>
</html:template>

<html:template id="forwardAttachmentTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_forwardAttachment"
          label-id="toolbar-forward-attachment-label"
          data-l10n-id="toolbar-forward-attachment"></button>
</html:template>

<html:template id="markAsTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          popup="toolbarMarkPopup"
          observes="cmd_tag"
          label-id="toolbar-mark-as-label"
          data-l10n-id="toolbar-mark-as"></button>
</html:template>

<html:template id="viewPickerTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          popup="toolbarViewPickerPopup"
          label-id="toolbar-view-picker-label"
          data-l10n-id="toolbar-view-picker"></button>
</html:template>

<html:template id="addressBookTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="space-button"
          space="addressbook"
          label-id="toolbar-address-book-label"
          data-l10n-id="toolbar-address-book"></button>
</html:template>

<html:template id="chatTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="space-button"
          space="chat"
          label-id="toolbar-chat-label"
          data-l10n-id="toolbar-chat"></button>
</html:template>

<html:template id="addOnsAndThemesTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="addons-button"
          label-id="toolbar-add-ons-and-themes-label"
          data-l10n-id="toolbar-add-ons-and-themes"></button>
</html:template>

<html:template id="calendarTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="space-button"
          space="calendar"
          label-id="toolbar-calendar-label"
          data-l10n-id="toolbar-calendar"></button>
</html:template>

<html:template id="tasksTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="space-button"
          space="tasks"
          label-id="toolbar-tasks-label"
          data-l10n-id="toolbar-tasks"></button>
</html:template>

<html:template id="mailTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="space-button"
          space="mail"
          label-id="toolbar-mail-label"
          data-l10n-id="toolbar-mail"></button>
</html:template>

<html:template id="printTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_print"
          label-id="toolbar-print-label"
          data-l10n-id="toolbar-print"></button>
</html:template>

<html:template id="quickFilterBarTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="quick-filter-bar-toggle"
          command="cmd_toggleQuickFilterBar"
          class="check-button"
          label-id="toolbar-quick-filter-bar-label"
          data-l10n-id="toolbar-quick-filter-bar"></button>
</html:template>

<html:template id="synchronizeTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="calendar_reload_remote_calendars"
          label-id="toolbar-synchronize-label"
          data-l10n-id="toolbar-synchronize"></button>
</html:template>

<html:template id="newEventTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="calendar_new_event_command"
          label-id="toolbar-new-event-label"
          data-l10n-id="toolbar-new-event"></button>
</html:template>

<html:template id="newTaskTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="calendar_new_todo_command"
          label-id="toolbar-new-task-label"
          data-l10n-id="toolbar-new-task"></button>
</html:template>

<html:template id="goToTodayTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="calendar_go_to_today_command"
          observes="calendar_mode_calendar"
          label-id="toolbar-go-to-today-label"
          data-l10n-id="toolbar-go-to-today"></button>
</html:template>

<html:template id="deleteEventTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="calendar_delete_focused_item_command"
          label-id="toolbar-delete-event-label"
          data-l10n-id="toolbar-delete-event"></button>
</html:template>

<html:template id="printEventTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="unified-toolbar-button"
          command="cmd_print"
          label-id="toolbar-print-event-label"
          data-l10n-id="toolbar-print-event"></button>
</html:template>

<html:template id="goBackTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-go-button"
          direction="back"
          label-id="toolbar-go-back-label"
          data-l10n-id="toolbar-go-back"></button>
</html:template>

<html:template id="goForwardTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-go-button"
          direction="forward"
          label-id="toolbar-go-forward-label"
          data-l10n-id="toolbar-go-forward"></button>
</html:template>

<html:template id="stopTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button is="mail-tab-button"
          command="cmd_stop"
          label-id="toolbar-stop-label"
          data-l10n-id="toolbar-stop"></button>
</html:template>

<html:template id="throbberTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <img class="throbber-icon" alt="" data-l10n-id="toolbar-throbber" />
</html:template>

<html:template id="searchBarTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <form>
    <input type="search" placeholder="" required="required" />
    <div aria-hidden="true"><slot name="placeholder"></slot></div>
    <button class="button button-flat icon-button"><slot name="button"></slot></button>
  </form>
</html:template>

<html:template id="unifiedToolbarTemplate">
  <html:div id="unifiedToolbarContainer">
    <html:div id="unifiedToolbar" role="toolbar">

<toolbarbutton id="spacesPinnedButton"
               type="menu"
               wantdropmarker="false"
               class="button toolbar-button"
               data-l10n-id="spaces-toolbar-pinned-tab-button"
               hidden="true"
               badged="true"
               tabindex="0">
  <menupopup id="spacesButtonMenuPopup">
    <menuitem id="spacesPopupButtonMail"
              data-l10n-id="spaces-pinned-button-menuitem-mail2"
              data-l10n-attrs="acceltext"
              class="menuitem-iconic spaces-popup-menuitem"/>
    <menuitem id="spacesPopupButtonAddressBook"
              data-l10n-id="spaces-pinned-button-menuitem-address-book2"
              data-l10n-attrs="acceltext"
              class="menuitem-iconic spaces-popup-menuitem"/>
    <menuitem id="spacesPopupButtonCalendar"
              data-l10n-id="spaces-pinned-button-menuitem-calendar2"
              data-l10n-attrs="acceltext"
              class="menuitem-iconic spaces-popup-menuitem"/>
    <menuitem id="spacesPopupButtonTasks"
              data-l10n-id="spaces-pinned-button-menuitem-tasks2"
              data-l10n-attrs="acceltext"
              class="menuitem-iconic spaces-popup-menuitem"/>
    <menuitem id="spacesPopupButtonChat"
              data-l10n-id="spaces-pinned-button-menuitem-chat2"
              data-l10n-attrs="acceltext"
              class="menuitem-iconic spaces-popup-menuitem"/>
    <menuseparator id="spacesPopupSettingsSeparator"/>
    <menuitem id="spacesPopupButtonSettings"
              data-l10n-id="spaces-pinned-button-menuitem-settings2"
              data-l10n-attrs="acceltext"
              class="menuitem-iconic spaces-popup-menuitem"/>
    <menuseparator id="spacesPopupAddonsSeparator" collapsed="true"/>
    <menuseparator id="spacesPopupRevealSeparator"/>
    <menuitem id="spacesPopupButtonReveal"
              data-l10n-id="spaces-pinned-button-menuitem-show"
              data-l10n-attrs="acceltext"
              class="menuitem-iconic spaces-popup-menuitem"/>
  </menupopup>
</toolbarbutton>
      <html:ul id="unifiedToolbarContent" class="unified-toolbar">
      </html:ul>
      <html:div id="notification-popup-box" hidden="true">
        <html:img id="addons-notification-icon"
                  src="chrome://messenger/skin/icons/new/compact/extension.svg"
                  alt=""
                  class="notification-anchor-icon"
                  role="button" />
      </html:div>
      <toolbarbutton id="button-appmenu"
                     type="menu"
                     badged="true"
                     class="button toolbar-button button-appmenu"
                     label="&appmenuButton.label;"
                     tooltiptext="&appmenuButton1.tooltip;"
                     tabindex="0" />
    </html:div>

<hbox class="titlebar-buttonbox-container" skipintoolbarset="true">
  <hbox class="titlebar-buttonbox titlebar-color">
    <toolbarbutton class="titlebar-button titlebar-min"
                   titlebar-btn="min"
                   oncommand="window.minimize();"
                   data-l10n-id="messenger-window-minimize-button"/>
    <toolbarbutton class="titlebar-button titlebar-max"
                   titlebar-btn="max"
                   oncommand="window.maximize();"
                   data-l10n-id="messenger-window-maximize-button"/>
    <toolbarbutton class="titlebar-button titlebar-restore"
                   titlebar-btn="max"
                   oncommand="window.restore();"
                   data-l10n-id="messenger-window-restore-down-button"/>
    <toolbarbutton class="titlebar-button titlebar-close"
                   titlebar-btn="close"
                   oncommand="window.close()"
                   data-l10n-id="messenger-window-close-button"/>
  </hbox>
</hbox>
  </html:div>
</html:template>

<html:template id="unifiedToolbarCustomizationTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <form id="unifiedToolbarCustomizationContainer"
        aria-labelledby="customizationHeading">
    <h1 id="customizationHeading" data-l10n-id="customize-title"></h1>
    <div role="tablist" id="customizationTabs" data-l10n-id="customize-spaces-tabs"></div>
    <div id="customizationFooter">
      <div>
        <button type="reset"
                class="button"
                data-l10n-id="customize-restore-default"></button>
        <button id="customizationToSettingsButton"
                type="button"
                class="button link-button"
                data-l10n-id="customize-change-appearance"></button>
      </div>
      <div>
        <label id="buttonStyleLabel"
               for="buttonStyle"
               data-l10n-id="customize-button-style-label"></label>
        <select id="buttonStyle" class="select">
          <option value="icons-beside-text"
                  data-l10n-id="customize-button-style-icons-beside-text-option"
                  selected="selected"></option>
          <option value="icons-above-text"
                  data-l10n-id="customize-button-style-icons-above-text-option"></option>
          <option value="icons-only"
                  data-l10n-id="customize-button-style-icons-only-option"></option>
          <option value="text-only"
                  data-l10n-id="customize-button-style-text-only-option"></option>
        </select>
      </div>
      <div>
        <button id="unifiedToolbarCustomizationCancel"
                type="button"
                class="button"
                data-l10n-id="customize-cancel"></button>
        <button type="submit"
                class="button button-primary"
                data-l10n-id="customize-save"
                disabled="disabled"></button>
      </div>
    </div>
    <small id="unifiedToolbarCustomizationUnsavedChanges"
           data-l10n-id="customize-unsaved-changes"
           hidden="hidden"></small>
  </form>
</html:template>

<html:template id="unifiedToolbarTabTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <button role="tab">
    <img alt="" src="" part="icon" />
    <span><slot></slot></span>
  </button>
</html:template>

<html:template id="unifiedToolbarCustomizationPaneTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <ul is="customization-target"
      data-l10n-id="customize-main-toolbar-target"
      class="toolbar-target unified-toolbar"></ul>
  <search-bar data-l10n-id="customize-search-bar"
              data-l10n-attrs="label"
              class="palette-search">
    <img data-l10n-id="search-bar-button"
         slot="button"
         src=""
         class="search-button-icon" />
  </search-bar>
  <div class="customization-palettes">
    <h2 class="space-specific-title"></h2>
    <ul is="customization-palette" class="space-specific-palette">
    </ul>
    <h2 data-l10n-id="customize-palette-generic-title"
        class="generic-palette-title"></h2>
    <ul is="customization-palette" space="all" class="generic-palette">
    </ul>
  </div>
</html:template>

<html:template id="unifiedToolbarCustomizableElementTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <div class="live-content"></div>
  <div class="preview">
    <img src="" alt="" class="preview-icon" />
    <span class="preview-label"></span>
  </div>
</html:template>

<html:template id="unifiedToolbarButtonTemplate"
               xmlns="http://www.w3.org/1999/xhtml">
  <img class="button-icon" alt="" src="" />
  <span class="button-label"></span>
</html:template>


<popupset id="spacesToolbarPopupSet">
  <menupopup id="spacesContextMenu"
             class="no-icon-menupopup no-accel-menupopup">
    <menuitem id="spacesContextNewTabItem"
              class="menuitem-iconic"
              data-l10n-id="spaces-context-new-tab-item"/>
    <menuitem id="spacesContextNewWindowItem"
              class="menuitem-iconic"
              data-l10n-id="spaces-context-new-window-item"/>
    <menuseparator id="spacesContextMenuSeparator" hidden="true"/>
  </menupopup>

  <menupopup id="settingsContextMenu"
             class="no-icon-menupopup no-accel-menupopup">
    <menuitem id="settingsContextOpenSettingsItem"
              class="menuitem-iconic"
              data-l10n-id="settings-context-open-settings-item2"/>
    <menuitem id="settingsContextOpenAccountSettingsItem"
              class="menuitem-iconic"
              data-l10n-id="settings-context-open-account-settings-item2"/>
    <menuitem id="settingsContextOpenAddonsItem"
              class="menuitem-iconic"
              data-l10n-id="settings-context-open-addons-item2"/>
    <menuseparator/>
    <menuitem id="settingsContextOpenCustomizeItem"
              class="menuitem-iconic"
              data-l10n-id="menuitem-customize-label"/>
  </menupopup>

  <menupopup id="spacesToolbarContextMenu"
             class="no-icon-menupopup no-accel-menupopup">
    <menuitem id="spacesToolbarContextCustomize"
              class="menuitem-iconic"
              data-l10n-id="menuitem-customize-label"
              oncommand="gSpacesToolbar.showCustomize();"/>
  </menupopup>

  <menupopup id="spacesToolbarAddonsPopup" type="arrow"
             class="no-accel-menupopup"
             onpopuphidden="gSpacesToolbar.spacesToolbarAddonsPopupClosed();">
  </menupopup>
</popupset>

<html:div role="toolbar" id="spacesToolbar" xmlns="http://www.w3.org/1999/xhtml"
          class="spaces-toolbar"
          data-l10n-id="spaces-toolbar-element"
          data-l10n-attrs="toolbarname"
          aria-orientation="vertical"
          hidden="hidden">
  <!-- Hidden element used to fetch the style of an "active" button. -->
  <span id="spacesAccentPlaceholder" hidden="hidden"></span>

  <!-- Primary tabs. -->
  <div class="spaces-toolbar-container spaces-toolbar-top-container">
    <button id="mailButton"
            data-l10n-id="spaces-toolbar-button-mail2"
            class="spaces-toolbar-button"
            tabindex="0">
      <img src="" alt="" />
    </button>
    <button id="addressBookButton"
            data-l10n-id="spaces-toolbar-button-address-book2"
            class="spaces-toolbar-button"
            tabindex="-1">
      <img src="" alt="" />
    </button>
    <button id="calendarButton"
            data-l10n-id="spaces-toolbar-button-calendar2"
            class="spaces-toolbar-button"
            tabindex="-1">
      <img src="" alt="" />
    </button>
    <button id="tasksButton"
            data-l10n-id="spaces-toolbar-button-tasks2"
            class="spaces-toolbar-button"
            tabindex="-1">
      <img src="" alt="" />
    </button>
    <button id="chatButton"
            data-l10n-id="spaces-toolbar-button-chat2"
            class="spaces-toolbar-button"
            tabindex="-1">
      <span class="spaces-badge-container"></span>
      <img src="" alt="" />
    </button>
  </div>

  <div id="spacesToolbarAddonsContainer" class="spaces-toolbar-container">
    <!-- Special container to allow add-ons to add buttons. -->
  </div>
  <button id="spacesToolbarAddonsOverflowButton"
          data-l10n-id="spaces-toolbar-button-overflow"
          class="spaces-toolbar-button"
          aria-expanded="false"
          aria-haspopup="menu"
          aria-controls="spacesToolbarAddonsPopup"
          hidden="hidden"
          tabindex="-1">
    <img src="" alt="" />
  </button>

  <div class="spaces-toolbar-container spaces-toolbar-bottom-container">
    <!-- Settings button. -->
    <button id="settingsButton"
            data-l10n-id="spaces-toolbar-button-settings2"
            class="spaces-toolbar-button"
            tabindex="-1">
      <img src="" alt="" />
    </button>

    <!-- Collapse button. -->
    <button id="collapseButton"
            data-l10n-id="spaces-toolbar-button-hide"
            class="spaces-toolbar-button"
            tabindex="-1">
      <img src="" alt="" />
    </button>
  </div>
</html:div>

<panel id="spacesToolbarCustomizationPanel"
       type="arrow"
       orient="vertical"
       class="cui-widget-panel popup-panel panel-no-padding"
       noautohide="true"
       onpopuphidden="gSpacesToolbar.onCustomizePopupHidden();">
  <!-- Keep the noautohide attribute to true to prevent the panel from closing
    when the color picker appears. -->
  <html:div class="popup-panel-body" xmlns="http://www.w3.org/1999/xhtml">
    <h3 data-l10n-id="spaces-customize-panel-title"></h3>

    <div class="popup-panel-options-grid">
      <label for="spacesBackgroundColor"
             data-l10n-id="spaces-customize-background-color"></label>
      <input type="color" id="spacesBackgroundColor" />

      <label for="spacesIconsColor"
             data-l10n-id="spaces-customize-icon-color"></label>
      <input type="color" id="spacesIconsColor" />

      <label for="spacesAccentBgColor"
             data-l10n-id="spaces-customize-accent-background-color"></label>
      <input type="color" id="spacesAccentBgColor" />

      <label for="spacesAccentTextColor"
             data-l10n-id="spaces-customize-accent-text-color"></label>
      <input type="color" id="spacesAccentTextColor" />
    </div>

    <div class="popup-panel-buttons-container">
      <button type="button"
              data-l10n-id="spaces-customize-button-restore"
              onclick="gSpacesToolbar.resetColorCustomization();">
      </button>
      <button type="button"
              data-l10n-id="customize-panel-button-save"
              onclick="gSpacesToolbar.closeCustomize();"
              class="primary">
      </button>
    </div>
  </html:div>
</panel>

<!--
  GTK needs to draw behind the lightweight theme toolbox backgrounds, thus the
  extra box. Also this box allows a negative margin-top to slide the toolbox off
  screen in fullscreen layout.
-->
<box id="navigation-toolbox-background">
  <toolbox id="navigation-toolbox" flex="1" labelalign="end" defaultlabelalign="end">

    <vbox id="titlebar">
      <html:unified-toolbar></html:unified-toolbar>
      <!-- Menu -->
      <toolbar id="toolbar-menubar"
               class="chromeclass-menubar themeable-full"
               type="menubar"
               data-l10n-id="toolbar-context-menu-menu-bar"
               data-l10n-attrs="toolbarname"
               context="toolbar-context-menu"
               mode="icons"
               insertbefore="tabs-toolbar"
               prependmenuitem="true">

<menubar id="mail-menubar">
    <!-- File -->
    <menu id="menu_File"
          label="&fileMenu.label;"
          accesskey="&fileMenu.accesskey;">
      <menupopup id="menu_FilePopup" onpopupshowing="file_init();">
      <menu id="menu_New"
            label="&newMenu.label;"
            accesskey="&newMenu.accesskey;">
        <menupopup id="menu_NewPopup" onpopupshowing="menu_new_init();">
          <menuitem id="menu_newNewMsgCmd" label="&newNewMsgCmd.label;"
                    accesskey="&newNewMsgCmd.accesskey;"
                    key="key_newMessage2"
                    command="cmd_newMessage"/>
          <menuitem id="calendar-new-event-menuitem"
                    class="hide-when-calendar-deactivated"
                    label="&lightning.menupopup.new.event.label;"
                    accesskey="&lightning.menupopup.new.event.accesskey;"
                    key="calendar-new-event-key"
                    command="calendar_new_event_command"/>
          <menuitem id="calendar-new-task-menuitem"
                    class="hide-when-calendar-deactivated"
                    label="&lightning.menupopup.new.task.label;"
                    accesskey="&lightning.menupopup.new.task.accesskey;"
                    key="calendar-new-todo-key"
                    command="calendar_new_todo_command"/>
          <menuseparator id="calendar-after-new-task-menuseparator"
                          class="hide-when-calendar-deactivated"
                          observes="menu_newFolder"/>
          <menuitem id="menu_newFolder" label="&newFolderCmd.label;"
                    command="cmd_newFolder"
                    accesskey="&newFolderCmd.accesskey;"/>
          <menuitem id="menu_newVirtualFolder" label="&newVirtualFolderCmd.label;"
                    command="cmd_newVirtualFolder"
                    accesskey="&newVirtualFolderCmd.accesskey;"/>
          <menuseparator id="newAccountPopupMenuSeparator"/>
          <menuitem id="newCreateEmailAccountMenuItem"
                    label="&newCreateEmailAccountCmd.label;"
                    accesskey="&newCreateEmailAccountCmd.accesskey;"
                    oncommand="openAccountProvisionerTab();"/>
          <menuitem id="newMailAccountMenuItem"
                    label="&newExistingEmailAccountCmd.label;"
                    accesskey="&newExistingEmailAccountCmd.accesskey;"
                    oncommand="openAccountSetupTab();"/>
          <menuitem id="newIMAccountMenuItem"
                    label="&newIMAccountCmd.label;"
                    accesskey="&newIMAccountCmd.accesskey;"
                    oncommand="openIMAccountWizard();"/>
          <menuitem id="newFeedAccountMenuItem"
                    label="&newFeedAccountCmd.label;"
                    accesskey="&newFeedAccountCmd.accesskey;"
                    oncommand="AddFeedAccount();"/>
          <menuitem id="newNewsgroupAccountMenuItem"
                    data-l10n-id="file-new-newsgroup-account"
                    oncommand="openNewsgroupAccountWizard();"/>
          <menuitem id="calendar-new-calendar-menuitem"
                    label="&lightning.menupopup.new.calendar.label;"
                    command="calendar_new_calendar_command"
                    accesskey="&lightning.menupopup.new.calendar.accesskey;"/>
          <menuseparator id="newPopupMenuSeparator"/>
          <menuitem id="menu_newCard"
                    label="&newContactCmd.label;"
                    accesskey="&newContactCmd.accesskey;"
                    command="cmd_newCard"/>
          <menuitem id="newIMContactMenuItem"
                    label="&newIMContactCmd.label;"
                    accesskey="&newIMContactCmd.accesskey;"
                    command="cmd_addChatBuddy"/>
        </menupopup>
      </menu>
      <menu id="menu_Open"
            mode="calendar"
            label="&openMenuCmd.label;"
            accesskey="&openMenuCmd.accesskey;">
        <menupopup id="menu_OpenPopup">
          <menuitem id="openMessageFileMenuitem"
                    label="&openMessageFileCmd.label;"
                    accesskey="&openMessageFileCmd.accesskey;"
                    oncommand="MsgOpenFromFile();"/>
          <menuitem id="calendar-open-calendar-file-menuitem"
                    label="&lightning.menupopup.open.calendar.label;"
                    accesskey="&lightning.menupopup.open.calendar.accesskey;"
                    oncommand="openLocalCalendar();"/>
        </menupopup>
      </menu>
      <menuitem id="menu_close"
                label="&closeCmd.label;"
                key="key_close"
                accesskey="&closeCmd.accesskey;"
                command="cmd_close"/>
      <menuseparator id="fileMenuAfterCloseSeparator"/>
      <menuitem id="calendar-save-menuitem"
                class="hide-when-calendar-deactivated"
                label="&event.menu.item.save.label;"
                accesskey="&event.menu.item.save.tab.accesskey;"
                key="save-key"
                command="cmd_save"/>
      <menuitem id="calendar-save-and-close-menuitem"
                class="hide-when-calendar-deactivated"
                label="&event.menu.item.saveandclose.label;"
                accesskey="&event.menu.item.saveandclose.tab.accesskey;"
                command="cmd_accept"/>
      <menu id="menu_saveAs"
            label="&saveAsMenu.label;" accesskey="&saveAsMenu.accesskey;">
        <menupopup id="menu_SavePopup">
          <menuitem id="menu_saveAsFile"
                    data-l10n-id="menu-file-save-as-file"
                    key="key_saveAsFile"
                    command="cmd_saveAsFile"/>
          <menuitem id="menu_saveAsTemplate"
                    label="&saveAsTemplateCmd.label;"
                    accesskey="&saveAsTemplateCmd.accesskey;"
                    command="cmd_saveAsTemplate"/>
        </menupopup>
      </menu>
      <menuseparator id="fileMenuAfterSaveSeparator"/>
      <menu label="&getNewMsgForCmd.label;" accesskey="&getNewMsgForCmd.accesskey;"
            id="menu_getAllNewMsg"
            oncommand="MsgGetMessagesForAccount();">
        <menupopup is="folder-menupopup" id="menu_getAllNewMsgPopup"
                    expandFolders="false"
                    oncommand="MsgGetMessagesForAccount(event.target._folder); event.stopPropagation();">
          <menuitem id="menu_getnewmsgs_all_accounts"
                    label="&getAllNewMsgCmdPopupMenu.label;"
                    accesskey="&getAllNewMsgCmdPopupMenu.accesskey;"
                    key="key_getAllNewMessages"
                    command="cmd_getMsgsForAuthAccounts"/>
          <menuitem id="menu_getnewmsgs_current_account"
                    label="&getNewMsgCurrentAccountCmdPopupMenu.label;"
                    accesskey="&getNewMsgCurrentAccountCmdPopupMenu.accesskey;"
                    key="key_getNewMessages"
                    command="cmd_getNewMessages"/>
          <menuseparator/>
        </menupopup>
      </menu>
      <menuitem id="menu_getnextnmsg" label="&getNextNMsgCmd2.label;"
                accesskey="&getNextNMsgCmd2.accesskey;"
                command="cmd_getNextNMessages"/>
      <menuitem id="menu_sendunsentmsgs" label="&sendUnsentCmd.label;"
                accesskey="&sendUnsentCmd.accesskey;" command="cmd_sendUnsentMsgs"/>
      <menuitem id="menu_subscribe" label="&subscribeCmd.label;"
                accesskey="&subscribeCmd.accesskey;" command="cmd_subscribe"/>
      <menuseparator id="fileMenuAfterSubscribeSeparator"/>
      <menuitem id="menu_deleteFolder"
                data-l10n-id="menu-edit-delete-folder"
                command="cmd_deleteFolder"/>
      <menuitem id="menu_renameFolder" label="&renameFolder.label;"
              accesskey="&renameFolder.accesskey;"
              key="key_renameFolder"
              command="cmd_renameFolder"/>
      <menuitem id="menu_compactFolder"
                label="&compactFolders.label;"
                accesskey="&compactFolders.accesskey;"
                command="cmd_compactFolder"/>
      <menuitem id="menu_emptyTrash" label="&emptyTrashCmd.label;"
              accesskey="&emptyTrashCmd.accesskey;"
              command="cmd_emptyTrash"/>
      <menuseparator id="trashMenuSeparator"/>
      <menu id="offlineMenuItem" label="&offlineMenu.label;" accesskey="&offlineMenu.accesskey;">
        <menupopup id="menu_OfflinePopup">
          <menuitem id="goOfflineMenuItem" type="checkbox" label="&offlineGoOfflineCmd.label;"
                    accesskey="&offlineGoOfflineCmd.accesskey;" oncommand="MailOfflineMgr.toggleOfflineStatus();"/>
          <menuseparator id="offlineMenuAfterGoSeparator"/>
          <menuitem id="menu_synchronizeOffline"
                    label="&synchronizeOfflineCmd.label;"
                    accesskey="&synchronizeOfflineCmd.accesskey;"
                    command="cmd_synchronizeOffline"/>
          <menuitem id="menu_settingsOffline"
                    label="&settingsOfflineCmd2.label;"
                    accesskey="&settingsOfflineCmd2.accesskey;"
                    command="cmd_settingsOffline"/>
          <menuseparator id="offlineMenuAfterSettingsSeparator"/>
          <menuitem id="menu_downloadFlagged"
                    label="&downloadStarredCmd.label;"
                    accesskey="&downloadStarredCmd.accesskey;"
                    command="cmd_downloadFlagged"/>
          <menuitem id="menu_downloadSelected"
                    label="&downloadSelectedCmd.label;"
                    accesskey="&downloadSelectedCmd.accesskey;"
                    command="cmd_downloadSelected"/>
        </menupopup>
      </menu>
      <menuseparator id="fileMenuAfterOfflineSeparator"/>
      <menuitem id="printMenuItem"
                key="key_print"
                label="&printCmd.label;"
                accesskey="&printCmd.accesskey;"
                command="cmd_print"/>
      <menuseparator id="menu_FileQuitSeparator"/>
      <menuitem id="menu_FileQuitItem"
                data-l10n-id="menu-quit"
                key="key_quitApplication"
                command="cmd_quitApplication"/>
    </menupopup>
  </menu>

<!-- Edit -->
<menu id="menu_Edit"
      label="&editMenu.label;"
      accesskey="&editMenu.accesskey;"
      oncommand="CommandUpdate_UndoRedo();">
  <menupopup id="menu_EditPopup" onpopupshowing="InitEditMessagesMenu()">
    <menuitem id="menu_undo"
              label="&undoDefaultCmd.label;"
              accesskey="&undoDefaultCmd.accesskey;"
              key="key_undo"
              command="cmd_undo"/>
    <menuitem id="menu_redo"
              label="&redoDefaultCmd.label;"
              accesskey="&redoDefaultCmd.accesskey;"
              key="key_redo"
              command="cmd_redo"/>
    <menuseparator id="editMenuAfterRedoSeparator"/>
    <menuitem id="menu_cut"
              data-l10n-id="text-action-cut"
              key="key_cut"
              command="cmd_cut"/>
    <menuitem id="menu_copy"
              data-l10n-id="text-action-copy"
              key="key_copy"
              command="cmd_copy"/>
    <menuitem id="menu_paste"
              data-l10n-id="text-action-paste"
              key="key_paste"
              command="cmd_paste"/>
    <menuitem id="menu_delete"
              key="key_delete"
              command="cmd_delete"/>
    <menuseparator id="editMenuAfterDeleteSeparator"/>
    <menu id="menu_select" label="&selectMenu.label;" accesskey="&selectMenu.accesskey;">
      <menupopup id="menu_SelectPopup">
        <menuitem id="menu_SelectAll" label="&all.label;"
                  accesskey="&all.accesskey;" key="key_selectAll"
                  command="cmd_selectAll"/>
        <menuseparator id="selectMenuSeparator"/>
        <menuitem id="menu_selectThread" label="&selectThreadCmd.label;"
                  accesskey="&selectThreadCmd.accesskey;"
                  key="key_selectThread"
                  command="cmd_selectThread"/>
        <menuitem id="menu_selectFlagged"
                  label="&selectFlaggedCmd.label;"
                  accesskey="&selectFlaggedCmd.accesskey;"
                  command="cmd_selectFlagged"/>
      </menupopup>
    </menu>
    <menuseparator id="editMenuAfterSelectSeparator"/>
    <menu id="menu_find"
          label="&findMenu.label;" accesskey="&findMenu.accesskey;">
      <menupopup id="menu_FindPopup"
                  onpopupshowing="initSearchMessagesMenu()">
        <menuitem id="menu_findCmd"
                  label="&findCmd.label;"
                  key="key_find"
                  accesskey="&findCmd.accesskey;"
                  command="cmd_find"/>
        <menuitem id="menu_findAgainCmd"
                  label="&findAgainCmd.label;"
                  key="key_findAgain"
                  accesskey="&findAgainCmd.accesskey;"
                  command="cmd_findAgain"/>
        <menuseparator id="editMenuAfterFindSeparator"/>
        <menuitem id="searchMailCmd" label="&searchMailCmd.label;"
                  key="key_searchMail"
                  accesskey="&searchMailCmd.accesskey;"
                  command="cmd_searchMessages"/>
        <menuitem id="glodaSearchCmd"
                  label="&glodaSearchCmd.label;"
                  accesskey="&glodaSearchCmd.accesskey;"
                  oncommand="openGlodaSearchTab()"/>
        <menuitem id="searchAddressesCmd" label="&searchAddressesCmd.label;"
                  accesskey="&searchAddressesCmd.accesskey;"
                  oncommand="MsgSearchAddresses()"/>
      </menupopup>
    </menu>
    <menuseparator id="editPropertiesSeparator"/>
    <menuitem id="menu_favoriteFolder"
              type="checkbox"
              label="&menuFavoriteFolder.label;"
              accesskey="&menuFavoriteFolder.accesskey;"
              checked="false"
              command="cmd_toggleFavoriteFolder"/>
    <menuitem id="menu_properties"
              command="cmd_properties"/>
    <menuitem id="calendar-properties-menuitem"
              label="&calendar.properties.label;"
              accesskey="&calendar.properties.accesskey;"
              command="calendar_edit_calendar_command"/>
  </menupopup>
</menu>

<!-- View -->
<menu id="menu_View"
      label="&viewMenu.label;"
      accesskey="&viewMenu.accesskey;">
  <menupopup id="menu_View_Popup" onpopupshowing="view_init(event);">
    <menu id="menu_Toolbars"
          label="&viewToolbarsMenu.label;"
          accesskey="&viewToolbarsMenu.accesskey;"
          onpopupshowing="calendarOnToolbarsPopupShowing(event);">
      <menupopup id="view_toolbars_popup">
        <menuitem id="view_toolbars_popup_quickFilterBar"
                  type="checkbox"
                  command="cmd_toggleQuickFilterBar"
                  data-l10n-id="quick-filter-bar-toggle"/>
        <menuitem id="viewToolbarsPopupSpacesToolbar"
                  type="checkbox"
                  data-l10n-id="menu-spaces-toolbar-button"
                  oncommand="gSpacesToolbar.toggleToolbarFromMenu();"/>
        <menuitem id="menu_showTaskbar"
                  type="checkbox"
                  label="&showTaskbarCmd.label;"
                  accesskey="&showTaskbarCmd.accesskey;"
                  oncommand="goToggleToolbar('status-bar', 'menu_showTaskbar')"
                  checked="true"/>
        <menuseparator id="viewMenuBeforeCustomizeMailToolbarsSeparator"/>
        <menuitem id="customizeMailToolbars"
                  command="cmd_CustomizeMailToolbar"
                  label="&customizeToolbar.label;"
                  accesskey="&customizeToolbar.accesskey;"/>
      </menupopup>
    </menu>
    <menu id="menu_MessagePaneLayout" label="&messagePaneLayoutStyle.label;" accesskey="&messagePaneLayoutStyle.accesskey;">
      <menupopup id="view_layout_popup" onpopupshowing="InitViewLayoutStyleMenu(event)">
        <menuitem id="messagePaneClassic" type="radio" label="&messagePaneClassic.label;" name="viewlayoutgroup"
                  accesskey="&messagePaneClassic.accesskey;" command="cmd_viewClassicMailLayout"/>
        <menuitem id="messagePaneWide" type="radio" label="&messagePaneWide.label;" name="viewlayoutgroup"
                  accesskey="&messagePaneWide.accesskey;" command="cmd_viewWideMailLayout"/>
        <menuitem id="messagePaneVertical" type="radio" label="&messagePaneVertical.label;" name="viewlayoutgroup"
                  accesskey="&messagePaneVertical.accesskey;" command="cmd_viewVerticalMailLayout"/>
        <menuseparator id="viewMenuAfterPaneVerticalSeparator"/>
        <menuitem id="menu_showFolderPane" type="checkbox" label="&showFolderPaneCmd.label;"
                  accesskey="&showFolderPaneCmd.accesskey;" command="cmd_toggleFolderPane"/>
        <menuitem id="menu_toggleThreadPaneHeader"
                  type="checkbox"
                  name="threadheader"
                  data-l10n-id="menu-view-toggle-thread-pane-header"
                  command="cmd_toggleThreadPaneHeader"/>
        <menuitem id="menu_showMessage" type="checkbox" label="&showMessageCmd.label;" key="key_toggleMessagePane"
                  accesskey="&showMessageCmd.accesskey;" command="cmd_toggleMessagePane"/>
      </menupopup>
    </menu>
    <menu id="menu_FolderViews" label="&folderView.label;" accesskey="&folderView.accesskey;">
      <menupopup id="menu_FolderViewsPopup"
                  onpopupshowing="PanelUI._onFoldersViewShow(event)">
        <menuitem id="menu_toggleFolderHeader"
                  name="paneheader"
                  value="toggle-header"
                  data-l10n-id="menu-view-folders-toggle-header"
                  type="checkbox"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuseparator id="folderViewsHeaderSeparator"/>
        <menuitem id="menu_allFolders" value="all"
                  data-l10n-id="show-all-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuitem id="menu_smartFolders" value="smart"
                  data-l10n-id="show-smart-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuitem id="menu_unreadFolders" value="unread"
                  data-l10n-id="show-unread-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuitem id="menu_favoriteFolders" value="favorite"
                  data-l10n-id="show-favorite-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuitem id="menu_recentFolders" value="recent"
                  data-l10n-id="show-recent-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuseparator/>
        <menuitem id="menu_tags" value="tags"
                  data-l10n-id="show-tags-folders-label"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderViewMenuOnCommand(event);"/>
        <menuseparator/>
        <menuitem id="menu_compactMode" value="compact"
                  data-l10n-id="folder-toolbar-toggle-folder-compact-view"
                  type="checkbox" name="viewmessages"
                  closemenu="none"
                  oncommand="PanelUI.folderCompactMenuOnCommand(event);"/>
      </menupopup>
    </menu>
    <menuseparator id="viewUIZoomMenuSeparator"/>
    <menu id="menu_uiDensity"
          data-l10n-id="mail-uidensity-label">
      <menupopup id="view_density_popup" onpopupshowing="initUiDensityMenu(event);">
        <menuitem id="uiDensityCompact"
                  data-l10n-id="mail-uidensity-compact"
                  type="radio"
                  name="uidensity"
                  closemenu="none"
                  oncommand="UIDensity.setMode(this.mode);"/>
        <menuitem id="uiDensityNormal"
                  data-l10n-id="mail-uidensity-default"
                  type="radio"
                  name="uidensity"
                  closemenu="none"
                  oncommand="UIDensity.setMode(this.mode);"/>
        <menuitem id="uiDensityTouch"
                  data-l10n-id="mail-uidensity-relaxed"
                  type="radio"
                  name="uidensity"
                  closemenu="none"
                  oncommand="UIDensity.setMode(this.mode);"/>
      </menupopup>
    </menu>
    <menu id="viewFullZoomMenu" label="&fullZoom.label;" accesskey="&fullZoom.accesskey;"
              onpopupshowing="UpdateFullZoomMenu()">
          <menupopup id="viewFullZoomPopupMenu">
            <menuitem id="menu_fullZoomEnlarge" key="key_fullZoomEnlarge"
                      label="&fullZoomEnlargeCmd.label;"
                      accesskey="&fullZoomEnlargeCmd.accesskey;"
                      command="cmd_fullZoomEnlarge"/>
            <menuitem id="menu_fullZoomReduce" key="key_fullZoomReduce"
                      label="&fullZoomReduceCmd.label;"
                      accesskey="&fullZoomReduceCmd.accesskey;"
                      command="cmd_fullZoomReduce"/>
            <menuseparator id="fullZoomAfterReduceSeparator"/>
            <menuitem id="menu_fullZoomReset" key="key_fullZoomReset"
                      label="&fullZoomResetCmd.label;"
                      accesskey="&fullZoomResetCmd.accesskey;"
                      command="cmd_fullZoomReset"/>
            <menuseparator id="fullZoomAfterResetSeparator"/>
            <menuitem id="menu_fullZoomToggle" label="&fullZoomToggleCmd.label;"
                      accesskey="&fullZoomToggleCmd.accesskey;"
                      type="checkbox" command="cmd_fullZoomToggle" checked="false"/>
          </menupopup>
        </menu>
        <menu id="menu_uiFontSize"
              data-l10n-id="menu-font-size-label">
          <menupopup id="view_font_size_popup">
            <menuitem id="menu_fontSizeEnlarge"
                      data-l10n-id="menuitem-font-size-enlarge"
                      oncommand="UIFontSize.increaseSize();"
                      closemenu="none"/>
            <menuitem id="menu_fontSizeReduce"
                      data-l10n-id="menuitem-font-size-reduce"
                      oncommand="UIFontSize.reduceSize();"
                      closemenu="none"/>
            <menuseparator id="fontSizeAfterReduceSeparator"/>
            <menuitem id="menu_fontSizeReset"
                      data-l10n-id="menuitem-font-size-reset"
                      oncommand="UIFontSize.resetSize();"
                      closemenu="none"/>
          </menupopup>
        </menu>


<menuseparator id="calViewMenuSeparator"
               class="hide-when-calendar-deactivated"/>
<menu id="calTodayPaneMenu"
      class="hide-when-calendar-deactivated"
      label="&calendar.context.button.label;"
      accesskey="&calendar.context.button.accesskey;">
  <menupopup id="calTodayPaneMenuPopup">
    <menuitem id="calShowTodayPane-2"
              label="&todaypane.showTodayPane.label;"
              accesskey="&todaypane.showTodayPane.accesskey;"
              type="checkbox"
              key="todaypanekey"
              command="calendar_toggle_todaypane_command"/>
    <menuseparator id="calSeparatorBeforeDisplayMiniday"/>
    <menuitem id="calTodayPaneDisplayMiniday"
              name="minidisplay"
              value="miniday"
              type="radio"
              oncommand="TodayPane.displayMiniSection('miniday')"
              label="&todaypane.showMiniday.label;"
              accesskey="&todaypane.showMiniday.accesskey;"/>
    <menuitem id="calTodayPaneDisplayMinimonth"
              name="minidisplay"
              value="minimonth"
              type="radio"
              oncommand="TodayPane.displayMiniSection('minimonth')"
              label="&todaypane.showMinimonth.label;"
              accesskey="&todaypane.showMinimonth.accesskey;"/>
    <menuitem id="calTodayPaneDisplayNone"
              name="minidisplay"
              value="none"
              type="radio"
              oncommand="TodayPane.displayMiniSection('none')"
              label="&todaypane.showNone.label;"
              accesskey="&todaypane.showNone.accesskey;"/>
  </menupopup>
</menu>
<menu id="calCalendarMenu"
      class="hide-when-calendar-deactivated"
      observes="calendar_in_foreground"
      label="&lightning.menu.view.calendar.label;"
      accesskey="&lightning.menu.view.calendar.accesskey;">
  <menupopup id="calCalendarMenuPopup">
    <menuitem id="calChangeViewDay"
              label="&lightning.toolbar.day.label;"
              accesskey="&lightning.toolbar.day.accesskey;"
              type="radio"
              name="calendarMenuViews"
              command="calendar_day-view_command"/>
    <menuitem id="calChangeViewWeek"
              label="&lightning.toolbar.week.label;"
              accesskey="&lightning.toolbar.week.accesskey;"
              type="radio"
              name="calendarMenuViews"
              command="calendar_week-view_command"/>
    <menuitem id="calChangeViewMultiweek"
              label="&lightning.toolbar.multiweek.label;"
              accesskey="&lightning.toolbar.multiweek.accesskey;"
              type="radio"
              name="calendarMenuViews"
              command="calendar_multiweek-view_command"/>
    <menuitem id="calChangeViewMonth"
              label="&lightning.toolbar.month.label;"
              accesskey="&lightning.toolbar.month.accesskey;"
              type="radio"
              name="calendarMenuViews"
              command="calendar_month-view_command"/>
    <menuseparator id="calBeforeCalendarViewSection"/>
    <menu id="calCalendarPaneMenu"
          label="&lightning.toolbar.calendarmenu.label;"
          accesskey="&lightning.toolbar.calendarmenu.accesskey;">
      <menupopup id="calCalendarPanePopup"
                 onpopupshowing="initViewCalendarPaneMenu()">
        <menuitem id="calViewCalendarPane"
                  type="checkbox"
                  label="&lightning.toolbar.calendarpane.label;"
                  accesskey="&lightning.toolbar.calendarpane.accesskey;"
                  command="calendar_toggle_calendarsidebar_command"/>
        <menuseparator id="calCalendarPaneMenuSeparator"/>
        <menuitem id="calTasksViewMinimonth"
                  type="checkbox"
                  label="&calendar.tasks.view.minimonth.label;"
                  accesskey="&calendar.tasks.view.minimonth.accesskey;"
                  command="calendar_toggle_minimonthpane_command"/>
        <menuitem id="calTasksViewCalendarlist"
                  type="checkbox"
                  label="&calendar.tasks.view.calendarlist.label;"
                  accesskey="&calendar.tasks.view.calendarlist.accesskey;"
                  command="calendar_toggle_calendarlist_command"/>
      </menupopup>
    </menu>
    <menuseparator id="calBeforeCurrentViewMenu"/>
    <menu id="calCalendarCurrentViewMenu"
          observes="calendar_mode_calendar"
          label="&showCurrentView.label;"
          accesskey="&showCurrentView.accesskey;">
      <menupopup id="calCalendarCurrentViewMenuPopup">
        <menuitem type="checkbox"
                  id="calWorkdaysOnlyMenuitem"
                  label="&calendar.onlyworkday.checkbox.label;"
                  accesskey="&calendar.onlyworkday.checkbox.accesskey;"
                  command="calendar_toggle_workdays_only_command"/>
        <menuitem type="checkbox"
                  id="calTasksInViewMenuitem"
                  label="&calendar.displaytodos.checkbox.label;"
                  accesskey="&calendar.displaytodos.checkbox.accesskey;"
                  command="calendar_toggle_tasks_in_view_command"/>
        <menuitem type="checkbox"
                  id="calShowCompletedInViewMenuItem"
                  label="&calendar.completedtasks.checkbox.label;"
                  accesskey="&calendar.completedtasks.checkbox.accesskey;"
                  command="calendar_toggle_show_completed_in_view_command"/>
        <menuitem type="checkbox"
                  id="calViewRotated"
                  label="&calendar.orientation.label;"
                  accesskey="&calendar.orientation.accesskey;"
                  command="calendar_toggle_orientation_command"/>
      </menupopup>
    </menu>
  </menupopup>
</menu>
<menu id="calTasksMenu"
      class="hide-when-calendar-deactivated"
      observes="calendar_mode_task"
      label="&lightning.menu.view.tasks.label;"
      accesskey="&lightning.menu.view.tasks.accesskey;">
  <menupopup id="calTasksMenuPopup">
    <menuitem id="calTasksViewFilterTasks"
              type="checkbox"
              label="&calendar.tasks.view.filtertasks.label;"
              accesskey="&calendar.tasks.view.filtertasks.accesskey;"
              command="calendar_toggle_filter_command"/>
    <menuseparator id="calTasksViewSeparator"/>
    <menuitem id="calTasksViewFilterCurrent"
              name="filtergroup"
              value="throughcurrent"
              type="radio"
              command="calendar_task_filter_command"
              label="&calendar.task.filter.current.label;"
              accesskey="&calendar.task.filter.current.accesskey;"/>
    <menuitem id="calTasksViewFilterToday"
              name="filtergroup"
              value="throughtoday"
              type="radio"
              command="calendar_task_filter_command"
              label="&calendar.task.filter.today.label;"
              accesskey="&calendar.task.filter.today.accesskey;"/>
    <menuitem id="calTasksViewFilterNext7days"
              name="filtergroup"
              value="throughsevendays"
              type="radio"
              command="calendar_task_filter_command"
              label="&calendar.task.filter.next7days.label;"
              accesskey="&calendar.task.filter.next7days.accesskey;"/>
    <menuitem id="calTasksViewFilterNotstartedtasks"
              name="filtergroup"
              value="notstarted"
              type="radio"
              command="calendar_task_filter_command"
              label="&calendar.task.filter.notstarted.label;"
              accesskey="&calendar.task.filter.notstarted.accesskey;"/>
    <menuitem id="calTasksViewFilterOverdue"
              name="filtergroup"
              value="overdue"
              type="radio"
              command="calendar_task_filter_command"
              label="&calendar.task.filter.overdue.label;"
              accesskey="&calendar.task.filter.overdue.accesskey;"/>
    <menuitem id="calTasksViewFilterCompleted"
              name="filtergroup"
              type="radio"
              value="completed"
              command="calendar_task_filter_command"
              label="&calendar.task.filter.completed.label;"
              accesskey="&calendar.task.filter.completed.accesskey;"/>
    <menuitem id="calTasksViewFilterOpen"
              name="filtergroup"
              type="radio"
              value="open"
              command="calendar_task_filter_command"
              label="&calendar.task.filter.open.label;"
              accesskey="&calendar.task.filter.open.accesskey;"/>
    <menuitem id="calTasksViewFilterAll"
              name="filtergroup"
              value="all"
              type="radio"
              command="calendar_task_filter_command"
              label="&calendar.task.filter.all.label;"
              accesskey="&calendar.task.filter.all.accesskey;"/>
  </menupopup>
</menu>

    <menuseparator id="viewSortMenuSeparator"/>
    <menu id="viewSortMenu" accesskey="&sortMenu.accesskey;" label="&sortMenu.label;">
      <menupopup id="menu_viewSortPopup" oncommand="goDoCommand('cmd_sort', event);" onpopupshowing="InitViewSortByMenu()">
        <menuitem id="sortByDateMenuitem"
                  type="radio"
                  name="sortby"
                  value="byDate"
                  label="&sortByDateCmd.label;"
                  accesskey="&sortByDateCmd.accesskey;"/>
        <menuitem id="sortByReceivedMenuitem"
                  type="radio"
                  name="sortby"
                  value="byReceived"
                  label="&sortByReceivedCmd.label;"
                  accesskey="&sortByReceivedCmd.accesskey;"/>
        <menuitem id="sortByFlagMenuitem"
                  type="radio"
                  name="sortby"
                  value="byFlagged"
                  label="&sortByStarCmd.label;"
                  accesskey="&sortByStarCmd.accesskey;"/>
        <menuitem id="sortByOrderReceivedMenuitem"
                  type="radio"
                  name="sortby"
                  value="byId"
                  label="&sortByOrderReceivedCmd.label;"
                  accesskey="&sortByOrderReceivedCmd.accesskey;"/>
        <menuitem id="sortByPriorityMenuitem"
                  type="radio"
                  name="sortby"
                  value="byPriority"
                  label="&sortByPriorityCmd.label;"
                  accesskey="&sortByPriorityCmd.accesskey;"/>
        <menuitem id="sortByFromMenuitem"
                  type="radio"
                  name="sortby"
                  value="byAuthor"
                  label="&sortByFromCmd.label;"
                  accesskey="&sortByFromCmd.accesskey;"/>
        <menuitem id="sortByRecipientMenuitem"
                  type="radio"
                  name="sortby"
                  value="byRecipient"
                  label="&sortByRecipientCmd.label;"
                  accesskey="&sortByRecipientCmd.accesskey;"/>
        <menuitem id="sortByCorrespondentMenuitem"
                  type="radio"
                  name="sortby"
                  value="byCorrespondent"
                  label="&sortByCorrespondentCmd.label;"
                  accesskey="&sortByCorrespondentCmd.accesskey;"/>
        <menuitem id="sortBySizeMenuitem"
                  type="radio"
                  name="sortby"
                  value="bySize"
                  label="&sortBySizeCmd.label;"
                  accesskey="&sortBySizeCmd.accesskey;"/>
        <menuitem id="sortByStatusMenuitem"
                  type="radio"
                  name="sortby"
                  value="byStatus"
                  label="&sortByStatusCmd.label;"
                  accesskey="&sortByStatusCmd.accesskey;"/>
        <menuitem id="sortBySubjectMenuitem"
                  type="radio"
                  name="sortby"
                  value="bySubject"
                  label="&sortBySubjectCmd.label;"
                  accesskey="&sortBySubjectCmd.accesskey;"/>
        <menuitem id="sortByUnreadMenuitem"
                  type="radio"
                  name="sortby"
                  value="byUnread"
                  label="&sortByUnreadCmd.label;"
                  accesskey="&sortByUnreadCmd.accesskey;"/>
        <menuitem id="sortByTagsMenuitem"
                  type="radio"
                  name="sortby"
                  value="byTags"
                  label="&sortByTagsCmd.label;"
                  accesskey="&sortByTagsCmd.accesskey;"/>
        <menuitem id="sortByJunkStatusMenuitem"
                  type="radio"
                  name="sortby"
                  value="byJunkStatus"
                  label="&sortByJunkStatusCmd.label;"
                  accesskey="&sortByJunkStatusCmd.accesskey;"/>
        <menuitem id="sortByAttachmentsMenuitem"
                  type="radio"
                  name="sortby"
                  value="byAttachments"
                  label="&sortByAttachmentsCmd.label;"
                  accesskey="&sortByAttachmentsCmd.accesskey;"/>
        <menuseparator id="sortAfterAttachmentSeparator"/>
        <menuitem id="sortAscending"
                  type="radio"
                  name="sortdirection"
                  value="ascending"
                  label="&sortAscending.label;"
                  accesskey="&sortAscending.accesskey;"/>
        <menuitem id="sortDescending"
                  type="radio"
                  name="sortdirection"
                  value="descending"
                  label="&sortDescending.label;"
                  accesskey="&sortDescending.accesskey;"/>
        <menuseparator id="sortAfterDescendingSeparator"/>
        <menuitem id="sortThreaded"
                  type="radio"
                  name="threaded"
                  value="threaded"
                  label="&sortThreaded.label;"
                  accesskey="&sortThreaded.accesskey;"/>
        <menuitem id="sortUnthreaded"
                  type="radio"
                  name="threaded"
                  value="unthreaded"
                  label="&sortUnthreaded.label;"
                  accesskey="&sortUnthreaded.accesskey;"/>
        <menuitem id="groupBySort"
                  type="checkbox"
                  name="group"
                  value="group"
                  label="&groupBySort.label;"
                  accesskey="&groupBySort.accesskey;"/>
      </menupopup>
    </menu>
    <menu id="viewMessageViewMenu" label="&msgsMenu.label;" accesskey="&msgsMenu.accesskey;"
          command="mailHideMenus" oncommand="ViewChangeByMenuitem(event.target);">
        <menupopup id="viewMessagePopup" onpopupshowing="RefreshViewPopup(this);">
          <menuitem id="viewMessageAll"    value="0" type="radio" label="&viewAll.label;" accesskey="&viewAll.accesskey;"/>
          <menuitem id="viewMessageUnread" value="1" type="radio" label="&viewUnread.label;" accesskey="&viewUnread.accesskey;"/>
          <menuitem id="viewMessageNotDeleted" value="3" type="radio" label="&viewNotDeleted.label;" accesskey="&viewNotDeleted.accesskey;"/>
          <menuseparator id="messageViewAfterUnreadSeparator"/>
          <menu id="viewMessageTags" label="&viewTags.label;" accesskey="&viewTags.accesskey;">
            <menupopup id="viewMessageTagsPopup" onpopupshowing="RefreshTagsPopup(this);"/>
          </menu>
          <menu id="viewMessageCustomViews" label="&viewCustomViews.label;" accesskey="&viewCustomViews.accesskey;">
            <menupopup id="viewMessageCustomViewsPopup" onpopupshowing="RefreshCustomViewsPopup(this);"/>
          </menu>
          <menuseparator id="messageViewAfterCustomSeparator"/>
          <menuitem id="viewMessageVirtualFolder" value="7" label="&viewVirtualFolder.label;" accesskey="&viewVirtualFolder.accesskey;"/>
          <menuitem id="viewMessageCustomize"     value="8" label="&viewCustomizeView.label;" accesskey="&viewCustomizeView.accesskey;"/>
        </menupopup>
      </menu>

      <menu label="&threads.label;" id="viewMessagesMenu" accesskey="&threads.accesskey;">
        <menupopup id="menu_ThreadsPopup" onpopupshowing="InitViewMessagesMenu()">
          <menuitem id="viewAllMessagesMenuItem" type="radio" name="viewmessages" label="&allMsgsCmd.label;" accesskey="&allMsgsCmd.accesskey;" disabled="true" command="cmd_viewAllMsgs"/>
          <menuitem id="viewUnreadMessagesMenuItem" type="radio" name="viewmessages" label="&unreadMsgsCmd.label;" accesskey="&unreadMsgsCmd.accesskey;" disabled="true" command="cmd_viewUnreadMsgs"/>
          <menuitem id="viewThreadsWithUnreadMenuItem" type="radio" name="viewmessages" label="&threadsWithUnreadCmd.label;" accesskey="&threadsWithUnreadCmd.accesskey;" disabled="true" command="cmd_viewThreadsWithUnread"/>
          <menuitem id="viewWatchedThreadsWithUnreadMenuItem" type="radio" name="viewmessages" label="&watchedThreadsWithUnreadCmd.label;" accesskey="&watchedThreadsWithUnreadCmd.accesskey;" disabled="true" command="cmd_viewWatchedThreadsWithUnread"/>
          <menuseparator id="threadsAfterWatchedSeparator"/>
          <menuitem id="viewIgnoredThreadsMenuItem" type="checkbox" label="&ignoredThreadsCmd.label;" disabled="true" command="cmd_viewIgnoredThreads" accesskey="&ignoredThreadsCmd.accesskey;"/>
          <menuseparator id="threadsAfterIgnoredSeparator"/>
          <menuitem id="menu_expandAllThreads" label="&expandAllThreadsCmd.label;" accesskey="&expandAllThreadsCmd.accesskey;" key="key_expandAllThreads" disabled="true" command="cmd_expandAllThreads"/>
          <menuitem id="collapseAllThreads" label="&collapseAllThreadsCmd.label;" accesskey="&collapseAllThreadsCmd.accesskey;" key="key_collapseAllThreads" disabled="true" command="cmd_collapseAllThreads"/>
        </menupopup>
      </menu>
      <menuseparator id="viewAfterThreadsSeparator"/>
      <menu id="viewheadersmenu" label="&headersMenu.label;" accesskey="&headersMenu.accesskey;">
        <menupopup id="menu_HeadersPopup" onpopupshowing="InitViewHeadersMenu();">
          <menuitem id="viewallheaders"
            type="radio"
            name="viewheadergroup"
            label="&headersAllCmd.label;"
            accesskey="&headersAllCmd.accesskey;"
            command="cmd_viewAllHeader"/>
          <menuitem id="viewnormalheaders"
            type="radio"
            name="viewheadergroup"
            label="&headersNormalCmd.label;"
            accesskey="&headersNormalCmd.accesskey;"
            command="cmd_viewNormalHeader"/>
        </menupopup>
      </menu>
      <menu id="viewBodyMenu" accesskey="&bodyMenu.accesskey;" label="&bodyMenu.label;">
        <menupopup id="viewBodyPopMenu" onpopupshowing="InitViewBodyMenu()">
          <menuitem id="bodyAllowHTML" type="radio" name="bodyPlaintextVsHTMLPref" label="&bodyAllowHTML.label;"
                    accesskey="&bodyAllowHTML.accesskey;" oncommand="MsgBodyAllowHTML()"/>
          <menuitem id="bodySanitized" type="radio" name="bodyPlaintextVsHTMLPref" label="&bodySanitized.label;"
                    accesskey="&bodySanitized.accesskey;"
                    oncommand="MsgBodySanitized()"/>
          <menuitem id="bodyAsPlaintext" type="radio" name="bodyPlaintextVsHTMLPref" label="&bodyAsPlaintext.label;"
                    accesskey="&bodyAsPlaintext.accesskey;" oncommand="MsgBodyAsPlaintext()"/>
          <menuitem id="bodyAllParts" type="radio" name="bodyPlaintextVsHTMLPref" label="&bodyAllParts.label;"
                    accesskey="&bodyAllParts.accesskey;" oncommand="MsgBodyAllParts()"/>
        </menupopup>
      </menu>
      <menu id="viewFeedSummary"
            label="&bodyMenuFeed.label;"
            accesskey="&bodyMenuFeed.accesskey;">
        <menupopup id="viewFeedSummaryPopupMenu"
                    onpopupshowing="InitViewBodyMenu()">
          <menuitem id="bodyFeedGlobalWebPage"
                    type="radio"
                    name="viewFeedSummaryGroup"
                    label="&viewFeedWebPage.label;"
                    accesskey="&viewFeedWebPage.accesskey;"
                    oncommand="FeedMessageHandler.onSelectPref = 0"/>
          <menuitem id="bodyFeedGlobalSummary"
                    type="radio"
                    name="viewFeedSummaryGroup"
                    label="&viewFeedSummary.label;"
                    accesskey="&viewFeedSummary.accesskey;"
                    oncommand="FeedMessageHandler.onSelectPref = 1"/>
          <menuitem id="bodyFeedPerFolderPref"
                    type="radio"
                    name="viewFeedSummaryGroup"
                    label="&viewFeedSummaryFeedPropsPref.label;"
                    accesskey="&viewFeedSummaryFeedPropsPref.accesskey;"
                    oncommand="FeedMessageHandler.onSelectPref = 2"/>
          <menuseparator id="viewFeedSummarySeparator"/>
          <menuitem id="bodyFeedSummaryAllowHTML"
                    type="radio"
                    name="viewFeedBodyHTMLGroup"
                    label="&bodyAllowHTML.label;"
                    accesskey="&bodyAllowHTML.accesskey;"
                    oncommand="MsgFeedBodyRenderPrefs(false, 0, 0)"/>
          <menuitem id="bodyFeedSummarySanitized"
                    type="radio"
                    name="viewFeedBodyHTMLGroup"
                    label="&bodySanitized.label;"
                    accesskey="&bodySanitized.accesskey;"
                    oncommand="MsgFeedBodyRenderPrefs(false, 3, gDisallow_classes_no_html)"/>
          <menuitem id="bodyFeedSummaryAsPlaintext"
                    type="radio"
                    name="viewFeedBodyHTMLGroup"
                    label="&bodyAsPlaintext.label;"
                    accesskey="&bodyAsPlaintext.accesskey;"
                    oncommand="MsgFeedBodyRenderPrefs(true, 1, gDisallow_classes_no_html)"/>
        </menupopup>
      </menu>
      <menuitem id="viewAttachmentsInlineMenuitem" label="&viewAttachmentsInlineCmd.label;" accesskey="&viewAttachmentsInlineCmd.accesskey;"
        oncommand="ToggleInlineAttachment(event.target)" type="checkbox" checked="true"/>
      <menuseparator id="viewAfterAttachmentsSeparator"/>
      <menuitem id="pageSourceMenuItem"
                label="&pageSourceCmd.label;"
                key="key_viewPageSource"
                accesskey="&pageSourceCmd.accesskey;"
                command="cmd_viewPageSource"/>
    </menupopup>
    </menu>

    <!-- Go -->
    <menu id="menu_Go" label="&goMenu.label;" accesskey="&goMenu.accesskey;">
      <menupopup id="menu_GoPopup" onpopupshowing="InitGoMessagesMenu();">
      <menu id="goNextMenu" label="&nextMenu.label;" accesskey="&nextMenu.accesskey;">
        <menupopup id="menu_GoNextPopup">
          <menuitem id="menu_nextMsg"
                    label="&nextMsgCmd.label;"
                    accesskey="&nextMsgCmd.accesskey;"
                    command="cmd_nextMsg"
                    key="key_nextMsg"/>
          <menuitem id="menu_nextUnreadMsg"
                    label="&nextUnreadMsgCmd.label;"
                    accesskey="&nextUnreadMsgCmd.accesskey;"
                    command="cmd_nextUnreadMsg"
                    key="key_nextUnreadMsg"/>
          <menuitem id="menu_nextFlaggedMsg"
                    label="&nextStarredMsgCmd.label;"
                    accesskey="&nextStarredMsgCmd.accesskey;"
                    command="cmd_nextFlaggedMsg"/>
          <menuseparator id="goNextAfterFlaggedSeparator"/>
          <menuitem id="menu_nextUnreadThread"
                    label="&nextUnreadThread.label;"
                    accesskey="&nextUnreadThread.accesskey;"
                    command="cmd_nextUnreadThread"
                    key="key_nextUnreadThread"/>
          <menuseparator id="goNextAfterUnreadThreadSeparator"
                         class="hide-before-calendar-loaded hide-when-calendar-deactivated"
                         hidden="true"/>
          <!-- Label is set up automatically using the view id. When writing
                a view extension, add a `label-<myviewtype>` attribute with
                the correct label. -->
          <menuitem id="calendar-go-menu-next"
                    class="hide-before-calendar-loaded hide-when-calendar-deactivated"
                    label=""
                    label-day="&lightning.toolbar.day.label;"
                    label-week="&lightning.toolbar.week.label;"
                    label-multiweek="&lightning.toolbar.week.label;"
                    label-month="&lightning.toolbar.month.label;"
                    accesskey-day="&lightning.toolbar.day.accesskey;"
                    accesskey-week="&lightning.toolbar.week.accesskey;"
                    accesskey-multiweek="&lightning.toolbar.week.accesskey;"
                    accesskey-month="&lightning.toolbar.month.accesskey;"
                    command="calendar_view_next_command"
                    hidden="true"/>
        </menupopup>
      </menu>
      <menu id="goPreviousMenu" label="&prevMenu.label;" accesskey="&prevMenu.accesskey;">
        <menupopup id="menu_GoPreviousPopup">
          <menuitem id="menu_prevMsg"
                    label="&prevMsgCmd.label;"
                    accesskey="&prevMsgCmd.accesskey;"
                    command="cmd_previousMsg"
                    key="key_previousMsg"/>
          <menuitem id="menu_prevUnreadMsg"
                    label="&prevUnreadMsgCmd.label;"
                    accesskey="&prevUnreadMsgCmd.accesskey;"
                    command="cmd_previousUnreadMsg"
                    key="key_previousUnreadMsg"/>
          <menuitem id="menu_prevFlaggedMsg"
                    label="&prevStarredMsgCmd.label;"
                    accesskey="&prevStarredMsgCmd.accesskey;"
                    command="cmd_previousFlaggedMsg"/>
          <menuseparator id="goPreviousAfterFlaggedSeparator"
                         class="hide-before-calendar-loaded hide-when-calendar-deactivated"
                         hidden="true"/>
          <!-- Label is set up automatically using the view id. When writing
                a view extension, add a `label-<myviewtype>` attribute with
                the correct label. -->
          <menuitem id="calendar-go-menu-previous"
                    class="hide-before-calendar-loaded hide-when-calendar-deactivated"
                    label=""
                    label-day="&lightning.toolbar.day.label;"
                    label-week="&lightning.toolbar.week.label;"
                    label-multiweek="&lightning.toolbar.week.label;"
                    label-month="&lightning.toolbar.month.label;"
                    accesskey-day="&lightning.toolbar.day.accesskey;"
                    accesskey-week="&lightning.toolbar.week.accesskey;"
                    accesskey-multiweek="&lightning.toolbar.week.accesskey;"
                    accesskey-month="&lightning.toolbar.month.accesskey;"
                    command="calendar_view_prev_command"
                    hidden="true"/>
        </menupopup>
      </menu>
      <menuitem id="menu_goForward" label="&goForwardCmd.label;"
                accesskey="&goForwardCmd.accesskey;" command="cmd_goForward"
                key="key_goForward"/>
      <menuitem id="menu_goBack" label="&goBackCmd.label;"
                accesskey="&goBackCmd.accesskey;" command="cmd_goBack"
                key="key_goBack"/>
      <menuseparator id="goNextSeparator"/>
      <menuitem id="calendar-go-to-today-menuitem"
                class="hide-when-calendar-deactivated"
                label="&goTodayCmd.label;"
                accesskey="&goTodayCmd.accesskey;"
                command="calendar_go_to_today_command"
                key="calendar-go-to-today-key"/>
      <menuitem id="menu_goChat" label="&goChatCmd.label;"
                accesskey="&goChatCmd.accesskey;"
                command="cmd_chat"
                data-l10n-attrs="acceltext"/>
      <menuseparator id="goChatSeparator"/>
      <menu id="goFolderMenu"
            label="&folderMenu.label;"
            accesskey="&folderMenu.accesskey;"
            command="cmd_goFolder">
        <menupopup is="folder-menupopup" id="menu_GoFolderPopup"
                    showFileHereLabel="true"
                    showRecent="true"
                    recentLabel="&contextMoveCopyMsgRecentMenu.label;"
                    recentAccessKey="&contextMoveCopyMsgRecentMenu.accesskey;"
                    showFavorites="true"
                    favoritesLabel="&contextMoveCopyMsgFavoritesMenu.label;"
                    favoritesAccessKey="&contextMoveCopyMsgFavoritesMenu.accesskey;"/>
      </menu>
      <menuseparator id="goFolderSeparator"/>

      <menu id="goRecentlyClosedTabs"
            label="&goRecentlyClosedTabs.label;"
            accesskey="&goRecentlyClosedTabs.accesskey;"
            observes="cmd_undoCloseTab">
        <menupopup id="menu_GoRecentlyClosedTabsPopup"
                    onpopupshowing="return InitRecentlyClosedTabsPopup(this)" />
      </menu>
      <menuseparator id="goRecentlyClosedTabsSeparator"/>

      <menuitem id="goStartPage"
                label="&startPageCmd.label;"
                accesskey="&startPageCmd.accesskey;"
                command="cmd_goStartPage"
                key="key_goStartPage"/>
    </menupopup>
    </menu>

    <!-- Message -->
    <menu id="messageMenu" label="&msgMenu.label;" accesskey="&msgMenu.accesskey;">
      <menupopup id="messageMenuPopup" onpopupshowing="InitMessageMenu();">
        <menuitem id="newMsgCmd" label="&newMsgCmd.label;"
                  accesskey="&newMsgCmd.accesskey;"
                  key="key_newMessage2"
                  command="cmd_newMessage"/>
        <menuitem id="replyMainMenu" label="&replyMsgCmd.label;"
                  accesskey="&replyMsgCmd.accesskey;"
                  key="key_reply"
                  command="cmd_reply"/>
        <menuitem id="replyNewsgroupMainMenu" label="&replyNewsgroupCmd2.label;"
                  accesskey="&replyNewsgroupCmd2.accesskey;"
                  key="key_reply"
                  command="cmd_replyGroup"/>
        <menuitem id="replySenderMainMenu" label="&replySenderCmd.label;"
                  accesskey="&replySenderCmd.accesskey;"
                  command="cmd_replySender"/>
        <menuitem id="menu_replyToAll" label="&replyToAllMsgCmd.label;"
                  accesskey="&replyToAllMsgCmd.accesskey;"
                  key="key_replyall"
                  command="cmd_replyall"/>
        <menuitem id="menu_replyToList" label="&replyToListMsgCmd.label;"
                  accesskey="&replyToListMsgCmd.accesskey;"
                  key="key_replylist"
                  command="cmd_replylist"/>
        <menuitem id="menu_forwardMsg" label="&forwardMsgCmd.label;"
                  accesskey="&forwardMsgCmd.accesskey;"
                  key="key_forward"
                  command="cmd_forward"/>
        <menu id="forwardAsMenu" label="&forwardAsMenu.label;" accesskey="&forwardAsMenu.accesskey;">
          <menupopup id="menu_forwardAsPopup">
            <menuitem id="menu_forwardAsInline"
                      label="&forwardAsInline.label;"
                      accesskey="&forwardAsInline.accesskey;"
                      command="cmd_forwardInline"/>
            <menuitem id="menu_forwardAsAttachment"
                      label="&forwardAsAttachmentCmd.label;"
                      accesskey="&forwardAsAttachmentCmd.accesskey;"
                      command="cmd_forwardAttachment"/>
          </menupopup>
        </menu>
        <menuitem id="menu_redirectMsg"
                  data-l10n-id="redirect-msg-menuitem"
                  command="cmd_redirect"/>
        <menuitem id="menu_editMsgAsNew" label="&editAsNewMsgCmd.label;"
                  accesskey="&editAsNewMsgCmd.accesskey;"
                  key="key_editAsNew"
                  command="cmd_editAsNew"/>
        <menuitem id="menu_editDraftMsg"
                  label="&editDraftMsgCmd.label;"
                  accesskey="&editDraftMsgCmd.accesskey;"
                  command="cmd_editDraftMsg"/>
        <menuitem id="menu_newMsgFromTemplate"
                  label="&newMsgFromTemplateCmd.label;"
                  key="key_newMsgFromTemplate"
                  command="cmd_newMsgFromTemplate"/>
        <menuitem id="menu_editTemplate"
                  label="&editTemplateMsgCmd.label;"
                  accesskey="&editTemplateMsgCmd.accesskey;"
                  command="cmd_editTemplateMsg"/>
        <menuseparator id="messageMenuAfterCompositionCommandsSeparator"/>
        <menuitem id="openMessageWindowMenuitem" label="&openMessageWindowCmd.label;"
                  command="cmd_openMessage"
                  accesskey="&openMessageWindowCmd.accesskey;"
                  key="key_openMessage"/>
        <menuitem id="openConversationMenuitem" label="&openInConversationCmd.label;"
                  command="cmd_openConversation"
                  accesskey="&openInConversationCmd.accesskey;"
                  key="key_openConversation"/>
        <menu id="openFeedMessage"
              label="&openFeedMessage1.label;"
              accesskey="&openFeedMessage1.accesskey;">
          <menupopup id="menu_openFeedMessage">
            <menuitem id="menu_openFeedWebPage"
                      type="radio"
                      name="openFeedGroup"
                      label="&openFeedWebPage.label;"
                      accesskey="&openFeedWebPage.accesskey;"
                      oncommand="FeedMessageHandler.onOpenPref = 0"/>
            <menuitem id="menu_openFeedSummary"
                      type="radio"
                      name="openFeedGroup"
                      label="&openFeedSummary.label;"
                      accesskey="&openFeedSummary.accesskey;"
                      oncommand="FeedMessageHandler.onOpenPref = 1"/>
            <menuitem id="menu_openFeedWebPageInMessagePane"
                      type="radio"
                      name="openFeedGroup"
                      label="&openFeedWebPageInMP.label;"
                      accesskey="&openFeedWebPageInMP.accesskey;"
                      oncommand="FeedMessageHandler.onOpenPref = 2"/>
          </menupopup>
        </menu>
        <menuseparator id="messageAfterOpenMsgSeparator"/>
        <menu id="msgAttachmentMenu"
              label="&openAttachmentListCmd.label;"
              accesskey="&openAttachmentListCmd.accesskey;"
              disabled="true">
          <menupopup id="attachmentMenuList"
                     onpopupshowing="fillAttachmentListPopup(event);">
            <menuseparator/>
            <menuitem id="menu-openAllAttachments"
                      label="&openAllAttachmentsCmd.label;"
                      accesskey="&openAllAttachmentsCmd.accesskey;"
                      command="cmd_openAllAttachments"/>
            <menuitem id="menu-saveAllAttachments"
                      label="&saveAllAttachmentsCmd.label;"
                      accesskey="&saveAllAttachmentsCmd.accesskey;"
                      command="cmd_saveAllAttachments"/>
            <menuitem id="menu-detachAllAttachments"
                      label="&detachAllAttachmentsCmd.label;"
                      accesskey="&detachAllAttachmentsCmd.accesskey;"
                      command="cmd_detachAllAttachments"/>
            <menuitem id="menu-deleteAllAttachments"
                      label="&deleteAllAttachmentsCmd.label;"
                      accesskey="&deleteAllAttachmentsCmd.accesskey;"
                      command="cmd_deleteAllAttachments"/>
          </menupopup>
        </menu>
        <menuseparator id="messageAfterAttachmentMenuSeparator"/>
        <menu id="tagMenu" label="&tagMenu.label;" accesskey="&tagMenu.accesskey;" command="cmd_tag">
          <menupopup id="tagMenu-tagpopup"
                     onpopupshowing="InitMessageTags(this);">
            <menuitem id="tagMenu-addNewTag"
                      label="&addNewTag.label;"
                      accesskey="&addNewTag.accesskey;"
                      command="cmd_addTag"/>
            <menuitem id="tagMenu-manageTags"
                      label="&manageTags.label;"
                      accesskey="&manageTags.accesskey;"
                      command="cmd_manageTags"/>
            <menuseparator id="tagMenu-sep-afterTagAddNew"/>
            <menuitem id="tagMenu-tagRemoveAll"
                      command="cmd_removeTags"/>
            <menuseparator id="tagMenuAfterRemoveSeparator"/>
          </menupopup>
        </menu>
        <menu id="markMenu" label="&markMenu.label;" accesskey="&markMenu.accesskey;">
          <menupopup id="menu_MarkPopup" onpopupshowing="InitMessageMark()">
            <menuitem id="markReadMenuItem" label="&markAsReadCmd.label;"
                      accesskey="&markAsReadCmd.accesskey;"
                      key="key_toggleRead"
                      command="cmd_markAsRead"/>
            <menuitem id="markUnreadMenuItem" label="&markAsUnreadCmd.label;"
                      accesskey="&markAsUnreadCmd.accesskey;"
                      key="key_toggleRead"
                      command="cmd_markAsUnread"/>
            <menuitem id="menu_markThreadAsRead"
                      label="&markThreadAsReadCmd.label;"
                      accesskey="&markThreadAsReadCmd.accesskey;"
                      command="cmd_markThreadAsRead"
                      key="key_markThreadAsRead"/>
            <menuitem id="menu_markReadByDate"
                      label="&markReadByDateCmd.label;"
                      accesskey="&markReadByDateCmd.accesskey;"
                      command="cmd_markReadByDate"
                      key="key_markReadByDate"/>
            <menuitem id="menu_markAllRead"
                      label="&markAllReadCmd.label;"
                      key="key_markAllRead"
                      accesskey="&markAllReadCmd.accesskey;"
                      command="cmd_markAllRead"/>
            <menuseparator id="markMenuAfterAllReadSeparator"/>
            <menuitem id="markFlaggedMenuItem"
                      type="checkbox"
                      label="&markStarredCmd.label;"
                      accesskey="&markStarredCmd.accesskey;"
                      command="cmd_markAsFlagged"
                      key="key_toggleFlagged"/>
            <menuseparator id="markMenuAfterFlaggedSeparator"/>
            <menuitem id="menu_markAsJunk" label="&markAsJunkCmd.label;"
                      accesskey="&markAsJunkCmd.accesskey;"
                      command="cmd_markAsJunk"
                      key="key_markJunk"/>
            <menuitem id="menu_markAsNotJunk" label="&markAsNotJunkCmd.label;"
                      key="key_markNotJunk"
                      accesskey="&markAsNotJunkCmd.accesskey;"
                      command="cmd_markAsNotJunk"/>
            <menuitem id="menu_recalculateJunkScore"
                      label="&recalculateJunkScoreCmd.label;"
                      accesskey="&recalculateJunkScoreCmd.accesskey;"
                      command="cmd_recalculateJunkScore"/>
          </menupopup>
        </menu>
        <menuseparator id="messageMenuAfterMarkSeparator"/>
        <menuitem id="archiveMainMenu" label="&archiveMsgCmd.label;"
                  accesskey="&archiveMsgCmd.accesskey;"
                  key="key_archive"
                  command="cmd_archive"/>
        <menuitem id="menu_cancel" command="cmd_cancel"
                  label="&cancelNewsMsgCmd.label;"
                  accesskey="&cancelNewsMsgCmd.accesskey;"/>
        <menu id="moveMenu"
              label="&moveMsgToMenu.label;"
              accesskey="&moveMsgToMenu.accesskey;"
              oncommand="goDoCommand('cmd_moveMessage', event.target._folder)">
          <menupopup is="folder-menupopup"
                      mode="filing"
                      showFileHereLabel="true"
                      showRecent="true"
                      recentLabel="&moveCopyMsgRecentMenu.label;"
                      recentAccessKey="&moveCopyMsgRecentMenu.accesskey;"
                      showFavorites="true"
                      favoritesLabel="&contextMoveCopyMsgFavoritesMenu.label;"
                      favoritesAccessKey="&contextMoveCopyMsgFavoritesMenu.accesskey;"/>
        </menu>
        <menu id="copyMenu"
              label="&copyMsgToMenu.label;"
              accesskey="&copyMsgToMenu.accesskey;"
              oncommand="goDoCommand('cmd_copyMessage', event.target._folder)">
          <menupopup is="folder-menupopup"
                      mode="filing"
                      showFileHereLabel="true"
                      showRecent="true"
                      recentLabel="&moveCopyMsgRecentMenu.label;"
                      recentAccessKey="&moveCopyMsgRecentMenu.accesskey;"
                      showFavorites="true"
                      favoritesLabel="&contextMoveCopyMsgFavoritesMenu.label;"
                      favoritesAccessKey="&contextMoveCopyMsgFavoritesMenu.accesskey;"/>
        </menu>
        <menuitem id="moveToFolderAgain" key="key_moveToFolderAgain" command="cmd_moveToFolderAgain"
                  label="&moveToFolderAgain.label;" accesskey="&moveToFolderAgain.accesskey;"/>
        <menuseparator id="messageMenuAfterMoveCommandsSeparator"/>
        <menuitem id="createFilter" label="&createFilter.label;"
                  accesskey="&createFilter.accesskey;"
                  command="cmd_createFilterFromMenu"/>
    <menuseparator id="threadItemsSeparator"/>
    <menuitem id="killThread"
              label="&killThreadMenu.label;"
              accesskey="&killThreadMenu.accesskey;"
              command="cmd_killThread"
              type="checkbox"
              key="key_killThread"/>
    <menuitem id="killSubthread"
              label="&killSubthreadMenu.label;"
              accesskey="&killSubthreadMenu.accesskey;"
              type="checkbox"
              command="cmd_killSubthread"
              key="key_killSubthread"/>
    <menuitem id="watchThread"
              label="&watchThreadMenu.label;"
              accesskey="&watchThreadMenu.accesskey;"
              type="checkbox"
              command="cmd_watchThread"
              key="key_watchThread"/>
  </menupopup>
</menu>


<menu id="menu_Event_Task"
      class="hide-when-calendar-deactivated"
      label="&lightning.menu.eventtask.label;"
      accesskey="&lightning.menu.eventtask.accesskey;">
  <menupopup id="menu_Event_Task_Popup" onpopupshowing="changeMenuForTask(event); setupDeleteMenuitem('calDeleteSelectedCalendar')">
    <menuitem id="calNewEvent2"
              label="&event.new.event;"
              accesskey="&event.new.event.accesskey;"
              key="calendar-new-event-key"
              command="calendar_new_event_command"/>
    <menuitem id="calNewTask2"
              label="&event.new.task;"
              accesskey="&event.new.task.accesskey;"
              key="calendar-new-todo-key"
              command="calendar_new_todo_command"/>
    <menuseparator id="before-Calendar-Mode-Section"/>
    <menuitem id="calMenuSwitchToCalendar"
              type="checkbox"
              label="&lightning.toolbar.calendar.label;"
              accesskey="&lightning.toolbar.calendar.accesskey;"
              command="switch2calendar"
              value="calendar"
              autocheck="false"
              data-l10n-attrs="acceltext">
    </menuitem>
    <menuitem id="calMenuSwitchToTask"
              type="checkbox"
              label="&lightning.toolbar.task.label;"
              accesskey="&lightning.toolbar.task.accesskey;"
              command="switch2task"
              value="task"
              autocheck="false"
              data-l10n-attrs="acceltext">
    </menuitem>
    <menuseparator id="calBeforeCalendarSection"/>
    <menuitem id="calExportCalendar"
              label="&calendar.export.label;"
              accesskey="&calendar.export.accesskey;"
              command="calendar_export_command"/>
    <menuitem id="calImportCalendar"
              label="&calendar.import.label;"
              accesskey="&calendar.import.accesskey;"
              command="calendar_import_command"/>
    <menuitem id="calPublishCalendar"
              label="&calendar.publish.label;"
              accesskey="&calendar.publish.accesskey;"
              command="calendar_publish_calendar_command"/>
    <menuitem id="calDeleteSelectedCalendar"
              labeldelete="&calendar.deletecalendar.label;"
              labelremove="&calendar.removecalendar.label;"
              labelunsubscribe="&calendar.unsubscribecalendar.label;"
              accesskeydelete="&calendar.deletecalendar.accesskey;"
              accesskeyremove="&calendar.removecalendar.accesskey;"
              accesskeyunsubscribe="&calendar.unsubscribecalendar.accesskey;"
              command="calendar_delete_calendar_command"/>
    <menuseparator id="calBeforeTaskActions"/>
    <menuitem id="calTaskActionsMarkCompletedMenuitem"
              type="checkbox"
              label="&calendar.context.markcompleted.label;"
              accesskey="&calendar.context.markcompleted.accesskey;"
              command="calendar_toggle_completed_command"/>
    <menu id="calTaskActionsProgressMenuitem"
          label="&calendar.context.progress.label;"
          accesskey="&calendar.context.progress.accesskey;"
          command="calendar_general-progress_command">
      <menupopup is="calendar-task-progress-menupopup"/>
    </menu>
    <menu id="calTaskActionsPriorityMenuitem"
          label="&calendar.context.priority.label;"
          accesskey="&calendar.context.priority.accesskey;"
          command="calendar_general-priority_command">
      <menupopup is="calendar-task-priority-menupopup"/>
    </menu>
    <menu id="calTaskActionsPostponeMenuitem"
          label="&calendar.context.postpone.label;"
          accesskey="&calendar.context.postpone.accesskey;"
          command="calendar_general-postpone_command">
      <menupopup id="calTaskActionsPostponeMenuPopup">
        <menuitem id="calTaskActionsPostponeMenu-1hour"
                  label="&calendar.context.postpone.1hour.label;"
                  accesskey="&calendar.context.postpone.1hour.accesskey;"
                  command="calendar_postpone-1hour_command"/>
        <menuitem id="calTaskActionsPostponeMenu-1day"
                  label="&calendar.context.postpone.1day.label;"
                  accesskey="&calendar.context.postpone.1day.accesskey;"
                  command="calendar_postpone-1day_command"/>
        <menuitem id="calTaskActionsPostponeMenu-1week"
                  label="&calendar.context.postpone.1week.label;"
                  accesskey="&calendar.context.postpone.1week.accesskey;"
                  command="calendar_postpone-1week_command"/>
      </menupopup>
    </menu>
    <menuseparator id="calBeforeUnifinderSection" />
    <menuitem id="calShowUnifinder"
              type="checkbox"
              checked="true"
              label="&showUnifinderCmd.label;"
              accesskey="&showUnifinderCmd.accesskey;"
              command="calendar_show_unifinder_command"/>
  </menupopup>
</menu>

<!-- Tools -->
<menu id="tasksMenu" label="&tasksMenu.label;" accesskey="&tasksMenu.accesskey;">
  <menupopup id="taskPopup" onpopupshowing="document.commandDispatcher.updateCommands('create-menu-tasks')">
    <menuitem hidden="true" accesskey="&messengerCmd.accesskey;" label="&messengerCmd.label;"
              key="key_mail" oncommand="toMessengerWindow();" id="tasksMenuMail"/>
    <menuitem id="addressBook"
              label="&addressBookCmd.label;"
              accesskey="&addressBookCmd.accesskey;"
              key="key_addressbook"
              oncommand="toAddressBook();"/>
    <menuseparator id="devToolsSeparator"/>
    <menuitem id="menu_openSavedFilesWnd" label="&savedFiles.label;"
              accesskey="&savedFiles.accesskey;"
              key="key_savedFiles"
              oncommand="openSavedFilesWnd();"/>
    <menuitem id="addonsManager"
              data-l10n-id="menu-addons-and-themes"
              oncommand="openAddonsMgr();"/>
    <menuitem id="activityManager" label="&activitymanager.label;"
              accesskey="&activitymanager.accesskey;"
              oncommand="openActivityMgr();"/>
    <menu id="imAccountsStatus" label="&imAccountsStatus.label;"
          accesskey="&imAccountsStatus.accesskey;"
          command="cmd_chatStatus">
      <menupopup id="imStatusMenupopup">
        <menuitem id="imStatusAvailable" status="available" label="&imStatus.available;" class="menuitem-iconic"/>
        <menuitem id="imStatusUnavailable" status="unavailable" label="&imStatus.unavailable;" class="menuitem-iconic"/>
        <menuseparator id="imStatusOfflineSeparator"/>
        <menuitem id="imStatusOffline" status="offline" label="&imStatus.offline;" class="menuitem-iconic"/>
        <menuseparator id="imStatusShowAccountsSeparator"/>
        <menuitem id="imStatusShowAccounts" label="&imStatus.showAccounts;"/>
      </menupopup>
    </menu>
    <menuitem id="joinChatMenuItem"
              label="&joinChatCmd.label;"
              accesskey="&joinChatCmd.accesskey;"
              command="cmd_joinChat"/>

    <menuseparator id="devToolsSeparator"/>
    <menuitem id="filtersCmd" label="&filtersCmd2.label;"
              accesskey="&filtersCmd2.accesskey;"
              oncommand="MsgFilters();"/>
    <menuitem id="applyFilters"
              label="&filtersApply.label;"
              accesskey="&filtersApply.accesskey;"
              command="cmd_applyFilters"/>
    <menuitem id="applyFiltersToSelection"
              label="&filtersApplyToMessage.label;"
              accesskey="&filtersApplyToMessage.accesskey;"
              command="cmd_applyFiltersToSelection"/>
    <menuseparator id="tasksMenuAfterApplySeparator"/>
    <menuitem id="runJunkControls"
              label="&runJunkControls.label;"
              accesskey="&runJunkControls.accesskey;"
              command="cmd_runJunkControls"/>
    <menuitem id="deleteJunk"
              label="&deleteJunk.label;"
              accesskey="&deleteJunk.accesskey;"
              command="cmd_deleteJunk"/>
    <menuseparator id="tasksMenuAfterDeleteSeparator"/>
    <menuitem id="menu_import" label="&importCmd.label;"
              accesskey="&importCmd.accesskey;"
              oncommand="toImport();"/>
    <menuitem id="menu_export" label="&exportCmd.label;"
              accesskey="&exportCmd.accesskey;"
              oncommand="toExport();"/>
    <menuitem id="manageKeysOpenPGP"
              data-l10n-id="openpgp-manage-keys-openpgp-cmd"
              oncommand="openKeyManager()"/>
    <menu id="devtoolsMenu" label="&devtoolsMenu.label;" accesskey="&devtoolsMenu.accesskey;">
      <menupopup id="devtoolsPopup">
        <menuitem id="devtoolsToolbox"
                  label="&devToolboxCmd.label;"
                  accesskey="&devToolboxCmd.accesskey;"
                  key="key_devtoolsToolbox"
                  oncommand="BrowserToolboxLauncher.init();"/>
        <menuitem id="addonDebugging"
                  label="&debugAddonsCmd.label;"
                  accesskey="&debugAddonsCmd.accesskey;"
                  oncommand="openAboutDebugging('addons')"/>
        <menuseparator id="debuggingSeparator"/>
        <menuitem id="javascriptConsole"
                  label="&errorConsoleCmd.label;"
                  accesskey="&errorConsoleCmd.accesskey;"
                  key="key_errorConsole"
                  oncommand="toJavaScriptConsole();"/>
      </menupopup>
    </menu>
    <menuitem id="sanitizeHistory"
              label="&clearRecentHistory.label;"
              accesskey="&clearRecentHistory.accesskey;"
              key="key_sanitizeHistory"
              oncommand="toSanitize();"/>
    <menuseparator id="prefSep"/>
    <menuitem id="menu_preferences"
              oncommand="openOptionsDialog()"
              data-l10n-id="menu-tools-settings"/>
    <menuitem id="menu_accountmgr"
              label="&accountManagerCmd2.label;"
              accesskey="&accountManagerCmd2.accesskey;"
              oncommand="MsgAccountManager(null);"/>
    </menupopup>
  </menu>


      <!-- Help -->

<menu id="helpMenu"
      data-l10n-id="menu-help-help-title"
      onpopupshowing="buildHelpMenu();">
        <menupopup id="menu_HelpPopup">
          <menuitem id="menu_openHelp"
                    data-l10n-id="menu-help-get-help"
                    key="key_openHelp"
                    oncommand="openSupportURL();"/>
          <menuitem id="menu_openTour"
                    data-l10n-id="menu-help-explore-features"
                    oncommand="openLinkText(event, 'tourURL');"/>
          <menuitem id="menu_keyboardShortcuts"
                    data-l10n-id="menu-help-shortcuts"
                    oncommand="openLinkText(event, 'keyboardShortcutsURL');"/>
          <menuseparator/>
          <menuitem id="getInvolved"
                    data-l10n-id="menu-help-get-involved"
                    oncommand="openLinkText(event, 'getInvolvedURL');"/>
          <menuitem id="donationsPage"
                    data-l10n-id="menu-help-donation"
                    oncommand="openLinkText(event, 'donateURL');"/>
          <menuitem id="feedbackPage"
                    data-l10n-id="menu-help-share-feedback"
                    oncommand="openLinkText(event, 'feedbackURL');"/>
          <menuseparator id="functionsSeparator"/>
          <menuitem id="helpTroubleshootMode"
                    data-l10n-id="menu-help-enter-troubleshoot-mode"
                    oncommand="safeModeRestart();"/>
          <menuitem id="aboutsupport_open"
                    data-l10n-id="menu-help-troubleshooting-info"
                    oncommand="openAboutSupport();"/>
          <menuseparator id="aboutSeparator"/>
          <menuitem id="aboutName"
                    data-l10n-id="menu-help-about-product"
                    oncommand="openAboutDialog();"/>
        </menupopup>
      </menu>
</menubar>
      </toolbar>

      <toolbar id="tabs-toolbar" class="chromeclass-toolbar">
        <tabs is="tabmail-tabs" id="tabmail-tabs"
              flex="1"
              align="end"
              setfocus="false"
              alltabsbutton="alltabs-button"
              context="toolbar-context-menu"
              collapsetoolbar="tabs-toolbar">
          <html:img class="tab-drop-indicator"
                    src="chrome://messenger/skin/icons/tab-drag-indicator.svg"
                    alt=""
                    hidden="hidden" />
          <arrowscrollbox id="tabmail-arrowscrollbox"
                          orient="horizontal"
                          flex="1"
                          clicktoscroll="true"
                          style="min-width: 1px;">
            <tab is="tabmail-tab" selected="true"
                 class="tabmail-tab" crop="end"/>
          </arrowscrollbox>
        </tabs>

        <toolbarbutton class="toolbarbutton-1 tabs-alltabs-button"
                        id="alltabs-button"
                        type="menu"
                        hidden="true"
                        tooltiptext="&listAllTabs.label;">
          <menupopup is="tabmail-alltabs-menupopup" id="alltabs-popup"
                      position="after_end"
                      tabcontainer="tabmail-tabs"/>
        </toolbarbutton>

      </toolbar>

    </vbox>

  </toolbox>
</box>

<vbox id="messengerBody">
  <!-- XXX This extension point (tabmail-container) is only temporary!
       Horizontal space shouldn't be wasted if it isn't absolutely critical.
       A mechanism for adding sidebar panes will be added in bug 476154. -->
  <hbox id="tabmail-container" flex="1">
    <!-- Beware!  Do NOT use overlays to append nodes directly to tabmail (children
         of tabmail is OK though). This will break Ctrl-tab switching because
         the Custom Element will choke when it finds a child of tabmail that is
         not a tabpanels node. -->
    <tabmail id="tabmail"
             class="printPreviewStack"
             flex="1"
             panelcontainer="tabpanelcontainer"
             tabcontainer="tabmail-tabs">
     <tabbox id="tabmail-tabbox" flex="1" eventnode="document" tabcontainer="tabmail-tabs">
      <tabpanels id="tabpanelcontainer" flex="1" class="plain" selectedIndex="0">

        <vbox id="chatTabPanel">
          <toolbox id="chat-view-toolbox" class="mail-toolbox"
                   mode="full" defaultmode="full"
                   labelalign="end" defaultlabelalign="end">
            <toolbar is="customizable-toolbar" id="chat-toolbar"
                     class="inline-toolbar chromeclass-toolbar themeable-full"
                     fullscreentoolbar="true"
                     customizable="true"
                     context="chat-toolbar-context-menu"
                     mode="full"
                     defaultset="button-add-buddy,button-join-chat,spacer,chat-status-selector,button-chat-accounts,spacer,gloda-im-search"/>

            <toolbarpalette id="ChatToolbarPalette">
              <toolbarbutton id="button-add-buddy"
                             class="toolbarbutton-1"
                             label="&addBuddyButton.label;"
                             oncommand="chatHandler.addBuddy()"/>
              <toolbarbutton id="button-join-chat"
                             class="toolbarbutton-1"
                             label="&joinChatButton.label;"
                             oncommand="chatHandler.joinChat()"/>
              <toolbaritem id="chat-status-selector"
                           orient="horizontal"
                           align="center" flex="1">
                <toolbarbutton id="statusTypeIcon"
                               type="menu"
                               wantdropmarker="true"
                               class="toolbarbutton-1"
                               status="available">
                  <menupopup id="setStatusTypeMenupopup"
                             oncommand="statusSelector.editStatus(event);">
                    <menuitem id="statusTypeAvailable" label="&status.available;"
                              status="available" class="menuitem-iconic"/>
                    <menuitem id="statusTypeUnavailable" label="&status.unavailable;"
                              status="unavailable" class="menuitem-iconic"/>
                    <menuseparator id="statusTypeOfflineSeparator"/>
                    <menuitem id="statusTypeOffline" label="&status.offline;"
                              status="offline" class="menuitem-iconic"/>
                  </menupopup>
                </toolbarbutton>
                <vbox flex="1"
                      orient="horizontal"
                      align="center"
                      class="input-container status-container">
                  <label id="statusMessageLabel"
                         flex="1"
                         value=""
                         class="statusMessageToolbarItem label-inline"
                         onclick="statusSelector.statusMessageClick();"/>
                  <html:input id="statusMessageInput"
                              value=""
                              class="statusMessageInput statusMessageToolbarItem status-message-input"
                              hidden="hidden"/>
                </vbox>
              </toolbaritem>
              <toolbarbutton id="button-chat-accounts"
                             class="toolbarbutton-1"
                             label="&chatAccountsButton.label;"
                             oncommand="openIMAccountMgr()"/>
            </toolbarpalette>
          </toolbox>

          <vbox flex="1">
            <hbox id="chatPanel" flex="1">
              <vbox id="listPaneBox" style="min-width:125px;" width="200" persist="width">
                <richlistbox id="contactlistbox"
                             context="buddyListContextMenu"
                             tooltip="imTooltip" flex="1">
                  <richlistitem is="chat-group-richlistitem" id="conversationsGroup"
                                name="&conversationsHeader.label;"/>
                  <richlistitem is="chat-imconv-richlistitem"
                                id="searchResultConv"
                                displayname="&searchResultConversation.label;"
                                is-search-result=""
                                hidden="true"/>
                  <richlistitem is="chat-group-richlistitem" id="onlinecontactsGroup"
                                name="&onlineContactsHeader.label;"/>
                  <richlistitem is="chat-group-richlistitem" id="offlinecontactsGroup"
                                name="&offlineContactsHeader.label;"
                                class="closed"/>
                </richlistbox>
              </vbox>
              <splitter id="listSplitter" collapse="before"/>
              <vbox id="chat-notification-top" flex="1">
                <!-- notificationbox will be added here lazily. -->
                <vbox id="conversationsBox" flex="1">

                  <vbox flex="1" id="noConvScreen" class="im-placeholder-screen" align="center" pack="center">
                    <hbox id="noConvBox" class="im-placeholder-box" align="start">
                      <vbox id="noConvInnerBox" class="im-placeholder-innerbox" flex="1">
                        <label id="noConvTitle" class="im-placeholder-title">&chat.noConv.title;</label>
                        <description id="noConvDesc"
                                     class="im-placeholder-desc">&chat.noConv.description;</description>
                      </vbox>
                      <vbox id="noAccountInnerBox" class="im-placeholder-innerbox" flex="1" hidden="true">
                        <label id="noAccountTitle" class="im-placeholder-title">&chat.noAccount.title;</label>
                        <description id="noAccountDesc"
                                     class="im-placeholder-desc">&chat.noAccount.description;</description>
                        <hbox class="im-placeholder-button-box" flex="1">
                          <spacer flex="1"/>
                          <button id="openIMAccountWizardButton" label="&chat.accountWizard.button;"
                                  oncommand="openIMAccountWizard();"/>
                        </hbox>
                      </vbox>
                      <vbox id="noConnectedAccountInnerBox" class="im-placeholder-innerbox" flex="1" hidden="true">
                        <label id="noConnectedAccountTitle"
                              class="im-placeholder-title">&chat.noConnectedAccount.title;</label>
                        <description id="noConnectedAccountDesc"
                                     class="im-placeholder-desc">&chat.noConnectedAccount.description;</description>
                        <hbox class="im-placeholder-button-box" flex="1">
                          <spacer flex="1"/>
                          <button id="openIMAccountManagerButton" label="&chat.showAccountManager.button;"
                                  oncommand="openIMAccountMgr();"/>
                        </hbox>
                      </vbox>
                    </hbox>
                  </vbox>

                  <vbox id="logDisplay" flex="1" hidden="true">
                    <vbox flex="1">
                      <vbox flex="1" id="noPreviousConvScreen" class="im-placeholder-screen" align="center" pack="center">
                        <hbox id="noPreviousConvBox" class="im-placeholder-box" align="start">
                          <vbox id="noPreviousConvInnerBox" class="im-placeholder-innerbox" flex="1">
                            <description id="noPreviousConvDesc"
                                         class="im-placeholder-desc">&chat.noPreviousConv.description;</description>
                          </vbox>
                        </hbox>
                      </vbox>
                      <vbox flex="1" id="logDisplayBrowserBox">
                        <browser id="conv-log-browser" is="conversation-browser" type="content"
                                contextmenu="chatConversationContextMenu" flex="1"
                                tooltip="imTooltip"
                                messagemanagergroup="browsers"/>
                        <html:progress id="log-browserProgress" max="100" hidden="true"/>
                        <findbar id="log-findbar" browserid="conv-log-browser"/>
                      </vbox>
                    </vbox>
                    <button id="goToConversation" hidden="true"
                            oncommand="chatHandler.showCurrentConversation();"/>
                  </vbox>

                </vbox>
              </vbox>
              <splitter id="contextSplitter" hidden="true" collapse="after"/>
              <vbox id="contextPane" hidden="true" width="250" persist="width">
                <chat-conversation-info id="conv-top-info" class="conv-top-info"/>
                <vbox id="contextPaneFlexibleBox" flex="1">
                  <vbox class="conv-chat" width="150">
                    <hbox align="baseline" class="conv-nicklist-header input-container">
                      <label class="conv-nicklist-header-label conv-header-label"
                             control="participantCount"
                             value="&chat.participants;"
                             crop="end"/>
                      <html:input id="participantCount" readonly="readonly" class="plain"/>
                    </hbox>
                    <richlistbox id="nicklist" class="conv-nicklist"
                                 flex="1" seltype="multiple"
                                 tooltip="imTooltip"
                                 context="participantListContextMenu"
                                 onclick="chatHandler.onNickClick(event);"
                                 onkeypress="chatHandler.onNicklistKeyPress(event);"/>
                  </vbox>
                  <splitter id="logsSplitter" class="conv-chat" collapse="after" orient="vertical"/>
                  <vbox id="previousConversations" style="min-height: 200px;">
                    <label class="conv-logs-header-label conv-header-label"
                           crop="end"
                           value="&chat.previousConversations;"/>
                    <tree id="logTree" flex="1" hidecolumnpicker="true" seltype="single"
                          context="logTreeContext" onselect="chatHandler.onLogSelect();">
                      <treecols>
                        <treecol id="logCol"
                                 style="flex: 1 auto"
                                 primary="true"
                                 hideheader="true"
                                 crop="center"
                                 ignoreincolumnpicker="true"/>
                      </treecols>
                      <treechildren/>
                    </tree>
                  </vbox>
                </vbox>
              </vbox>
            </hbox>
          </vbox>
        </vbox>

<vbox id="calendarTabPanel">
  <hbox id="calendarContent" flex="1">
    <vbox id="calSidebar"
          persist="collapsed width">
      <html:div id="primaryButtonSidePanel"
                xmlns="http://www.w3.org/1999/xhtml">
        <button id="sidePanelNewEvent"
                data-l10n-id="calendar-new-event-primary-button"
                class="button button-primary icon-button"
                onclick="goDoCommand('calendar_new_event_command')"
                hidden="hidden"
                type="button">
        </button>
        <button id="sidePanelNewTask"
                data-l10n-id="calendar-new-task-primary-button"
                class="button button-primary icon-button"
                onclick="goDoCommand('calendar_new_todo_command')"
                hidden="hidden"
                type="button">
        </button>
      </html:div>
      <calendar-modevbox id="minimonth-pane"
                         mode="calendar,task"
                         refcontrol="calendar_toggle_minimonthpane_command">
        <vbox align="center">
          <hbox id="calMinimonthBox" pack="center">
            <calendar-minimonth id="calMinimonth" onchange="minimonthPick(this.value);"/>
          </hbox>
        </vbox>
      </calendar-modevbox>
      <separator id="minimonth-splitter" style="min-width:100px;"/>
      <vbox id="calendar-panel" flex="1">
        <calendar-modevbox id="task-filter-pane"
                           mode="task"
                           refcontrol="calendar_toggle_filter_command">
          <checkbox id="task-tree-filter-header"
                           checked="true"
                           class="treenode-checkbox"
                           label="&calendar.task.filter.title.label;"/>
          <calendar-modevbox id="task-filtertree-pane"
                             flex="1"
                             mode="task"
                             refcontrol="task-tree-filter-header">
            <radiogroup id="task-tree-filtergroup" class="task-tree-subpane"
                        persist="value">
              <radio id="opt_throughcurrent_filter" label="&calendar.task.filter.current.label;" value="throughcurrent" command="calendar_task_filter_command"/>
              <radio id="opt_today_filter" label="&calendar.task.filter.today.label;" value="throughtoday" command="calendar_task_filter_command"/>
              <radio id="opt_next7days_filter" label="&calendar.task.filter.next7days.label;" value="throughsevendays" command="calendar_task_filter_command"/>
              <radio id="opt_notstarted_filter" label="&calendar.task.filter.notstarted.label;" value="notstarted" command="calendar_task_filter_command"/>
              <radio id="opt_overdue_filter" label="&calendar.task.filter.overdue.label;" value="overdue" command="calendar_task_filter_command"/>
              <radio id="opt_completed_filter" label="&calendar.task.filter.completed.label;" value="completed" command="calendar_task_filter_command"/>
              <radio id="opt_open_filter" label="&calendar.task.filter.open.label;" value="open" command="calendar_task_filter_command"/>
              <radio id="opt_all_filter" label="&calendar.task.filter.all.label;" value="all" command="calendar_task_filter_command"/>
            </radiogroup>
          </calendar-modevbox>
        </calendar-modevbox>
        <calendar-modevbox id="calendar-list-pane"
                           flex="1"
                           mode="calendar,task"
                           refcontrol="calendar_toggle_calendarlist_command">
          <html:button id="calendarListHeader"
                       class="calendar-list-header button-flat"
                       onclick="toggleVisibilityCalendarsList(event);">
            <html:span data-l10n-id="calendar-list-header"></html:span>
            <html:img id="toggleCalendarIcon"
                      src="chrome://messenger/skin/icons/new/nav-down-sm.svg"
                      alt="" />
              </html:button>
          <calendar-modevbox id="calendar-list-inner-pane"
                             flex="1"
                             mode="calendar,task"
                             refcontrol="calendarListHeader"
                             oncontextmenu="openCalendarListItemContext(event);">
            <html:ol id="calendar-list" is="orderable-tree-listbox"
                     role="listbox"></html:ol>
            <template id="calendar-list-item" xmlns="http://www.w3.org/1999/xhtml">
              <li draggable="true" role="option">
                <div class="calendar-color"></div>
                <div class="calendar-name"></div>
                <img class="calendar-readstatus calendar-list-icon"
                     src="chrome://messenger/skin/icons/new/compact/lock.svg"
                     alt="" />
                <img class="calendar-mute-status calendar-list-icon"
                     src="chrome://messenger/skin/icons/new/bell-disabled.svg"
                     alt="" />
                <button class="calendar-enable-button"></button>
                <input type="checkbox"
                       class="calendar-displayed" />
                <button class="calendar-more-button button icon-button icon-only"
                        onclick="openCalendarListItemContext(event);"
                        type="button">
                </button>
              </li>
            </template>
          </calendar-modevbox>
          <html:div id="sideButtonsBottom" xmlns="http://www.w3.org/1999/xhtml">
            <button id="newCalendarSidebarButton"
                    class="button button-flat icon-button"
                    data-l10n-id="calendar-import-new-calendar"
                    onclick="goDoCommand('calendar_new_calendar_command')"
                    type="button">
            </button>
            <button id="refreshCalendar"
                    class="button button-flat icon-button icon-only"
                    data-l10n-id="calendar-refresh-calendars"
                    onclick="goDoCommand('calendar_reload_remote_calendars')"
                    type="button">
            </button>
          </html:div>
        </calendar-modevbox>
      </vbox>
    </vbox>

    <splitter id="calsidebar_splitter"
              collapse="before"
              persist="state"
              class="calendar-sidebar-splitter"/>

    <hbox id="calendarDisplayBox" flex="1">
      <!-- Events View ("Unifinder") -->
      <vbox id="calendar-view-box"
            flex="1"
            context="calendar-view-context-menu"
            collapsed="true">
        <vbox id="calendar-deactivated-notification-location-events">
          <!-- Calendar deactivated notificationbox for events will be added here lazily. -->
        </vbox>
        <vbox id="bottom-events-box" persist="height">
          <hbox id="unifinder-searchBox" class="themeable-brighttext" persist="collapsed">
            <box align="center">
              <menulist id="event-filter-menulist" value="P7D" persist="value">
                <menupopup id="event-filter-menupopup" oncommand="refreshEventTree()">
                  <menuitem id="event-filter-all"
                            label="&calendar.events.filter.all.label;"
                            value="all"/>
                  <menuitem id="event-filter-today"
                            label="&calendar.events.filter.today.label;"
                            value="today"/>
                  <menuitem id="event-filter-next7days"
                            label="&calendar.events.filter.next7Days.label;"
                            value="P7D"/>
                  <menuitem id="event-filter-next14Days"
                            label="&calendar.events.filter.next14Days.label;"
                            value="P14D"/>
                  <menuitem id="event-filter-next31Days"
                            label="&calendar.events.filter.next31Days.label;"
                            value="P31D"/>
                  <menuitem id="event-filter-thisCalendarMonth"
                            label="&calendar.events.filter.thisCalendarMonth.label;"
                            value="thisCalendarMonth"/>
                  <menuitem id="event-filter-future"
                            label="&calendar.events.filter.future.label;"
                            value="future"/>
                  <menuitem id="event-filter-current"
                            label="&calendar.events.filter.current.label;"
                            value="current"/>
                  <menuitem id="event-filter-currentview"
                            label="&calendar.events.filter.currentview.label;"
                            value="currentview"/>
                </menupopup>
              </menulist>
            </box>
            <box align="center" flex="1">
              <label control="unifinder-search-field" value="&calendar.search.options.searchfor;"/>
              <search-textbox id="unifinder-search-field"
                              class="themeableSearchBox"
                              oncommand="refreshEventTree();"
                              flex="1"/>
            </box>
            <toolbarbutton id="unifinder-closer"
                           class="unifinder-closebutton close-icon"
                           command="calendar_show_unifinder_command"
                           tooltiptext="&calendar.unifinder.close.tooltip;"/>
          </hbox>
          <tree id="unifinder-search-results-tree" flex="1"
                onselect="unifinderSelect(event); calendarController.onSelectionChanged()"
                onkeypress="unifinderKeyPress(event)"
                _selectDelay="500"
                persist="sort-active sort-direction"
                enableColumnDrag="true">
            <treecols id="unifinder-search-results-tree-cols">
              <treecol id="unifinder-search-results-tree-col-title"
                       persist="hidden ordinal width"
                       style="flex: 1 auto"
                       closemenu="none"
                       itemproperty="title"
                       label="&calendar.unifinder.tree.title.label;"
                       tooltiptext="&calendar.unifinder.tree.title.tooltip2;"/>
              <splitter class="tree-splitter"/>
              <treecol id="unifinder-search-results-tree-col-startdate"
                       persist="hidden ordinal width"
                       style="flex: 1 auto"
                       closemenu="none"
                       itemproperty="startDate"
                       label="&calendar.unifinder.tree.startdate.label;"
                       tooltiptext="&calendar.unifinder.tree.startdate.tooltip2;"/>
              <splitter class="tree-splitter"/>
              <treecol id="unifinder-search-results-tree-col-enddate"
                       persist="hidden ordinal width"
                       style="flex: 1 auto"
                       closemenu="none"
                       itemproperty="endDate"
                       label="&calendar.unifinder.tree.enddate.label;"
                       tooltiptext="&calendar.unifinder.tree.enddate.tooltip2;"/>
              <splitter class="tree-splitter"/>
              <treecol id="unifinder-search-results-tree-col-categories"
                       persist="hidden ordinal width"
                       style="flex: 1 auto"
                       closemenu="none"
                       itemproperty="categories"
                       label="&calendar.unifinder.tree.categories.label;"
                       tooltiptext="&calendar.unifinder.tree.categories.tooltip2;"/>
              <splitter class="tree-splitter"/>
              <treecol id="unifinder-search-results-tree-col-location"
                       persist="hidden ordinal width"
                       style="flex: 1 auto"
                       closemenu="none"
                       hidden="true"
                       itemproperty="location"
                       label="&calendar.unifinder.tree.location.label;"
                       tooltiptext="&calendar.unifinder.tree.location.tooltip2;"/>
              <splitter class="tree-splitter"/>
              <treecol id="unifinder-search-results-tree-col-status"
                       persist="hidden ordinal width"
                       style="flex: 1 auto"
                       closemenu="none"
                       hidden="true"
                       itemproperty="status"
                       label="&calendar.unifinder.tree.status.label;"
                       tooltiptext="&calendar.unifinder.tree.status.tooltip2;"/>
              <treecol id="unifinder-search-results-tree-col-calendarname"
                       persist="hidden ordinal width"
                       style="flex: 1 auto"
                       closemenu="none"
                       hidden="true"
                       itemproperty="calendar"
                       label="&calendar.unifinder.tree.calendarname.label;"
                       tooltiptext="&calendar.unifinder.tree.calendarname.tooltip2;"/>
            </treecols>

            <!-- on mousedown here happens before onclick above -->
            <treechildren tooltip="eventTreeTooltip"
                          context="calendar-item-context-menu"
                          onkeypress="if (event.key == 'Enter') { unifinderEditCommand(); }"
                          ondragenter="return false;"
                          ondblclick="unifinderDoubleClick(event)"
                          onfocus="focusFirstItemIfNoSelection();"/>
          </tree>
        </vbox>
        <splitter id="calendar-view-splitter"
                  resizebefore="closest"
                  resizeafter="farthest"
                  persist="state"
                  class="chromeclass-extrachrome sidebar-splitter calendar-splitter"
                  orient="vertical"
                  onmouseup="setTimeout(refreshEventTree, 10);"/>

        <!-- Calendar Navigation Control Bar -->
        <html:div id="calendarViewHeader"
                  xmlns="http://www.w3.org/1999/xhtml">
          <div class="navigation-inner-box" >
            <!-- If you are extending a view, add attributes to these
                  nodes for your view. i.e if your view has the id
                  "foobar-view", then you need to add the attribute
                  tooltiptext-foobar="..." -->
            <div id="calendarControls">
              <div class="button-group">
                <button id="previousViewButton"
                        class="button icon-button icon-only"
                        onclick="goDoCommand('calendar_view_prev_command')"
                        type="button">
                </button>
                <button id="todayViewButton"
                        class="button icon-button icon-only"
                        data-l10n-id="calendar-today-button-tooltip"
                        onclick="currentView().moveView()"
                        type="button">
                </button>
                <button id="nextViewButton"
                        class="button icon-button icon-only"
                        onclick="goDoCommand('calendar_view_next_command')"
                        type="button">
                </button>
              </div>
            </div>
            <span id="intervalDescription" class="view-header"/>
          </div>
          <div class="navigation-inner-box">
            <span id="calendarWeek" class="view-header"/>
            <div id="viewToggle" role="tablist" class="calview-toggle">
              <button id="calTabDay"
                      class="calview-toggle-item"
                      onclick="goDoCommand('calendar_day-view_command')"
                      role="tab"
                      aria-controls="day-view"
                      aria-selected="false"
                      data-l10n-id="calendar-view-toggle-day"></button>
              <button id="calTabWeek"
                      class="calview-toggle-item"
                      onclick="goDoCommand('calendar_week-view_command')"
                      role="tab"
                      aria-controls="week-view"
                      aria-selected="false"
                      data-l10n-id="calendar-view-toggle-week"></button>
              <button id="calTabMultiweek"
                      class="calview-toggle-item"
                      onclick="goDoCommand('calendar_multiweek-view_command')"
                      role="tab"
                      aria-controls="multiweek-view"
                      aria-selected="false"
                      data-l10n-id="calendar-view-toggle-multiweek"></button>
              <button id="calTabMonth"
                      class="calview-toggle-item"
                      onclick="goDoCommand('calendar_month-view_command')"
                      role="tab"
                      aria-controls="month-view"
                      aria-selected="false"
                      data-l10n-id="calendar-view-toggle-month"></button>
            </div>
            <button id="calendarControlBarMenu"
                    class="button button-flat icon-button icon-only"
                    onclick="showCalControlBarMenuPopup(event)"
                    data-l10n-id="calendar-control-bar-menu-button"
                    type="button">
            </button>
          </div>
        </html:div>
        <vbox flex="1"
              id="view-box"
              persist="selectedIndex">
          <!-- Note: the "id" attributes of the calendar panes **must** follow the
               notation 'type + "-" + "view"', where "type" should refer to the
               displayed time period as described in base/public/calICalendarView.idl -->
          <calendar-day-view id="day-view"
                             context="calendar-view-context-menu"
                             item-context="calendar-item-context-menu"/>
          <calendar-week-view id="week-view"
                              context="calendar-view-context-menu"
                              item-context="calendar-item-context-menu"/>
          <calendar-multiweek-view id="multiweek-view" flex="1"
                                   context="calendar-view-context-menu"
                                   item-context="calendar-item-context-menu"/>
          <calendar-month-view id="month-view" flex="1"
                               context="calendar-view-context-menu"
                               item-context="calendar-item-context-menu"/>
        </vbox>
      </vbox>
      <!-- Tasks View -->
      <vbox id="calendar-task-box" flex="1"
            collapsed="true">
        <vbox id="calendar-deactivated-notification-location-tasks">
          <!-- Calendar deactivated notificationbox for tasks will be added here lazily. -->
        </vbox>
        <hbox id="task-addition-box" class="themeable-brighttext" align="center">
          <box align="center" flex="1">
            <toolbarbutton id="calendar-add-task-button"
                           label="&calendar.newtask.button.label;"
                           tooltiptext="&calendar.newtask.button.tooltip;"
                           command="calendar_new_todo_command"/>
            <hbox align="center" flex="1" class="input-container">
              <html:input id="view-task-edit-field"
                          class="task-edit-field themeableSearchBox"
                          onfocus="taskEdit.onFocus(event)"
                          onblur="taskEdit.onBlur(event)"
                          onkeypress="taskEdit.onKeyPress(event)"/>
            </hbox>
          </box>
          <box align="center" flex="1">
            <search-textbox id="task-text-filter-field"
                            class="themeableSearchBox"
                            flex="1"
                            placeholder=""
                            emptytextbase="&calendar.task.text-filter.textbox.emptytext.base1;"
                            keyLabelNonMac="&calendar.task.text-filter.textbox.emptytext.keylabel.nonmac;"
                            keyLabelMac="&calendar.task.text-filter.textbox.emptytext.keylabel.mac;"
                            oncommand="taskViewUpdate();"/>
          </box>
        </hbox>
        <vbox flex="1">
          <tree is="calendar-task-tree" id="calendar-task-tree"
                flex="1"
                visible-columns="completed priority title entryDate dueDate"
                persist="visible-columns ordinals widths sort-active sort-direction height"
                context="taskitem-context-menu"
                onselect="taskDetailsView.onSelect(event);"/>
          <splitter id="calendar-task-view-splitter" collapse="none" persist="state" class="calendar-splitter"/>
          <vbox id="calendar-task-details-container"
                flex="1"
                persist="height"
                hidden="true">
            <hbox id="calendar-task-details">
              <hbox id="other-actions-box">
                <vbox id="task-actions-toolbox" class="inline-toolbox">
                  <hbox id="task-actions-toolbar" class="themeable-brighttext">
                    <toolbarbutton id="task-actions-category"
                                   type="menu"
                                   wantdropmarker="true"
                                   label="&calendar.unifinder.tree.categories.label;"
                                   tooltiptext="&calendar.task.category.button.tooltip;"
                                   command="calendar_task_category_command"
                                   class="toolbarbutton-1 message-header-view-button">
                      <menupopup id="task-actions-category-popup"
                                 onpopupshowing="taskDetailsView.loadCategories(event);"
                                 onpopuphiding="return taskDetailsView.saveCategories(event);">
                        <html:input id="task-actions-category-textbox"
                                    placeholder="&event.categories.textbox.label;"
                                    onblur="this.parentNode.removeAttribute(&quot;ignorekeys&quot;);"
                                    onfocus="this.parentNode.setAttribute(&quot;ignorekeys&quot;, &quot;true&quot;);"
                                    onkeypress="taskDetailsView.categoryTextboxKeypress(event);"/>
                        <menuseparator/>
                      </menupopup>
                    </toolbarbutton>
                    <toolbarbutton is="toolbarbutton-menu-button" id="task-actions-markcompleted"
                                   type="menu"
                                   label="&calendar.context.markcompleted.label;"
                                   tooltiptext="&calendar.task.complete.button.tooltip;"
                                   command="calendar_toggle_completed_command"
                                   class="toolbarbutton-1 message-header-view-button">
                      <menupopup is="calendar-task-progress-menupopup" id="task-actions-markcompleted-menupopup"/>
                    </toolbarbutton>
                    <toolbarbutton id="task-actions-priority"
                                   type="menu"
                                   wantdropmarker="true"
                                   label="&calendar.context.priority.label;"
                                   tooltiptext="&calendar.task.priority.button.tooltip;"
                                   command="calendar_general-priority_command"
                                   class="toolbarbutton-1 message-header-view-button">
                      <menupopup is="calendar-task-priority-menupopup" id="task-actions-priority-menupopup"/>
                    </toolbarbutton>
                    <toolbarbutton id="calendar-delete-task-button"
                                   class="toolbarbutton-1 message-header-view-button"
                                   label="&calendar.taskview.delete.label;"
                                   tooltiptext="&calendar.context.deletetask.label;"
                                   command="calendar_delete_todo_command"/>
                  </hbox>
                </vbox>
              </hbox>
              <hbox id ="calendar-task-details-box">
                <html:table id="calendar-task-details-grid">
                  <html:tr id="calendar-task-details-title-row"
                           hidden="hidden">
                    <html:th class="task-details-name">
                      &calendar.task-details.title.label;
                    </html:th>
                    <html:td id="calendar-task-details-title"
                             class="task-details-value">
                    </html:td>
                  </html:tr>
                  <html:tr id="calendar-task-details-priority-row"
                           hidden="hidden">
                    <html:th id="calendar-task-details-priority-label"
                             class="task-details-name">
                      &calendar.task-details.priority.label;
                    </html:th>
                    <html:td id="calendar-task-details-priority-td">
                      <label id="calendar-task-details-priority-low"
                             value="&calendar.task-details.priority.low.label;"
                             class="task-details-value"
                             hidden="true"/>
                      <label id="calendar-task-details-priority-normal"
                             value="&calendar.task-details.priority.normal.label;"
                             class="task-details-value"
                             hidden="true"/>
                      <label id="calendar-task-details-priority-high"
                             value="&calendar.task-details.priority.high.label;"
                             class="task-details-value"
                             hidden="true"/>
                    </html:td>
                  </html:tr>
                  <html:tr id="calendar-task-details-organizer-row"
                           hidden="hidden">
                    <html:th class="task-details-name">
                      &calendar.task-details.organizer.label;
                    </html:th>
                    <html:td id="calendar-task-details-organizer"
                             class="task-details-value text-link"
                             onclick="sendMailToOrganizer()">
                    </html:td>
                  </html:tr>
                  <html:tr id="calendar-task-details-status-row"
                           hidden="hidden">
                    <html:th class="task-details-name">
                      &calendar.task-details.status.label;
                    </html:th>
                    <html:td id="calendar-task-details-status"
                             class="task-details-value">
                    </html:td>
                  </html:tr>
                  <html:tr id="calendar-task-details-category-row"
                           hidden="hidden">
                    <html:th class="task-details-name">
                      &calendar.task-details.category.label;
                    </html:th>
                    <html:td id="calendar-task-details-category"
                             class="task-details-value">
                    </html:td>
                  </html:tr>
                  <html:tr id="task-start-row"
                           class="item-date-row"
                           hidden="hidden">
                    <html:th class="headline">
                      &calendar.task-details.start.label;
                    </html:th>
                    <html:td id="task-start-date">
                    </html:td>
                  </html:tr>
                  <html:tr id="task-due-row"
                           class="item-date-row"
                           hidden="hidden">
                    <html:th class="headline">
                      &calendar.task-details.due.label;
                    </html:th>
                    <html:td id="task-due-date">
                    </html:td>
                  </html:tr>
                  <html:tr id="calendar-task-details-repeat-row"
                           hidden="hidden">
                    <html:th class="task-details-name">
                      &calendar.task-details.repeat.label;
                    </html:th>
                    <html:td id="calendar-task-details-repeat"
                             class="task-details-value">
                    </html:td>
                  </html:tr>
                </html:table>
              </hbox>
            </hbox>
            <hbox id="calendar-task-details-description-wrapper" flex="1">
              <iframe id="calendar-task-details-description" type="content"/>
            </hbox>
            <hbox id="calendar-task-details-attachment-row"
                  align="start"
                  hidden="true">
              <hbox pack="end">
                <label value="&calendar.task-details.attachments.label;"
                       class="task-details-name"/>
              </hbox>
              <vbox id="calendar-task-details-attachment-rows"
                    align="start"
                    flex="1"
                    style="overflow: auto;"
                    hidden="true">
              </vbox>
            </hbox>
          </vbox>
        </vbox>
      </vbox>
    </hbox>
  </hbox>

  <!-- This form is injected into the printing options page (by calendar-print.js)
       if we are printing the calendar. The script for the form is also in
       calendar-print.js and CSS in calendar-print.css. -->
  <template xmlns="http://www.w3.org/1999/xhtml" id="calendarPrintForm">
    <form id="calendar-print">
      <link rel="localization" href="calendar/calendar-print.ftl"/>
      <link rel="stylesheet" href="chrome://calendar/skin/shared/calendar-print.css"/>

      <section class="body-container">
        <section class="section-block">
          <label for="layout" class="block-label" data-l10n-id="calendar-print-layout-label"></label>
          <div class="layout-wrapper">
            <select id="layout" autocomplete="off">
              <option value="list" data-l10n-id="calendar-print-layout-list"></option>
              <option value="monthGrid" data-l10n-id="calendar-print-layout-month-grid"></option>
              <option value="weekPlanner" data-l10n-id="calendar-print-layout-week-planner"></option>
            </select>
          </div>
        </section>

        <section class="section-block">
          <label class="block-label" data-l10n-id="calendar-print-filter-label"></label>
          <label class="row cols-2">
            <input type="checkbox" id="events" checked="checked" autocomplete="off" />
            <span data-l10n-id="calendar-print-filter-events"></span>
          </label>
          <label class="row cols-2">
            <input type="checkbox" id="tasks" checked="checked" autocomplete="off" />
            <span data-l10n-id="calendar-print-filter-tasks"></span>
          </label>
          <label class="row cols-2 indent">
            <input type="checkbox" id="completed-tasks" checked="checked" autocomplete="off" />
            <span data-l10n-id="calendar-print-filter-completedtasks"></span>
          </label>
          <label class="row cols-2 indent">
            <input type="checkbox" id="tasks-with-no-due-date" checked="checked" autocomplete="off" />
            <span data-l10n-id="calendar-print-filter-taskswithnoduedate"></span>
          </label>
        </section>

        <fieldset class="section-block">
          <legend class="block-label" data-l10n-id="calendar-print-range-from"></legend>
          <xul:calendar-minimonth id="from-minimonth"></xul:calendar-minimonth>
          <select id="from-month"></select>
          <input id="from-year" type="number" size="1"/>
          <select id="from-date"></select>
        </fieldset>
        <fieldset class="section-block">
          <legend class="block-label" data-l10n-id="calendar-print-range-to"></legend>
          <xul:calendar-minimonth id="to-minimonth"></xul:calendar-minimonth>
          <select id="to-month"></select>
          <input id="to-year" type="number" size="1"/>
          <select id="to-date"></select>
        </fieldset>
      </section>

      <hr />

      <footer class="footer-container" role="none">
        <section id="next-button-container" class="section-block">
          <button id="next-button"
                  class="primary"
                  type="submit"
                  showfocus=""
                  autocomplete="off"
                  data-l10n-id="calendar-print-next-button"></button>
          <button is="cancel-button"
                  type="button"
                  data-l10n-id="printui-cancel-button"
                  data-close-l10n-id="printui-close-button"
                  data-cancel-l10n-id="printui-cancel-button"></button>
        </section>
      </footer>

      <!-- This section will be added to the footer of the original form. -->
      <section id="back-button-container" class="section-block">
        <button id="back-button"
                type="button"
                autocomplete="off"
                data-l10n-id="calendar-print-back-button"></button>
      </section>
    </form>
  </template>
</vbox>

<!-- Menus -->

<menupopup id="calControlBarMenuPopup" position="bottomleft topleft">
  <menuitem id="findEventsButton"
            data-l10n-id="calendar-find-events-menu-option"
            type="checkbox"
            checked="true"
            command="calendar_show_unifinder_command"/>
  <menuseparator id="separatorBeforeHideWeekends"/>
  <menuitem id="hideWeekendsButton"
            data-l10n-id="calendar-hide-weekends-option"
            type="checkbox"
            command="calendar_toggle_workdays_only_command"/>
  <menuitem id="defineWorkweekButton"
            data-l10n-id="calendar-define-workweek-option"
            oncommand="showCalendarWeekPreferences();"/>
  <menuseparator id="separatorBeforeTasks"/>
  <menuitem id="showTasksInCalendarButton"
            data-l10n-id="calendar-show-tasks-calendar-option"
            type="checkbox"
            command="calendar_toggle_tasks_in_view_command"/>
</menupopup>


    <vbox id="calendarItemPanel" collapsed="true">

      <!-- The id of the inner vbox and the iframe are set dynamically
           when a tab is created. -->
      <vbox flex="1"
            id="dummy-calendar-event-dialog-tab"
            class="calendar-event-dialog-tab">

        <!-- Commands -->
        <commandset id="itemCommands">
          <command id="cmd_save"
                   disable-on-readonly="true"
                   oncommand="onCommandSave()"/>
          <command id="cmd_item_delete"
                   disable-on-readonly="true"
                   oncommand="onCommandDeleteItem()"/>

          <!-- View menu -->
          <command id="cmd_customize"
                   oncommand="onCommandCustomize()"/>

          <!-- status -->
          <command id="cmd_status_none"
                   oncommand="editStatus(event.target)"
                   hidden="true"
                   value="NONE"/>
          <command id="cmd_status_tentative"
                   oncommand="editStatus(event.target)"
                   value="TENTATIVE"/>
          <command id="cmd_status_confirmed"
                   oncommand="editStatus(event.target)"
                   value="CONFIRMED"/>
          <command id="cmd_status_cancelled"
                   oncommand="editStatus(event.target)"
                   value="CANCELLED"/>

          <!-- priority -->
          <command id="cmd_priority_none"
                   oncommand="editPriority(event.target)"
                   value="0"/>
          <command id="cmd_priority_low"
                   oncommand="editPriority(event.target)"
                   value="9"/>
          <command id="cmd_priority_normal"
                   oncommand="editPriority(event.target)"
                   value="5"/>
          <command id="cmd_priority_high"
                   oncommand="editPriority(event.target)"
                   value="1"/>

          <!-- freebusy -->
          <command id="cmd_showtimeas_busy"
                   oncommand="editShowTimeAs(event.target)"
                   value="OPAQUE"/>
          <command id="cmd_showtimeas_free"
                   oncommand="editShowTimeAs(event.target)"
                   value="TRANSPARENT"/>

          <!-- attendees -->
          <command id="cmd_attendees"
                   oncommand="editAttendees();"/>

          <!-- accept, attachments, timezone -->
          <command id="cmd_accept"
                   disable-on-readonly="true"
                   oncommand="sendMessage({ command: 'onAccept' });"/>
          <command id="cmd_attach_url"
                   disable-on-readonly="true"
                   oncommand="attachURL()"/>
          <command id="cmd_attach_cloud"
                   disable-on-readonly="true"/>
          <command id="cmd_timezone"
                   persist="checked"
                   checked="false"
                   oncommand="toggleTimezoneLinks()"/>
        </commandset>

        <keyset id="calendar-event-dialog-keyset">
          <key id="save-key"
               modifiers="accel, shift"
               key="&event.dialog.save.key;"
               command="cmd_save"/>
          <key id="saveandclose-key"
               modifiers="accel"
               key="&event.dialog.saveandclose.key;"
               command="cmd_accept"/>
          <key id="saveandclose-key2"
               modifiers="accel"
               keycode="VK_RETURN"
               command="cmd_accept"/>
        </keyset>

        <toolbox id="event-toolbox"
                 class="mail-toolbox"
                 mode="full"
                 defaultmode="full"
                 iconsize="small"
                 defaulticonsize="small"
                 labelalign="end"
                 defaultlabelalign="end">
          <toolbarpalette id="event-toolbarpalette">

  <toolbarbutton id="button-save"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1"
                 label="&event.toolbar.save.label2;"
                 tooltiptext="&event.toolbar.save.tooltip2;"
                 command="cmd_save"/>
  <toolbarbutton id="button-saveandclose"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1"
                 label="&event.toolbar.saveandclose.label;"
                 tooltiptext="&event.toolbar.saveandclose.tooltip;"
                 command="cmd_accept"/>
  <toolbarbutton id="button-attendees"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1 event-only"
                 disable-on-readonly="true"
                 label="&event.toolbar.attendees.label;"
                 tooltiptext="&event.toolbar.attendees.tooltip;"
                 command="cmd_attendees"/>
  <toolbarbutton id="button-privacy"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1"
                 type="menu"
                 wantdropmarker="true"
                 disable-on-readonly="true"
                 label="&event.toolbar.privacy.label;"
                 tooltiptext="&event.toolbar.privacy.tooltip;">
    <menupopup id="event-privacy-menupopup">
      <menuitem id="event-privacy-public-menuitem"
                name="event-privacy-group"
                label="&event.menu.options.privacy.public.label;"
                type="radio"
                privacy="PUBLIC"
                oncommand="editPrivacy(this, event)"/>
      <menuitem id="event-privacy-confidential-menuitem"
                name="event-privacy-group"
                label="&event.menu.options.privacy.confidential.label;"
                type="radio"
                privacy="CONFIDENTIAL"
                oncommand="editPrivacy(this, event)"/>
      <menuitem id="event-privacy-private-menuitem"
                name="event-privacy-group"
                label="&event.menu.options.privacy.private.label;"
                type="radio"
                privacy="PRIVATE"
                oncommand="editPrivacy(this, event)"/>
    </menupopup>
  </toolbarbutton>
  <toolbarbutton id="button-url"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1"
                 type="menu"
                 wantdropmarker="true"
                 label="&event.attachments.menubutton.label;"
                 tooltiptext="&event.toolbar.attachments.tooltip;"
                 disable-on-readonly="true">
    <menupopup id="button-attach-menupopup">
      <menuitem id="button-attach-url"
                label="&event.attachments.url.label;"
                command="cmd_attach_url"/>
      <!-- Additional items are added here in loadCloudProviders(). -->
    </menupopup>
  </toolbarbutton>
  <toolbarbutton id="button-delete"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1"
                 label="&event.toolbar.delete.label;"
                 tooltiptext="&event.toolbar.delete.tooltip;"
                 command="cmd_item_delete"
                 disable-on-readonly="true"/>
  <toolbarbutton id="button-priority"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1"
                 type="menu"
                 wantdropmarker="true"
                 disable-on-readonly="true"
                 label="&event.menu.options.priority2.label;"
                 tooltiptext="&event.toolbar.priority.tooltip;">
    <menupopup id="event-priority-menupopup">
      <menuitem id="event-priority-none-menuitem"
                name="event-priority-group"
                label="&event.menu.options.priority.notspecified.label;"
                type="radio"
                command="cmd_priority_none"/>
      <menuitem id="event-priority-low-menuitem"
                name="event-priority-group"
                label="&event.menu.options.priority.low.label;"
                type="radio"
                command="cmd_priority_low"/>
      <menuitem id="event-priority-normal-menuitem"
                name="event-priority-group"
                label="&event.menu.options.priority.normal.label;"
                type="radio"
                command="cmd_priority_normal"/>
      <menuitem id="event-priority-high-menuitem"
                name="event-priority-group"
                label="&event.menu.options.priority.high.label;"
                type="radio"
                command="cmd_priority_high"/>
    </menupopup>
  </toolbarbutton>
  <toolbarbutton id="button-status"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1 event-only"
                 type="menu"
                 wantdropmarker="true"
                 disable-on-readonly="true"
                 label="&newevent.status.label;"
                 tooltiptext="&event.toolbar.status.tooltip;">
    <menupopup id="event-status-menupopup">
      <menuitem id="event-status-none-menuitem"
                name="event-status-group"
                label="&newevent.eventStatus.none.label;"
                type="radio"
                command="cmd_status_none"/>
      <menuitem id="event-status-tentative-menuitem"
                name="event-status-group"
                label="&newevent.status.tentative.label;"
                type="radio"
                command="cmd_status_tentative"/>
      <menuitem id="event-status-confirmed-menuitem"
                name="event-status-group"
                label="&newevent.status.confirmed.label;"
                type="radio"
                command="cmd_status_confirmed"/>
      <menuitem id="event-status-cancelled-menuitem"
                name="event-status-group"
                label="&newevent.eventStatus.cancelled.label;"
                type="radio"
                command="cmd_status_cancelled"/>
    </menupopup>
  </toolbarbutton>
  <toolbarbutton id="button-freebusy"
                 mode="dialog"
                 class="cal-event-toolbarbutton toolbarbutton-1 event-only"
                 type="menu"
                 wantdropmarker="true"
                 disable-on-readonly="true"
                 label="&event.menu.options.show.time.label;"
                 tooltiptext="&event.toolbar.freebusy.tooltip;">
    <menupopup id="event-freebusy-menupopup">
      <menuitem id="event-freebusy-busy-menuitem"
                name="event-freebusy-group"
                label="&event.menu.options.show.time.busy.label;"
                type="radio"
                command="cmd_showtimeas_busy"/>
      <menuitem id="event-freebusy-free-menuitem"
                name="event-freebusy-group"
                label="&event.menu.options.show.time.free.label;"
                type="radio"
                command="cmd_showtimeas_free"/>
    </menupopup>
  </toolbarbutton>
  <toolbarbutton id="button-timezones"
                 mode="dialog"
                 type="checkbox"
                 class="cal-event-toolbarbutton toolbarbutton-1"
                 label="&event.menu.options.timezone2.label;"
                 tooltiptext="&event.menu.options.timezone2.label;"
                 command="cmd_timezone"/>
          </toolbarpalette>
          <!-- toolboxid is set here since we move the toolbar around for tabs -->
          <toolbar is="customizable-toolbar" id="event-tab-toolbar"
                   toolbarname="&event.menu.view.toolbars.event.label;"
                   accesskey="&event.menu.view.toolbars.event.accesskey;"
                   toolboxid="event-toolbox"
                   class="chromeclass-toolbar inline-toolbar themeable-full"
                   customizable="true"
                   labelalign="end"
                   defaultlabelalign="end"
                   context="event-dialog-toolbar-context-menu"
                   defaultset="button-saveandclose,button-attendees,button-privacy,button-url,button-priority,button-status,button-freebusy,button-delete,spring"/>
        </toolbox>

        <iframe id="calendar-item-panel-iframe" flex="1"/>

      </vbox>
    </vbox>
      </tabpanels>
     </tabbox>
      <html:template id="mail3PaneTabTemplate">
        <stack flex="1">
          <browser flex="1"
                   src="about:3pane"
                   autocompletepopup="PopupAutoComplete"
                   messagemanagergroup="single-page"/>
        </stack>
      </html:template>
      <html:template id="mailMessageTabTemplate">
        <stack flex="1">
          <browser flex="1"
                   src="about:message"
                   autocompletepopup="PopupAutoComplete"
                   messagemanagergroup="single-page"/>
        </stack>
      </html:template>

<!-- Template for <calendar-invitation-panel/> -->
<template id="calendarInvitationPanel" xmlns="http://www.w3.org/1999/xhtml">
  <calendar-invitation-panel-status-bar/>
  <div class="calendar-invitation-panel-wrapper">
    <div class="calendar-invitation-panel-preview">
      <calendar-minidate/>
    </div>
    <div class="calendar-invitation-panel-details">
      <div class="calendar-invitation-panel-title">
        <calendar-invitation-change-indicator id="titleChangeIndicator"
                                              hidden="hidden"/>
        <h1 class="calendar-invitation-panel-title" id="title"></h1>
      </div>
       <table id="props" class="calendar-invitation-panel-props">
         <tbody>
           <tr class="calendar-invitation-row">
             <th data-l10n-id="calendar-invitation-panel-prop-title-when"></th>
             <td class="calendar-invitation-when">
               <calendar-invitation-change-indicator id="intervalChangeIndicator"
                                                     hidden="hidden"/>
               <calendar-invitation-interval id="when"/>
             </td>
           </tr>
           <tr hidden="hidden" class="calendar-invitation-row">
             <th data-l10n-id="calendar-invitation-panel-prop-title-recurrence"></th>
             <td id="recurrence" class="calendar-invitation-recurrence">
               <calendar-invitation-change-indicator id="recurrenceChangeIndicator"
                                                     hidden="hidden"/>
             </td>
           </tr>
           <tr hidden="hidden" class="calendar-invitation-row">
             <th data-l10n-id="calendar-invitation-panel-prop-title-location"></th>
             <td id="location" class="content">
               <calendar-invitation-change-indicator id="locationChangeIndicator"
                                                     hidden="hidden"/>
             </td>
           </tr>
           <tr hidden="hidden" class="calendar-invitation-row">
             <th data-l10n-id="calendar-invitation-panel-prop-title-attendees"></th>
             <td>
               <calendar-invitation-partstat-summary id="summary"/>
               <ul id="attendees"
                   is="calendar-invitation-panel-attendee-list"
                   class="calendar-invitation-panel-list"></ul>
             </td>
           </tr>
           <tr hidden="hidden" class="calendar-invitation-row">
             <th data-l10n-id="calendar-invitation-panel-prop-title-description"></th>
             <td id="description" class="content">
               <calendar-invitation-change-indicator id="descriptionChangeIndicator"
                                                     hidden="hidden"/>
             </td>
           </tr>
           <tr hidden="hidden" class="calendar-invitation-row">
             <th data-l10n-id="calendar-invitation-panel-prop-title-attachments"></th>
             <td class="content">
               <ul id="attachments"
                   is="calendar-invitation-panel-attachment-list"
                   class="calendar-invitation-panel-list"></ul>
             </td>
           </tr>
         </tbody>
       </table>
    </div>
  </div>
  <div id="footer" class="calendar-invitation-panel-details-footer" hidden="hidden">
    <div id="actionButtons" class="calendar-invitation-panel-response-buttons">
      <button id="acceptButton"
              data-action="accepted"
              class="primary"
              data-l10n-id="calendar-invitation-panel-accept-button"></button>
      <button id="declineButton"
              data-action="declined"
              data-l10n-id="calendar-invitation-panel-decline-button"></button>
      <button id="tentativeButton"
              data-action="tentative"
              data-l10n-id="calendar-invitation-panel-tentative-button"></button>
      </div>
    </div>
</template>

<!-- Template for <calendar-invitation-partstat-summary/> -->
<template id="calendarInvitationPartStatSummary" xmlns="http://www.w3.org/1999/xhtml">
  <div class="calendar-invitation-attendees-summary">
    <span id="partStatTotal"
          class="calendar-invitation-panel-partstat-summary-total"></span>
    <span id="partStatBreakdown" class="calendar-invitation-panel-partstat-breakdown"></span>
  </div>
</template>

<!-- Menu for the "More" button in the invitation panel. Populated via JavaScript.-->
<menupopup id="calendarInvitationPanelMoreMenu"></menupopup>

<!-- Template for <calendar-minidate /> -->
<template id="calendarMinidate" xmlns="http://www.w3.org/1999/xhtml">
  <div class="calendar-minidate-wrapper">
    <link rel="stylesheet" href="chrome://calendar/skin/shared/widgets/calendar-minidate.css"/>
    <div class="calendar-minidate-header">
      <span class="calendar-minidate-month"></span>
    </div>
    <div class="calendar-minidate-body">
      <span class="calendar-minidate-day"></span>
      <span class="calendar-minidate-year"></span>
    </div>
  </div>
</template>
      <!-- Hidden browser used for printing documents without displaying them. -->
      <browser id="hiddenPrintContent"
               type="content"
               nodefaultsrc="true"
               maychangeremoteness="true"
               hidden="true"/>
    </tabmail>

<splitter id="today-splitter"
          class="calendar-sidebar-splitter hide-when-calendar-deactivated"
          collapse="after"
          resizebefore="closest"
          state="collapsed"
          oncommand="TodayPane.onCommandTodaySplitter();">
</splitter>
<calendar-modevbox id="today-pane-panel"
                   class="hide-when-calendar-deactivated"
                   mode="mail,calendar,task,chat,calendarEvent,calendarTask"
                   modewidths="200,200,200,200,200,200"
                   refcontrol="calendar_toggle_todaypane_command"
                   persist="modewidths">
  <box class="sidebar-header" align="center">
    <label id="today-pane-header"/>
    <spacer flex="1"/>
    <calendar-modebox mode="mail,calendar,chat,calendarEvent,calendarTask">
      <toolbarbutton id="today-pane-cycler-prev"
                     dir="prev"
                     class="today-pane-cycler"
                     oncommand="TodayPane.cyclePaneView(-1);"/>
      <toolbarbutton id="today-pane-cycler-next"
                     dir="next"
                     class="today-pane-cycler"
                     oncommand="TodayPane.cyclePaneView(1);"/>
    </calendar-modebox>
    <spacer id="buttonspacer"/>
    <toolbarbutton id="today-closer" class="today-closebutton close-icon"
                   oncommand="document.getElementById('today-pane-panel').setVisible(false, true, true);
                              TodayPane.updateDisplay();
                              TodayPane.updateSplitterState();"/>
  </box>
  <vbox flex="1">
    <calendar-modevbox id="agenda-panel"
                       flex="1"
                       mode="mail,calendar,task,chat,calendarEvent,calendarTask"
                       collapsedinmodes="calendar"
                       persist="collapsed height collapsedinmodes">
      <calendar-modebox id="today-none-box"
                        mode="mail,calendar,task,chat,calendarEvent,calendarTask"
                        collapsedinmodes="mail,calendar,task,chat,calendarEvent,calendarTask"
                        refcontrol="calTodayPaneDisplayNone"
                        persist="collapsedinmodes"/>
      <calendar-modebox id="today-minimonth-box"
                        pack="center"
                        class="today-subpane"
                        mode="mail,calendar,task,chat,calendarEvent,calendarTask"
                        collapsedinmodes="mail,calendar,task,chat,calendarEvent,calendarTask"
                        refcontrol="calTodayPaneDisplayMinimonth"
                        persist="collapsedinmodes">
        <calendar-minimonth id="today-minimonth"
                            onchange="TodayPane.setDaywithjsDate(this.value);"/>
      </calendar-modebox>
      <calendar-modebox id="mini-day-box"
                        mode="mail,calendar,task,chat,calendarEvent,calendarTask"
                        class="today-subpane"
                        refcontrol="calTodayPaneDisplayMiniday"
                        collapsedinmodes=""
                        persist="collapsedinmodes"
                        onwheel="TodayPane.advance(event.detail > 0 ? 1 : -1);">
        <hbox id="mini-day-image" flex="1">
          <stack id="dateContainer">
            <hbox pack="center"
                  align="center">
              <label id="datevalue-label" class="dateValue"
                     ondblclick="TodayPane.onDoubleClick(event);"
                     onmousedown="TodayPane.onMousedown(event);"/>
            </hbox>
            <hbox id="dragCenter-image-container" flex="1" pack="center" align="center">
              <html:img id="dragCenter-image"
                        src="chrome://calendar/skin/shared/widgets/drag-center.svg"
                        alt=""
                        hidden="true" />
            </hbox>
          </stack>
          <vbox flex="1">
            <hbox pack="center">
              <label id="weekdayNameLabel"
                     ondblclick="TodayPane.onDoubleClick(event);"
                     flex="1"/>
              <hbox pack="end">
                <toolbarbutton id="previous-day-button"
                               class="miniday-nav-buttons"
                               tooltiptext="&onedaybackward.tooltip;"
                               onmousedown="TodayPane.onMousedown(event, -1);"
                               dir="-1"/>
                <toolbarbutton id="today-button"
                               class="miniday-nav-buttons"
                               tooltiptext="&showToday.tooltip;"
                               oncommand="TodayPane.setDay(cal.dtz.now());"/>
                <toolbarbutton id="next-day-button"
                               class="miniday-nav-buttons"
                               tooltiptext="&onedayforward.tooltip;"
                               onmousedown="TodayPane.onMousedown(event, 1);"
                               dir="1"/>
              </hbox>
            </hbox>
            <hbox pack="start">
              <label id="monthNameContainer" class="monthlabel"
                     ondblclick="TodayPane.onDoubleClick(event);"/>
              <label id="currentWeek-label" class="monthlabel"
                     ondblclick="TodayPane.onDoubleClick(event);"/>
              <spacer flex="1"/>
            </hbox>
          </vbox>
          <toolbarbutton id="miniday-dropdown-button"
                         tooltiptext="&showselectedday.tooltip;"
                         type="menu"
                         wantdropmarker="true">
            <panel id="miniday-month-panel" position="after_end"
                   onpopupshown="this.firstElementChild.focusCalendar();">
              <calendar-minimonth id="miniday-dropdown-minimonth"
                                  flex="1"
                                  onchange="TodayPane.setDaywithjsDate(this.value);
                                            document.getElementById('miniday-month-panel').hidePopup();"/>
            </panel>
          </toolbarbutton>
        </hbox>
      </calendar-modebox>
      <vbox id="agenda-container" tooltip="itemTooltip">
        <hbox id="agenda-toolbar" class="themeable-brighttext">
          <toolbarbutton id="todaypane-new-event-button"
                         mode="mail"
                         iconsize="small"
                         orient="horizontal"
                         label="&calendar.newevent.button.label;"
                         tooltiptext="&calendar.newevent.button.tooltip;"
                         command="calendar_new_event_todaypane_command"/>
        </hbox>
        <html:ul is="agenda-list" id="agenda" role="listbox"></html:ul>
        <template id="agenda-listitem" xmlns="http://www.w3.org/1999/xhtml">
          <div class="agenda-date-header"></div>
          <div class="agenda-listitem-details">
            <div class="agenda-listitem-calendar"></div>
            <div class="agenda-listitem-details-inner">
              <time class="agenda-listitem-time"></time>
              <span class="agenda-listitem-title"></span>
              <span class="agenda-listitem-relative"></span>
            </div>
            <img class="agenda-listitem-overlap" />
          </div>
        </template>
      </vbox>
    </calendar-modevbox>
    <splitter id="today-pane-splitter" persist="hidden" orient="vertical"/>
    <calendar-modevbox id="todo-tab-panel"
                       mode="mail,calendar,chat,calendarEvent,calendarTask"
                       collapsedinmodes="mail,task,chat,calendarEvent,calendarTask"
                       persist="height collapsedinmodes"
                       ondragover="calendarTaskButtonDNDObserver.onDragOver(event);"
                       ondrop="calendarTaskButtonDNDObserver.onDrop(event);">
      <box id="show-completed-checkbox-box" align="center">
        <checkbox id="show-completed-checkbox"
                  label="&calendar.unifinder.showcompletedtodos.label;"
                  flex="1"
                  crop="end"
                  oncommand="TodayPane.updateCalendarToDoUnifinder()"
                  persist="checked"
                  autocheck="false"/>
      </box>
      <vbox id="calendar-task-tree-detail" flex="1">
        <tree is="calendar-task-tree-todaypane" id="unifinder-todo-tree"
              flex="1"
              visible-columns="completed priority title"
              persist="visible-columns ordinals widths sort-active sort-direction filterValue"
              context="taskitem-context-menu"/>
        <html:input id="unifinder-task-edit-field"
                    class="task-edit-field themeableSearchBox"
                    onfocus="taskEdit.onFocus(event)"
                    onblur="taskEdit.onBlur(event)"
                    onkeypress="taskEdit.onKeyPress(event)"/>
      </vbox>
    </calendar-modevbox>
  </vbox>
</calendar-modevbox>
    <vbox id="contentTab" collapsed="true">
      <vbox flex="1" class="contentTabInstance">
        <vbox id="dummycontenttoolbox" class="contentTabToolbox themeable-full">
          <hbox id="dummycontenttoolbar" class="contentTabToolbar">
            <toolbarbutton class="back-btn nav-button"
                           tooltiptext="&browseBackButton.tooltip;"
                           disabled="true"/>
            <toolbarbutton class="forward-btn nav-button"
                           tooltiptext="&browseForwardButton.tooltip;"
                           disabled="true"/>
            <toolbaritem class="contentTabAddress" flex="1">
              <html:img class="contentTabSecurity" />
              <html:input class="contentTabUrlInput themeableSearchBox"
                          readonly="readonly" />
            </toolbaritem>
          </hbox>
        </vbox>
        <stack flex="1"><!-- Insert browser here. --></stack>
      </vbox>
    </vbox>
    <vbox id="glodaTab" collapsed="true">
      <vbox flex="1" class="chromeTabInstance">
        <vbox class="contentTabToolbox themeable-full">
          <hbox class="glodaTabToolbar inline-toolbar chromeclass-toolbar" flex="1">
            <spacer flex="1" />
            <spacer flex="1" />
            <hbox flex="1" class="remote-gloda-search-container">
              <html:img class="search-icon" alt=""
                        src="chrome://global/skin/icons/search-textbox.svg" />
              <html:input is="gloda-autocomplete-input"
                          type="text"
                          class="remote-gloda-search searchBox gloda-search"
                          searchbutton="true"
                          autocompletesearch="gloda"
                          autocompletepopup="PopupGlodaAutocomplete"
                          autocompletesearchparam="global"
                          timeout="200"
                          maxlength="192"
                          placeholder=""
                          emptytextbase="&search.label.base1;"
                          keyLabelNonMac="&search.keyLabel.nonmac;"
                          keyLabelMac="&search.keyLabel.mac;"/>
            </hbox>
          </hbox>
        </vbox>
        <iframe flex="1"/>
      </vbox>
    </vbox>
    <vbox id="preferencesTab" collapsed="true">
      <vbox flex="1">
        <hbox flex="1">
          <browser id="preferencesbrowser"
                   type="content"
                   flex="1"
                   disablehistory="true"
                   autocompletepopup="PopupAutoComplete"
                   messagemanagergroup="single-site"
                   onclick="return contentAreaClick(event);"/>
        </hbox>
      </vbox>
    </vbox>
  </hbox>
  <panel id="customizeToolbarSheetPopup" noautohide="true">
    <iframe id="customizeToolbarSheetIFrame"
            style="&dialog.dimensions;"
            hidden="true"/>
  </panel>

  <vbox id="messenger-notification-bottom">
      <!-- notificationbox will be added here lazily. -->
  </vbox>
  <statuspanel id="statusbar-display"/>
  <hbox id="status-bar" class="statusbar chromeclass-status">
    <html:button type="button" id="spacesToolbarReveal"
                 onclick="gSpacesToolbar.toggleToolbar(false);"
                 data-l10n-id="spaces-toolbar-button-show"
                 class="plain spaces-toolbar-statusbar-button"
                 hidden="hidden">
      <html:img src="chrome://messenger/skin/icons/new/compact/collapse.svg" alt="" />
    </html:button>
    <!-- We put the role="status" only around the information that is actually
       - status information for the mail tabs. Specifically, we exclude the
       - Spaces toolbar button and the calendar status bar (which is used when
       - editing events in a tab and for the today pane button). -->
    <hbox role="status" aria-live="off" flex="1">

    <hbox id="statusTextBox" ondblclick="openActivityMgr();" flex="1">
      <hbox class="statusbarpanel">
        <toolbarbutton id="offline-status" oncommand="MailOfflineMgr.toggleOfflineStatus();"/>
      </hbox>
      <label id="statusText" class="statusbarpanel" value="&statusText.label;" flex="1" crop="end"/>
      <hbox id="statusbar-progresspanel" class="statusbarpanel statusbarpanel-progress" collapsed="true">
        <html:progress class="progressmeter-statusbar" id="statusbar-icon" value="0" max="100"/>
      </hbox>
      <hbox id="quotaPanel" class="statusbarpanel statusbarpanel-progress" hidden="true">
        <stack>
          <html:progress id="quotaMeter" class="progressmeter-statusbar" value="0" max="100"/>
          <html:a id="quotaLabel" onclick="openFolderQuota();"></html:a>
        </stack>
      </hbox>
    </hbox>
      <hbox id="calendar-invitations-panel" class="statusbarpanel" hidden="true">
        <label id="calendar-invitations-label"
               class="text-link"
               onclick="openInvitationsDialog()"
               onkeypress="if (event.key == 'Enter') { openInvitationsDialog(); }"/>
      </hbox>
    </hbox>

<!-- event/task in tab statusbarpanels -->
<hbox id="status-privacy"
      class="statusbarpanel event-dialog"
      align="center"
      flex="1"
      collapsed="true"
      pack="start">
  <label value="&event.statusbarpanel.privacy.label;"/>
  <hbox id="status-privacy-public-box" privacy="PUBLIC">
    <label value="&event.menu.options.privacy.public.label;"/>
  </hbox>
  <hbox id="status-privacy-confidential-box" privacy="CONFIDENTIAL">
    <label value="&event.menu.options.privacy.confidential.label;"/>
  </hbox>
  <hbox id="status-privacy-private-box" privacy="PRIVATE">
    <label value="&event.menu.options.privacy.private.label;"/>
  </hbox>
</hbox>
<hbox id="status-priority"
      class="statusbarpanel event-dialog"
      align="center"
      flex="1"
      collapsed="true"
      pack="start">
  <label value="&event.priority2.label;"/>
  <html:img class="cal-statusbar-1" />
</hbox>
<hbox id="status-status"
      class="statusbarpanel event-dialog"
      align="center"
      flex="1"
      collapsed="true"
      pack="start">
  <label value="&task.status.label;"/>
  <label id="status-status-tentative-label"
         value="&newevent.status.tentative.label;"
         hidden="true"/>
  <label id="status-status-confirmed-label"
         value="&newevent.status.confirmed.label;"
         hidden="true"/>
  <label id="status-status-cancelled-label"
         value="&newevent.eventStatus.cancelled.label;"
         hidden="true"/>
</hbox>
<hbox id="status-freebusy"
      class="statusbarpanel event-only event-dialog"
      align="center"
      flex="1"
      collapsed="true"
      pack="start">
  <label value="&event.statusbarpanel.freebusy.label;"/>
  <label id="status-freebusy-free-label"
         value="&event.freebusy.legend.free;"
         hidden="true"/>
  <label id="status-freebusy-busy-label"
         value="&event.freebusy.legend.busy;"
         hidden="true"/>
</hbox>
<!-- end event/task in tab statusbarpanels -->

<calendar-modebox id="calendar-show-todaypane-panel"
                  class="statusbarpanel themeable-brighttext hide-when-calendar-deactivated"
                  mode="mail,calendar,task,chat,calendarEvent,calendarTask"
                  collapsedinmodes="special"
                  pack="center">
  <toolbarbutton id="calendar-status-todaypane-button"
                 type="checkbox"
                 label="&todaypane.statusButton.label;"
                 tooltiptext="&calendar.todaypane.button.tooltip;"
                 command="calendar_toggle_todaypane_command"/>
</calendar-modebox>
  </hbox>
</vbox><!-- Closing #messengerBody. -->


<html:template id="dialogStackTemplate">
  <stack class="dialogStack tab-dialog-box" hidden="true">
    <vbox class="dialogTemplate dialogOverlay" align="center" topmost="true" hidden="true">
      <hbox class="dialogBox">
        <browser class="dialogFrame"
                 autoscroll="false"
                 disablehistory="true"/>
      </hbox>
    </vbox>
  </stack>
</html:template>

<html:template id="printPreviewStackTemplate">
  <stack class="previewStack" rendering="true" flex="1" previewtype="primary">
    <vbox class="previewRendering" flex="1">
      <h1 class="print-pending-label" data-l10n-id="printui-loading"></h1>
    </vbox>
  </stack>
</html:template>

<!--
  List of all the account creation templates. Don't load any JavaScript or
  CSS in here, those files are handled lazily in the controller and in the
  various shadowRoots of the views.
-->
<html:template id="accountHubDialog" xmlns="http://www.w3.org/1999/xhtml">
  <dialog class="account-hub-dialog">
    <button id="closeButton" type="button">
      <img src="" alt="" />
    </button>
  </dialog>
</html:template>

<html:template id="accountHubStart" xmlns="http://www.w3.org/1999/xhtml">
  <header class="hub-header">
    <div id="welcomeHeader" class="start-header" hidden="hidden">
      <img src="chrome://branding/content/logo-gradient.svg" alt="" />
      <h1 data-l10n-id="account-hub-welcome-line">
        <span data-l10n-name="brand-name"></span>
      </h1>
    </div>
    <div id="defaultHeader" class="start-header" hidden="hidden">
      <img src="chrome://branding/content/logo-gradient.svg" alt="" />
      <h1>
        <span class="start-header-brand-name"
              data-l10n-id="account-hub-brand"></span>
        <span class="start-header-title"
              data-l10n-id="account-hub-title"></span>
      </h1>
    </div>
  </header>

  <div class="hub-body">
    <div class="hub-body-grid"></div>
  </div>

  <footer class="hub-footer">
    <ul class="reset-list footer-links">
      <li>
        <a id="hubReleaseNotes"
           data-l10n-id="account-hub-release-notes"></a>
      </li>
      <li>
        <a href="https://support.mozilla.org/products/thunderbird"
           data-l10n-id="account-hub-support"
           onclick="openLinkExternally(this.href);"></a>
      </li>
      <li>

      </li>
    </ul>
  </footer>
</html:template>

<html:template id="accountHubEmailSetup" xmlns="http://www.w3.org/1999/xhtml">
  <form id="emailForm" class="account-hub-form">
    <header class="hub-header">
      <h1 class="sub-view-title" data-l10n-id="account-hub-email-title"></h1>
    </header>

    <div class="hub-body">
      <label for="realName"
             data-l10n-id="account-setup-name-label"
             data-l10n-attrs="accesskey">
      </label>
      <div class="input-control">
        <input id="realName" type="text"
               class="input-field"
               data-l10n-id="account-setup-name-input"
               required="required" />
        <img src="chrome://messenger/skin/icons/new/compact/info.svg"
             data-l10n-id="account-setup-name-info-icon"
             alt=""
             class="form-icon" />
        <img src="chrome://messenger/skin/icons/new/compact/warning.svg"
             data-l10n-id="account-setup-name-warning-icon"
             alt=""
             class="form-icon icon-warning" />
      </div>

      <label for="email"
             data-l10n-id="account-setup-email-label"
             data-l10n-attrs="accesskey">
      </label>
      <div class="input-control">
        <input id="email" type="email"
               data-l10n-id="account-setup-email-input"
               class="input-field"
               required="required" />
        <img id="emailInfo"
             src="chrome://messenger/skin/icons/new/compact/info.svg"
             data-l10n-id="account-setup-email-info-icon"
             alt=""
             class="form-icon" />
        <img id="emailWarning"
             src="chrome://messenger/skin/icons/new/compact/warning.svg"
             data-l10n-id="account-setup-email-warning-icon"
             alt=""
             class="form-icon icon-warning" />
      </div>

      <label for="password"
             data-l10n-id="account-setup-password-label"
             data-l10n-attrs="accesskey">
      </label>
      <div class="input-control">
        <!-- Leave the placeholder empty for CSS visibility toggle of the
             adjacent button. -->
        <input id="password" type="password" class="input-field"
               placeholder="" />
        <button id="passwordToggleButton"
                type="button"
                data-l10n-id="account-setup-password-toggle-show"
                class="form-toggle-button"
                aria-pressed="false">
          <img src="" alt="" class="form-icon" />
        </button>
      </div>

      <div class="remember-button-container">
        <label class="toggle-container-with-text">
          <input id="rememberPassword" type="checkbox" checked="checked" />
          <span data-l10n-id="account-setup-remember-password"
                data-l10n-attrs="accesskey">
          </span>
        </label>
      </div>
    </div>

    <footer class="hub-footer">
      <menu class="dialog-menu-container two-columns">
        <li>
          <button id="emailGoBackButton" type="button"
                  data-l10n-id="account-hub-email-cancel-button"></button>
        </li>
        <li>
          <button id="emailContinueButton" type="submit"
                  data-l10n-id="account-hub-email-continue-button"
                  class="primary"
                  disabled="disabled"></button>
        </li>
      </menu>
    </footer>
  </form>
</html:template>
</html:body>
</html>
