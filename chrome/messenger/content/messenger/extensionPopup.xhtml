<?xml version="1.0"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, you can obtain one at http://mozilla.org/MPL/2.0/. -->

<?xml-stylesheet href="chrome://global/skin/global.css" type="text/css"?>
<?xml-stylesheet href="chrome://global/skin/popup.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/messenger.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/tabmail.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/searchBox.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/browserRequest.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/extensionPopup.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/contextMenu.css" type="text/css"?>

<!DOCTYPE html [
  <!ENTITY % brandDTD SYSTEM "chrome://branding/locale/brand.dtd">
  %brandDTD;
  <!ENTITY % messengerDTD SYSTEM "chrome://messenger/locale/messenger.dtd">
  %messengerDTD;
]>
<html id="browserRequest" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
      xmlns:html="http://www.w3.org/1999/xhtml"
      windowtype="mail:extensionPopup"
      width="800" height="500"
      scrolling="false">
<head>
  <title data-l10n-id="extension-popup-default-title"></title>
  <link rel="localization" href="branding/brand.ftl"/>
  <link rel="localization" href="toolkit/global/textActions.ftl" />
  <link rel="localization" href="messenger/messenger.ftl" />
  <link rel="localization" href="messenger/extensions/popup.ftl"/>
  <script defer="defer" src="chrome://communicator/content/utilityOverlay.js"></script>
  <script defer="defer" src="chrome://global/content/contentAreaUtils.js"></script>
  <script defer="defer" src="chrome://global/content/editMenuOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/globalOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/viewZoomOverlay.js"></script>
  <script defer="defer" src="chrome://messenger/content/browserRequest.js"></script>
  <script defer="defer" src="chrome://messenger/content/browserPopups.js"></script>
  <script defer="defer" src="chrome://messenger/content/extensionPopup.js"></script>
</head>
<html:body xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <popupset id="mainPopupSet">
    <tooltip id="aHTMLTooltip" page="true"/>

  <menupopup id="browserContext"
             onpopupshowing="return browserContextOnShowing(event);"
             onpopuphiding="browserContextOnHiding(event);">
    <!-- Browser navigation -->
    <menugroup id="context-navigation">
        <menuitem id="browserContext-back"
                  data-l10n-id="content-tab-menu-back"
                  data-l10n-args='{"shortcut":""}'
                  class="menuitem-iconic"
                  command="Browser:Back"/>
        <menuitem id="browserContext-forward"
                  data-l10n-id="content-tab-menu-forward"
                  data-l10n-args='{"shortcut":""}'
                  class="menuitem-iconic"
                  command="Browser:Forward"/>
        <menuitem id="browserContext-reload"
                  class="menuitem-iconic"
                  tooltip="dynamic-shortcut-tooltip"
                  data-l10n-id="content-tab-menu-reload"
                  command="cmd_reload"/>
        <menuitem id="browserContext-stop"
                  class="menuitem-iconic"
                  tooltip="dynamic-shortcut-tooltip"
                  data-l10n-id="content-tab-menu-stop"
                  command="cmd_stop"/>
    </menugroup>
    <menuseparator id="browserContext-sep-navigation"/>
    <!-- Spellchecking suggestions -->
    <menuitem id="browserContext-spell-no-suggestions"
              disabled="true"
              data-l10n-id="text-action-spell-no-suggestions"/>
    <menuitem id="browserContext-spell-add-to-dictionary"
              data-l10n-id="text-action-spell-add-to-dictionary"
              oncommand="gSpellChecker.addToDictionary();"/>
    <menuitem id="browserContext-spell-undo-add-to-dictionary"
              data-l10n-id="text-action-spell-undo-add-to-dictionary"
              oncommand="gSpellChecker.undoAddToDictionary();" />
    <menuseparator id="browserContext-spell-suggestions-separator"/>

    <menuitem id="browserContext-openInBrowser"
              label="&openInBrowser.label;"
              accesskey="&openInBrowser.accesskey;"
              oncommand="gContextMenu.openInBrowser();"/>
    <menuitem id="browserContext-openLinkInBrowser"
              label="&openLinkInBrowser.label;"
              accesskey="&openLinkInBrowser.accesskey;"
              oncommand="gContextMenu.openLinkInBrowser();"/>
    <menuseparator id="browserContext-sep-open-browser"/>
    <menuitem id="browserContext-undo"
              label="&undoDefaultCmd.label;"
              accesskey="&undoDefaultCmd.accesskey;"
              command="cmd_undo"/>
    <menuseparator id="browserContext-sep-undo"/>
    <menuitem id="browserContext-cut"
              data-l10n-id="text-action-cut"
              command="cmd_copy"/>
    <menuitem id="browserContext-copy"
              data-l10n-id="text-action-copy"
              command="cmd_copy"/>
    <menuitem id="browserContext-paste"
              data-l10n-id="text-action-paste"
              command="cmd_paste"/>
    <menuitem id="browserContext-selectall"
              data-l10n-id="text-action-select-all"
              command="cmd_selectAll"/>
    <menuseparator id="browserContext-sep-clipboard"/>

    <menuitem id="browserContext-searchTheWeb"
              label="[glodaComplete.webSearch1.label]"
              oncommand="openWebSearch(event.target.value)"/>

    <!-- Spellchecking general menu items (enable, add dictionaries...) -->
    <menuseparator id="browserContext-spell-separator"/>
    <menuitem id="browserContext-spell-check-enabled"
              data-l10n-id="text-action-spell-check-toggle"
              type="checkbox"
              oncommand="gSpellChecker.toggleEnabled();"/>
    <menuitem id="browserContext-spell-add-dictionaries-main"
              label="&spellAddDictionaries.label;"
              accesskey="&spellAddDictionaries.accesskey;"
              oncommand="gContextMenu.addDictionaries();"/>
    <menu id="browserContext-spell-dictionaries"
          data-l10n-id="text-action-spell-dictionaries">
        <menupopup id="browserContext-spell-dictionaries-menu">
            <menuseparator id="browserContext-spell-language-separator"/>
            <menuitem id="browserContext-spell-add-dictionaries"
                      label="&spellAddDictionaries.label;"
                      accesskey="&spellAddDictionaries.accesskey;"
                      oncommand="gContextMenu.addDictionaries();"/>
        </menupopup>
    </menu>

    <menuitem id="browserContext-media-play"
              label="&contextPlay.label;"
              accesskey="&contextPlay.accesskey;"
              oncommand="gContextMenu.mediaCommand('play');"/>
    <menuitem id="browserContext-media-pause"
              label="&contextPause.label;"
              accesskey="&contextPause.accesskey;"
              oncommand="gContextMenu.mediaCommand('pause');"/>
    <menuitem id="browserContext-media-mute"
              label="&contextMute.label;"
              accesskey="&contextMute.accesskey;"
              oncommand="gContextMenu.mediaCommand('mute');"/>
    <menuitem id="browserContext-media-unmute"
              label="&contextUnmute.label;"
              accesskey="&contextUnmute.accesskey;"
              oncommand="gContextMenu.mediaCommand('unmute');"/>
    <menuseparator id="browserContext-sep-edit"/>
    <menuitem id="browserContext-copylink"
              label="&copyLinkCmd.label;"
              accesskey="&copyLinkCmd.accesskey;"
              command="cmd_copyLink"/>
    <menuitem id="browserContext-copyimage"
              label="&copyImageAllCmd.label;"
              accesskey="&copyImageAllCmd.accesskey;"
              command="cmd_copyImage"/>
    <menuitem id="browserContext-addemail"
              label="&AddToAddressBook.label;"
              accesskey="&AddToAddressBook.accesskey;"
              oncommand="addEmail(gContextMenu.linkURL);"/>
    <menuitem id="browserContext-composeemailto"
              label="&SendMessageTo.label;"
              accesskey="&SendMessageTo.accesskey;"
              oncommand="composeEmailTo(gContextMenu.linkURL);"/>
    <menuitem id="browserContext-copyemail"
              label="&copyEmailCmd.label;"
              accesskey="&copyEmailCmd.accesskey;"
              oncommand="gContextMenu.copyEmail();"/>
    <menuseparator id="browserContext-sep-copy"/>
    <menuitem id="browserContext-savelink"
              label="&saveLinkAsCmd.label;"
              accesskey="&saveLinkAsCmd.accesskey;"
              oncommand="gContextMenu.saveLink();"/>
    <menuitem id="browserContext-saveimage"
              label="&saveImageAsCmd.label;"
              accesskey="&saveImageAsCmd.accesskey;"
              oncommand="gContextMenu.saveImage();"/>
  </menupopup>
  <panel id="DateTimePickerPanel"
         type="arrow"
         orient="vertical"
         noautofocus="true"
         norolluponanchor="true"
         consumeoutsideclicks="never"
         level="top"
         tabspecific="true">
  </panel>

  <!-- For select dropdowns. The menupopup is what shows the list of options,
       and the popuponly menulist makes things like the menuactive attributes
       work correctly on the menupopup. ContentSelectDropdown expects the
       popuponly menulist to be its immediate parent. -->
  <menulist popuponly="true" id="ContentSelectDropdown" hidden="true">
    <menupopup rolluponmousewheel="true"
               activateontab="true" position="after_start"
               level="parent"
               consumeoutsideclicks="false" ignorekeys="shortcuts"
      />
  </menulist>

  <panel is="autocomplete-richlistbox-popup" id="PopupAutoComplete"
         type="autocomplete"
         role="group"
         noautofocus="true"/>

  <tooltip id="remoteBrowserTooltip"/>
  </popupset>

  <commandset>
    <command id="cmd_copyLink" oncommand="goDoCommand('cmd_copyLink')" disabled="false"/>
    <command id="cmd_copyImage" oncommand="goCopyImage()" disabled="false"/>
    <command id="cmd_close" oncommand="window.tryToClose()"/>
    <command id="cmd_reload" oncommand="goDoCommand('cmd_reload');"/>
    <command id="cmd_stop" oncommand="goDoCommand('cmd_stop');"/>
    <command id="Browser:Back" oncommand="goDoCommand('Browser:Back');"/>
    <command id="Browser:Forward" oncommand="goDoCommand('Browser:Forward');"/>
  </commandset>

  <stringbundle id="bundle_messenger" src="chrome://messenger/locale/messenger.properties"/>

  <keyset id="popupKeys">
    <key id="key_close" data-l10n-id="close-shortcut" command="cmd_close" modifiers="accel" reserved="true"/>
  </keyset>

  <keyset id="browserKeys">
      <key id="key_goBackKb" keycode="VK_LEFT" oncommand="gBrowser.goBack()" modifiers="alt" />
      <key id="key_goForwardKb" keycode="VK_RIGHT" oncommand="gBrowser.goForward()" modifiers="alt" />
  </keyset>

  <!-- Use the same styling and semantics as content tabs. -->
  <html:div id="header" class="contentTabAddress">
    <html:img id="security-icon" class="contentTabSecurity" />
    <html:input id="headerMessage" class="contentTabUrlInput themeableSearchBox"
                readonly="readonly" />
  </html:div>
  <stack flex="1">
    <browser id="requestFrame"
             type="content"
             src="about:blank"
             flex="1"
             tooltip="aHTMLTooltip"
             autocompletepopup="PopupAutoComplete"
             context="browserContext"
             messagemanagergroup="single-site"/>
  </stack>
</html:body>
</html>
